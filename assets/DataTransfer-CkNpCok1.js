import{aj as k,ak as B,al as N,am as J,an as I,ag as U,U as j,a9 as A,aa as g,d as O,g as P,r as _,m as L,q as l,e,l as o,y as h,z as M,u as d,o as S,p as $,c as F,I as T,B as z}from"./index-BTMAe9ol.js";import{_ as q}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-CsjEiVBC.js";class G{_loadPartnersCommandHandler;_loadDeliveryCarriesCommandHandler;_loadOrdersCommandHandler;_loadMoneyMovementsCommandHandler;_clearStoresCommandHandler;constructor(){this._loadPartnersCommandHandler=new k,this._loadDeliveryCarriesCommandHandler=new B,this._loadOrdersCommandHandler=new N,this._loadMoneyMovementsCommandHandler=new J,this._clearStoresCommandHandler=new I}async handle(a){a.removePartners&&await U.removeAll(),a.removeCarriers&&await j.removeAll(),a.removeOrders&&await A.removeAll(),a.removeMovements&&await g.removeAll(),a.removePartners&&await this._loadPartnersCommandHandler.handle(),a.removeCarriers&&await this._loadDeliveryCarriesCommandHandler.handle(),a.removeOrders&&await this._loadOrdersCommandHandler.handle(),a.removeMovements&&await this._loadMoneyMovementsCommandHandler.handle(),await this._clearStoresCommandHandler.handle(a)}}class K{async exportAll(a,t,m,s){const r={partners:[],orders:[],carriers:[],movements:[]};a&&(r.partners=await U.getAll()),t&&(r.carriers=await j.getAll()),m&&(r.orders=await A.getAll()),s&&(r.movements=await g.getAll());const u=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),n=URL.createObjectURL(u),V=document.createElement("a");V.href=n,V.download=`export-${new Date().toISOString().slice(0,10)}.json`,V.click(),URL.revokeObjectURL(n)}async importAll(a,t,m,s,r){const u=await a.text(),n=JSON.parse(u);t&&n.partners&&await U.saveAll(n.partners),m&&n.orders&&await A.saveAll(n.orders),s&&n.carriers&&await j.saveAll(n.carriers),r&&n.movements&&await g.saveAll(n.movements)}}class Q{_fileService;constructor(a){this._fileService=a}async handle(a){await this._fileService.exportAll(a.includePartners,a.includeCarriers,a.includeOrders,a.includeMovements)}}class W{_fileService;_loadPartnersCommandHandler;_loadDeliveryCarriesCommandHandler;_loadOrdersCommandHandler;_loadMoneyMovementCommandHandler;constructor(a){this._fileService=a,this._loadPartnersCommandHandler=new k,this._loadDeliveryCarriesCommandHandler=new B,this._loadOrdersCommandHandler=new N,this._loadMoneyMovementCommandHandler=new J}async handle(a){await this._fileService.importAll(a.file,a.includePartners,a.includeCarriers,a.includeOrders,a.includeMovements),a.includePartners&&await this._loadPartnersCommandHandler.handle(),a.includeCarriers&&await this._loadDeliveryCarriesCommandHandler.handle(),a.includeOrders&&await this._loadOrdersCommandHandler.handle(),a.includeMovements&&await this._loadMoneyMovementCommandHandler.handle()}}function R(){const C=new K;return{exportDataCommandHandler:new Q(C),importDataCommandHandler:new W(C),deleteDataCommandHandler:new G}}const X=O({__name:"ExportData",setup(C){const{exportDataCommandHandler:a}=R(),{tCap:t}=P(),m=_(!1),s=_(!1),r=_(!1),u=_(!1);function n(){a.handle({includePartners:m.value,includeCarriers:s.value,includeOrders:r.value,includeMovements:u.value})}return(V,i)=>{const c=o("v-card-title"),D=o("v-divider"),p=o("v-switch"),v=o("v-col"),y=o("v-row"),b=o("v-btn"),x=o("v-card-text"),f=o("v-card");return S(),L(f,null,{default:l(()=>[e(c,null,{default:l(()=>[h(M(d(t)("options.export")),1)]),_:1}),e(D),e(x,null,{default:l(()=>[e(y,{justify:"center"},{default:l(()=>[e(v,{cols:"auto"},{default:l(()=>[e(p,{modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=H=>m.value=H),label:d(t)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(v,{cols:"auto"},{default:l(()=>[e(p,{modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=H=>s.value=H),label:d(t)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(v,{cols:"auto"},{default:l(()=>[e(p,{modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=H=>r.value=H),label:d(t)("order.order",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(v,{cols:"auto"},{default:l(()=>[e(p,{modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=H=>u.value=H),label:d(t)("moneyMovement.moneyMovement",2),color:"primary"},null,8,["modelValue","label"])]),_:1})]),_:1}),e(y,{justify:"center"},{default:l(()=>[e(b,{color:"warning",onClick:n},{default:l(()=>[h(M(d(t)("options.exportJson")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Y=O({__name:"ImportData",setup(C){const{importDataCommandHandler:a}=R(),{tCap:t}=P(),m=_(!1),s=_(!1),r=_(!1),u=_(!1);let n=_(null);function V(){n.value&&a.handle({file:n.value,includePartners:m.value,includeCarriers:s.value,includeOrders:r.value,includeMovements:u.value})}return(i,c)=>{const D=o("v-card-title"),p=o("v-divider"),v=o("v-switch"),y=o("v-col"),b=o("v-row"),x=o("v-file-input"),f=o("v-btn"),H=o("v-card-text"),E=o("v-card");return S(),L(E,null,{default:l(()=>[e(D,null,{default:l(()=>[h(M(d(t)("options.import")),1)]),_:1}),e(p),e(H,null,{default:l(()=>[e(b,{justify:"center"},{default:l(()=>[e(y,{cols:"auto"},{default:l(()=>[e(v,{modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=w=>m.value=w),label:d(t)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"auto"},{default:l(()=>[e(v,{modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=w=>s.value=w),label:d(t)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"auto"},{default:l(()=>[e(v,{modelValue:r.value,"onUpdate:modelValue":c[2]||(c[2]=w=>r.value=w),label:d(t)("order.order",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"auto"},{default:l(()=>[e(v,{modelValue:u.value,"onUpdate:modelValue":c[3]||(c[3]=w=>u.value=w),label:d(t)("moneyMovement.moneyMovement",2),color:"primary"},null,8,["modelValue","label"])]),_:1})]),_:1}),e(b,{justify:"center"},{default:l(()=>[e(x,{modelValue:d(n),"onUpdate:modelValue":c[4]||(c[4]=w=>$(n)?n.value=w:n=w),label:"JSON file",accept:"application/json"},null,8,["modelValue"])]),_:1}),e(b,{justify:"center"},{default:l(()=>[e(f,{color:"primary",disabled:!d(n),onClick:V},{default:l(()=>[h(M(d(t)("options.importJson")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})}}}),Z=O({__name:"DeleteData",setup(C){const{deleteDataCommandHandler:a}=R(),{tCap:t}=P(),m=_(!1),s=_(!1),r=_(!1),u=_(!1);function n(){a.handle({removePartners:m.value,removeCarriers:s.value,removeOrders:r.value,removeMovements:u.value})}return(V,i)=>{const c=o("v-card-title"),D=o("v-divider"),p=o("v-switch"),v=o("v-col"),y=o("v-row"),b=o("v-card-text"),x=o("v-card");return S(),L(x,null,{default:l(()=>[e(c,null,{default:l(()=>[h(M(d(t)("options.deleteData")),1)]),_:1}),e(D),e(b,null,{default:l(()=>[e(y,{justify:"center"},{default:l(()=>[e(v,{cols:"auto"},{default:l(()=>[e(p,{modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=f=>m.value=f),label:d(t)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(v,{cols:"auto"},{default:l(()=>[e(p,{modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=f=>s.value=f),label:d(t)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(v,{cols:"auto"},{default:l(()=>[e(p,{modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=f=>r.value=f),label:d(t)("order.order",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(v,{cols:"auto"},{default:l(()=>[e(p,{modelValue:u.value,"onUpdate:modelValue":i[3]||(i[3]=f=>u.value=f),label:d(t)("moneyMovement.moneyMovement",2),color:"primary"},null,8,["modelValue","label"])]),_:1})]),_:1}),e(y,{justify:"center"},{default:l(()=>[e(q,{name:"All Data","action-fn":n,mini:!1})]),_:1})]),_:1})]),_:1})}}}),le=O({__name:"DataTransfer",setup(C){const{tCap:a}=P();return(t,m)=>{const s=o("v-row"),r=o("v-col");return S(),F(T,null,[e(s,{justify:"center"},{default:l(()=>[z("h1",null,M(d(a)("options.dataTransfer")),1)]),_:1}),e(s,{justify:"center",class:"mt-6"},{default:l(()=>[e(r,{cols:"auto"},{default:l(()=>[e(X)]),_:1})]),_:1}),e(s,{justify:"center",class:"mt-6"},{default:l(()=>[e(r,{cols:"auto"},{default:l(()=>[e(Y)]),_:1})]),_:1}),e(s,{justify:"center",class:"mt-6"},{default:l(()=>[e(r,{cols:"auto"},{default:l(()=>[e(Z)]),_:1})]),_:1})],64)}}});export{le as default};

import{g as P,C as y,S as T,D as w,E as $,d as A,F as C,G as H,l as f,m as c,o as i,u as o,q as s,e as d,x as S,H as V,y as D,z as L,B as p,c as z,I as E,J as F}from"./index-DDCoslFA.js";import{g as I,u as q}from"./useDeliveryCarrierDetails-D-lDqWhS.js";import{_ as G}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BQDfpqqg.js";import{_ as J}from"./EditPartnerModal.vue_vue_type_script_setup_true_lang-BS7dK52S.js";import{a as M,b as R}from"./AddressLink.vue_vue_type_script_setup_true_lang-B35uH1Wn.js";function j(e){return e.find(t=>t.isPrimary)}function K(e){return e.filter(t=>t.type===$.Phone).sort((t,n)=>Number(n.isPrimary)-Number(t.isPrimary)).slice(0,3)}function m(e){const t=K(e.phones),n=j(e.addresses);return{id:e.id,clientNumber:e.clientNumber,type:e.type,name:e.businessName?`${e.businessName} (${e.contactName})`:e.contactName,city:n?.city,address:n,phones:t,rowType:"partner",value:e}}function O(e){return{...m(e),activity:e.activity,rowType:"supplier"}}function Q(e){return{...m(e),deliveryCarrier:I(e.deliveryCarrierId),rowType:"b2b"}}function U(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function W(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("partner.activity"),key:"activity",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function X(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("deliveryCarrier.carrier"),key:"deliveryCarrier",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function g(e){return Array.isArray(e)&&e.every(t=>t instanceof T)}function _(e){return Array.isArray(e)&&e.every(t=>t instanceof w)}function Y(e){const{tCap:t}=P(),n=y(()=>{const a=e.value??[];return g(a)?a.map(O):_(a)?a.map(Q):a.map(m)}),l=y(()=>{const a=e.value??[];return g(a)?W(t):_(a)?X(t):U(t)});return{data:n,headers:l}}const Z={class:"d-flex flex-column gap-1"},ee={class:"d-flex flex-column gap-1"},ie=A({__name:"PartnerList",props:{partners:{}},setup(e){const{deletePartnerCommandHandler:t}=q(),n=C(),l=e;function a(h,u){n.push(`/partner/${u.item.id}`)}const{data:k,headers:v}=Y(H(l,"partners"));return(h,u)=>{const b=f("v-btn"),N=f("v-data-table");return i(),c(N,{headers:o(v),items:o(k),class:"text-start","hide-default-footer":"",density:"comfortable",hover:"","onClick:row":a},{"item.phones":s(({item:r})=>[p("div",Z,[(i(!0),z(F,null,E(r.phones,(x,B)=>(i(),c(R,{key:B,class:"d-flex align-center",phone:x},null,8,["phone"]))),128))])]),"item.address":s(({item:r})=>[p("div",ee,[d(M,{class:"d-flex align-center",address:r.address,format:"street"},null,8,["address"])])]),"item.deliveryCarrier":s(({item:r})=>[r.rowType==="b2b"&&r.deliveryCarrier!==void 0?(i(),c(b,{key:0,variant:"text",onClick:V(()=>o(n).push(`/carrier/${r.deliveryCarrier?.id}`),["stop"])},{default:s(()=>[D(L(r.deliveryCarrier.name),1)]),_:2},1032,["onClick"])):S("",!0)]),"item.actions":s(({item:r})=>[d(J,{partner:r.value,mini:!0},null,8,["partner"]),d(G,{name:r.name,"action-fn":()=>o(t).handle({id:r.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}});export{ie as _};

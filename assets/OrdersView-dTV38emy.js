import{g as K,C as R,d as q,G as $e,m as E,l as c,u as l,q as u,e as t,x as G,H,y as B,z as A,F as Re,o as $,a2 as Y,c as ae,a3 as se,r as L,_ as Z,w as S,a4 as Ue,a5 as de,f as le,t as oe,B as O,a6 as Ee,A as _e,j as De,k as Ne,p as me,I as Te,J as Ie,a7 as Be,n as Oe}from"./index-DDCoslFA.js";import{_ as qe}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-BQDfpqqg.js";import{u as ue,_ as je,a as ze,b as X,T as Me,N as J,B as Le,r as Fe,t as Se,c as Ke,d as Pe,s as ce,e as W}from"./useVariationTableMapper-Ckq-1-8-.js";import{g as Qe}from"./usePartnerDetails-C2FHGmbF.js";function He(e,s){return{id:e.id,orderNumber:Ge(e.orderNumber),partner:Qe(e.partnerId),createdDate:ve(e.createdDate),dueDate:ve(e.dueDate),status:e.status,direction:e.direction,total:Je(e.totalAmount)}}function Ge(e){return`#${e}`}function ve(e){return e?e.toLocaleDateString():"-"}function Je(e){return`${e.toFixed(2)}€`}function We(e){return[{title:e("order.number"),key:"orderNumber",align:"start"},{title:e("partner.businessName"),key:"partner",align:"start"},{title:e("order.createdDate"),key:"createdDate",align:"start"},{title:e("order.dueDate"),key:"dueDate",align:"start"},{title:e("order.status"),key:"status",align:"start"},{title:e("order.direction"),key:"direction",align:"start"},{title:e("order.total"),key:"total",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function Ye(e){const{tCap:s}=K(),o=R(()=>(e.value??[]).map(r=>He(r))),d=R(()=>We(s));return{data:o,headers:d}}const Ze=q({__name:"OrderList",props:{orders:{}},setup(e){const s=Re(),o=e,{deleteOrderCommmandHandler:d}=ue(),{data:i,headers:r}=Ye($e(o,"orders"));function a(m){return m.partner?`παραγγελία για ${v(m.partner)}`:m.id}function v(m){return m.businessName?`${m.businessName} (${m.contactName})`:m.contactName}function n(m,y){s.push(`/order/${y.item.id}`)}return(m,y)=>{const V=c("v-btn"),p=c("v-data-table");return $(),E(p,{headers:l(r),items:l(i),class:"text-start","hide-default-footer":"",density:"comfortable",hover:"","onClick:row":n},{"item.partner":u(({item:f})=>[f.partner!==void 0?($(),E(V,{key:0,variant:"text",onClick:H(()=>l(s).push(`/partner/${f.partner?.id}`),["stop"])},{default:u(()=>[B(A(v(f.partner)),1)]),_:2},1032,["onClick"])):G("",!0)]),"item.status":u(({item:f})=>[t(ze,{status:f.status},null,8,["status"])]),"item.direction":u(({item:f})=>[t(je,{direction:f.direction},null,8,["direction"])]),"item.actions":u(({item:f})=>[t(qe,{name:a(f),"action-fn":()=>l(d).handle({id:f.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}}),be=q({__name:"TextEditor",props:{modelValue:{},width:{}},emits:["update:modelValue","blur","navigate"],setup(e,{emit:s}){const o=s,{onKeydown:d}=X(o);return(i,r)=>{const a=c("v-text-field");return $(),E(a,{"model-value":e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=v=>i.$emit("update:modelValue",v)),density:"compact",variant:"underlined","hide-details":"",autofocus:"",onBlur:r[1]||(r[1]=v=>i.$emit("blur")),onKeydown:l(d),style:Y({width:e.width||"1vw"})},null,8,["model-value","onKeydown","style"])}}}),Xe=q({__name:"EditableCell",props:{modelValue:{},focused:{type:Boolean},hasEditor:{type:Boolean},width:{}},emits:["update:modelValue","request-edit","request-close","request-move-cell","request-move-row"],setup(e,{emit:s}){const o=e,d=s,i=R({get:()=>o.modelValue,set:p=>r(p)});function r(p){d("update:modelValue",p)}function a(){!o.focused&&o.hasEditor&&d("request-edit")}function v(p,f){return f?p:!1}function n(p){switch(p){case J.Up:y(-1);break;case J.Down:y(1);break;case J.Left:m(-1);break;case J.Right:m(1);break}}function m(p){d("request-move-cell",p)}function y(p){d("request-move-row",p)}function V(p){p?.preventDefault(),d("request-close")}return(p,f)=>($(),ae("td",{onClick:H(a,["stop"])},[v(e.focused,e.hasEditor)?se(p.$slots,"editor",{key:0,value:i.value,width:e.width,onUpdate:r,onBlur:V,onNavigate:n,onKeydown:f[0]||(f[0]=H(()=>{},["stop"]))},()=>[t(be,{"model-value":i.value,width:e.width,"onUpdate:modelValue":r,onBlur:V,onNavigate:n},null,8,["model-value","width"])]):G("",!0),v(e.focused,e.hasEditor)?G("",!0):se(p.$slots,"display",{key:1,value:i.value,width:e.width,focused:e.focused,onUpdate:r,onBlur:V,onNavigate:n,onKeydown:f[1]||(f[1]=H(()=>{},["stop"]))},()=>[t(Me,{modelValue:i.value,width:e.width},null,8,["modelValue","width"])])]))}});function et(e,s,o){function d(_){return _.row*s.length+_.column}const i=L(null);function r(_,U){i.value=d({row:_,column:U})}function a(){i.value=null,o()}function v(_){i.value!==null&&m(i.value,_)}function n(_){i.value!==null&&m(i.value,C(_))}function m(_,U){let N=_+U;const b=y(U);for(;f(N);){if(V(N)){i.value=N,o();return}N+=b}}function y(_){return _<0?-1:1}function V(_){return p(_)?.navigable}function p(_){const U=_%s.length;return s.find(N=>N.order===U)}function f(_){return!(_<0||_>=e.value.length*s.length)}function C(_){return _*s.length}function M(_,U){return C(_)+U===i.value}return{startEditingCell:r,isCellFocused:M,stopEditingCell:a,moveEditingCellByCell:v,moveEditingCellByRow:n}}const tt=q({__name:"AutocompleteEditor",props:{modelValue:{},items:{},width:{}},emits:["update:modelValue","blur","navigate"],setup(e,{emit:s}){const o=s,{onKeydown:d}=X(o);return(i,r)=>{const a=c("v-autocomplete");return $(),E(a,{class:"autocomplete-editor","model-value":e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=v=>i.$emit("update:modelValue",v)),items:e.items,density:"compact","hide-details":"",autofocus:"",onBlur:r[1]||(r[1]=v=>i.$emit("blur")),onKeydown:l(d),style:Y({width:e.width||"5vw"})},null,8,["model-value","items","onKeydown","style"])}}}),nt=Z(tt,[["__scopeId","data-v-85bbdfb4"]]),ot=q({__name:"NumberEditor",props:{modelValue:{},width:{}},emits:["update:modelValue","blur","navigate"],setup(e,{emit:s}){const o=s,{onKeydown:d}=X(o);return(i,r)=>{const a=c("v-text-field");return $(),E(a,{class:"number-editor","model-value":e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=v=>i.$emit("update:modelValue",v)),density:"compact",variant:"underlined","hide-details":"",autofocus:"",type:"text",inputmode:"numeric",pattern:"[0-9]*",onBlur:r[1]||(r[1]=v=>i.$emit("blur")),onKeydown:l(d),style:Y({width:e.width||"1vw"})},null,8,["model-value","onKeydown","style"])}}}),at=q({__name:"PriceEditor",props:{modelValue:{},width:{}},emits:["update:modelValue","blur","navigate"],setup(e,{emit:s}){const o=s,{onKeydown:d}=X(o);function i(r){const a=r.replace(/[^\d.]/g,"").split(".");return a.length>2?a.shift()+"."+a.join(""):a.join(".")}return(r,a)=>{const v=c("v-text-field");return $(),E(v,{class:"price-editor","model-value":e.modelValue,"onUpdate:modelValue":a[0]||(a[0]=n=>r.$emit("update:modelValue",i(n))),density:"compact",variant:"underlined","hide-details":"",autofocus:"",type:"text",inputmode:"decimal",onBlur:a[1]||(a[1]=n=>r.$emit("blur")),onKeydown:l(d),suffix:"€",style:Y({width:e.width||"2vw"})},null,8,["model-value","onKeydown","style"])}}}),lt={autocomplete:nt,number:ot,price:at,text:be},ut=q({__name:"EditableTable",props:{modelValue:{},tableColumns:{},hideRowIndex:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:s}){const o=e,d=s,i=L([]),{startEditingCell:r,isCellFocused:a,stopEditingCell:v,moveEditingCellByCell:n,moveEditingCellByRow:m}=et(i,o.tableColumns,V);S(()=>o.modelValue,C=>{i.value=Ke(C)},{immediate:!0,deep:!0});function y(C,M,_){return M.calculate?M.calculate(C):_}function V(){d("update:modelValue",Se(i.value))}function p(C){return o.tableColumns[C].editorType!==void 0}function f(C){v(),i.value.splice(C,1),V()}return(C,M)=>{const _=c("v-btn");return $(),E(Le,{"table-columns":e.tableColumns,modelValue:i.value,"hide-row-index":e.hideRowIndex},{cell:u(({row:U,rowIndex:N,column:b,colIndex:w,cell:D})=>[t(Xe,{modelValue:D.value,"onUpdate:modelValue":x=>D.value=x,focused:l(a)(N,w),hasEditor:p(w),width:b.width,onRequestEdit:x=>l(r)(N,w),onRequestClose:l(v),onRequestMoveCell:l(n),onRequestMoveRow:l(m)},Ue({_:2},[b.editorType?{name:"editor",fn:u(x=>[($(),E(de(l(lt)[b.editorType]),{"model-value":x.value,"onUpdate:modelValue":x.onUpdate,width:x.width,items:b.list,onBlur:x.onBlur,onNavigate:x.onNavigate},null,40,["model-value","onUpdate:modelValue","width","items","onBlur","onNavigate"]))]),key:"0"}:void 0,b.rendererType?{name:"display",fn:u(x=>[($(),E(de(l(Fe)[b.rendererType]),{"model-value":y(U,b,x.value),width:x.width,focused:x.focused,"onUpdate:modelValue":x.onUpdate,onBlur:x.onBlur,onNavigate:x.onNavigate},null,40,["model-value","width","focused","onUpdate:modelValue","onBlur","onNavigate"]))]),key:"1"}:void 0]),1032,["modelValue","onUpdate:modelValue","focused","hasEditor","width","onRequestEdit","onRequestClose","onRequestMoveCell","onRequestMoveRow"])]),actions:u(({row:U,rowIndex:N})=>[t(_,{icon:"mdi-close",variant:"text",color:"error",onClick:b=>f(N)},null,8,["onClick"])]),_:1},8,["table-columns","modelValue","hide-row-index"])}}}),it=Z(ut,[["__scopeId","data-v-2c4e5e7f"]]),rt=q({__name:"OrderItemEdit",props:{modelValue:{}},emits:["update:modelValue","remove-item"],setup(e,{emit:s}){const{tCap:o}=K(),{maxLength:d,required:i,numeric:r}=le(),a=e,v=s,n=L(structuredClone(oe(a.modelValue)));S(()=>a.modelValue,b=>{n.value=structuredClone(oe(b))},{deep:!0});function m(){v("update:modelValue",structuredClone(oe(n.value)))}const{vmToRows:y,rowsToVm:V}=Pe(W),p=R({get:()=>y(n.value.variations),set:b=>{n.value.variations=V(b),m()}}),f=R(()=>{const b=n.value.variations.reduce((w,D)=>{const x=Object.values(D.attributes).filter(F=>F).join(" ");return w?w+", "+x:x},"");return b?`(${b})`:""}),C=R(()=>n.value.variations.length),M=R(()=>n.value.variations.reduce((b,w)=>b+ce(w),0)),_=R(()=>n.value.variations.reduce((b,w)=>b+ce(w)*w.price,0));function U(){n.value.variations.push({attributes:Object.fromEntries(W.slice(0,2).map(b=>[b.name,""])),sizing:Object.fromEntries(W.filter(b=>b.name.includes("shoe:")).map(b=>[b.name,0])),price:n.value.basePrice}),m()}function N(b){v("remove-item",n.value.id)}return(b,w)=>{const D=c("v-col"),x=c("v-spacer"),F=c("v-btn"),P=c("v-row"),ee=c("v-fade-transition"),te=c("v-expansion-panel-title"),T=c("v-text-field"),g=c("v-expansion-panel-text"),I=c("v-expansion-panel");return $(),E(I,null,{default:u(()=>[t(te,{"hide-actions":""},{default:u(({expanded:j})=>[t(P,{"no-gutters":""},{default:u(()=>[t(D,{class:"d-flex justify-start",cols:"4"},{default:u(()=>[B(A(n.value.name||"no name")+" "+A(f.value),1)]),_:1}),t(D,{class:"text--secondary",cols:"8"},{default:u(()=>[t(ee,{"leave-absolute":""},{default:u(()=>[t(P,{style:{width:"100%"},"no-gutters":""},{default:u(()=>[t(x),t(D,{cols:"3"},{default:u(()=>[B(A(l(o)("order.variation",2))+": ",1),O("strong",null,A(C.value),1)]),_:1}),t(D,{cols:"3"},{default:u(()=>[B(A(l(o)("order.productQuantity"))+": ",1),O("strong",null,A(M.value),1)]),_:1}),t(D,{cols:"3"},{default:u(()=>[B(A(l(o)("order.productSum"))+": ",1),O("strong",null,A(_.value.toFixed(2))+"€",1)]),_:1}),t(D,{cols:"1"},{default:u(()=>[t(F,{size:"medium",icon:"mdi-trash-can",color:"error",variant:"text",onClick:w[0]||(w[0]=H(k=>N(n.value.id),["stop"]))})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,null,{default:u(()=>[t(P,{justify:"space-around","no-gutters":""},{default:u(()=>[t(D,{cols:"6"},{default:u(()=>[t(T,{modelValue:n.value.name,"onUpdate:modelValue":w[1]||(w[1]=j=>n.value.name=j),onBlur:m,label:l(o)("order.product"),rules:[l(i),l(d)(50)]},null,8,["modelValue","label","rules"])]),_:1}),t(D,{cols:"2"},{default:u(()=>[t(T,{modelValue:n.value.basePrice,"onUpdate:modelValue":w[2]||(w[2]=j=>n.value.basePrice=j),onBlur:m,label:l(o)("order.basePrice"),rules:[l(r)],type:"number",min:"0",step:"0.01",suffix:"€"},null,8,["modelValue","label","rules"])]),_:1}),t(D,{cols:"2"},{default:u(()=>[t(F,{color:"success",text:l(o)("order.addVariationTitle"),"prepend-icon":"mdi-plus",variant:"text",onClick:U},null,8,["text"])]),_:1})]),_:1}),p.value.length>0?($(),E(it,{key:0,modelValue:p.value,"onUpdate:modelValue":w[3]||(w[3]=j=>p.value=j),tableColumns:l(W)},null,8,["modelValue","tableColumns"])):G("",!0)]),_:1})]),_:1})}}}),st=["shoe:38","shoe:39","shoe:40","shoe:41","shoe:42","shoe:43","shoe:44","shoe:45","shoe:46","shoe:47"];function dt(e){return{id:e.id,name:e.name,basePrice:e.variations?.[0]?.price||0,variations:e.variations.map(mt)}}function mt(e){const s={},o={};for(const[d,i]of Object.entries(e.attributes))st.includes(d)?o[d]=Number(i)||0:s[d]=String(i);return Object.keys(o).length===0&&e.quantity>0,{attributes:s,sizing:o,price:e.price}}function pe(e){return{partnerId:e.partnerId,vatRate:e.vatRate,dueDate:e.dueDate||void 0,notes:e.notes,depositAmount:e.depositAmount,discountAmount:e.discountAmount,items:ct(e.items)}}function ct(e){return e.map(s=>({name:s.name,variations:vt(s.variations)}))}function vt(e){const s=e.flatMap(o=>ft(o));return pt(s).sort((o,d)=>o.normalizedAttributes.localeCompare(d.normalizedAttributes))}function pt(e){const s=new Map;for(const o of e){const d=o.normalizedAttributes,i=s.get(d);i?i.quantity+=o.quantity:s.set(d,{...o})}return[...s.values()]}function ft(e,s){const o=_t(e.sizing),d=bt(e.attributes);return o.map(([i,r])=>{const a={...d,size:i};return{attributes:a,normalizedAttributes:Ee(a),quantity:r,price:e.price}})}function _t(e){return Object.entries(e).filter(([s,o])=>o>0).map(([s,o])=>[s.split(":")[1],o])}function bt(e,s){return{...Vt(e)}}function Vt(e){return Object.fromEntries(Object.entries(e).filter(([s,o])=>o!==""&&o!==null&&o!==void 0))}const fe=q({__name:"AmountAdjustmentField",props:{modelValue:{},baseAmount:{},label:{}},emits:["update:modelValue"],setup(e,{emit:s}){const o=e,d=s,i=L("percent"),r=L(0),a=R(()=>i.value==="amount"?r.value||0:((r.value||0)/100*o.baseAmount).toFixed(2)),v=R(()=>i.value==="percent"?`${a.value} €`:"");return S(()=>o.modelValue,n=>{i.value==="amount"?r.value=n:o.baseAmount>0&&(r.value=+(n/o.baseAmount*100).toFixed(2))},{immediate:!0}),S(()=>o.baseAmount,n=>{if(i.value==="percent"){const m=n*(r.value||0)/100;d("update:modelValue",Math.max(0,m))}}),S([r,i],()=>{let n=0;i.value==="amount"?n=r.value||0:n=(r.value||0)/100*o.baseAmount,d("update:modelValue",Math.max(0,n))}),(n,m)=>{const y=c("v-btn"),V=c("v-btn-toggle"),p=c("v-text-field");return $(),E(p,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=f=>r.value=f),hint:v.value,label:e.label,type:"number","persistent-hint":i.value==="percent"},{"append-inner":u(()=>[t(V,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=f=>i.value=f),density:"compact",mandatory:"",divided:"","selected-class":"bg-primary"},{default:u(()=>[t(y,{value:"percent"},{default:u(()=>[...m[2]||(m[2]=[B("%",-1)])]),_:1}),t(y,{value:"amount"},{default:u(()=>[...m[3]||(m[3]=[B("€",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","hint","label","persistent-hint"])}}}),gt=q({__name:"vatCalculatorField",props:{modelValue:{},baseAmount:{}},emits:["update:modelValue"],setup(e,{emit:s}){const{required:o,numeric:d}=le(),{tCap:i}=K(),r=e,a=s,v=L(0),n=V=>{v.value=Number(V)/100},m=R(()=>+(v.value*r.baseAmount).toFixed(2)),y=R(()=>`${m.value} €`);return S(()=>r.modelValue,V=>{v.value=Number(V)||0},{immediate:!0}),S(()=>v.value,V=>{a("update:modelValue",V)}),(V,p)=>{const f=c("v-text-field");return $(),E(f,{"model-value":v.value*100,"onUpdate:modelValue":n,type:"number",min:"0",max:"100",step:"1",suffix:"%",label:l(i)("order.vatRate"),rules:[l(o),l(d)],hint:y.value,"persistent-hint":""},null,8,["model-value","label","rules","hint"])}}}),yt={class:"date-picker-wrapper"},wt={class:"v-label"},xt={class:"date-picker-row"},ht=q({__name:"DatePicker",props:{modelValue:{},title:{}},emits:["update:modelValue"],setup(e,{emit:s}){const{tCap:o}=K(),d=e,i=s,r=L(!1),a=L(d.modelValue);function v(){a.value&&i("update:modelValue",a.value)}const n=R(()=>a.value?new Date(a.value).toLocaleDateString():o("common.noDateSelected"));return(m,y)=>{const V=c("v-btn"),p=c("v-date-picker"),f=c("v-menu");return $(),ae("div",yt,[O("label",wt,A(e.title),1),O("div",xt,[t(f,{modelValue:r.value,"onUpdate:modelValue":y[2]||(y[2]=C=>r.value=C),transition:"scale-transition","offset-y":""},{activator:u(({props:C})=>[t(V,_e(C,{class:"date-btn",variant:"text",ripple:!1,size:"large",text:n.value}),null,16,["text"])]),default:u(()=>[t(p,{modelValue:a.value,"onUpdate:modelValue":[y[0]||(y[0]=C=>a.value=C),v],min:new Date,class:"weekdays-primary","control-variant":"modal",elevation:"1","hide-header":"","show-adjacent-months":"",onInput:y[1]||(y[1]=C=>r.value=!1)},null,8,["modelValue","min"])]),_:1},8,["modelValue"]),t(V,{icon:"mdi-close",color:"red",size:"large",variant:"text",disabled:!a.value,onClick:y[3]||(y[3]=C=>a.value=null),title:"Clear date"},null,8,["disabled"])])])}}}),Ct=Z(ht,[["__scopeId","data-v-42174073"]]),At=q({__name:"AddOrderModal",setup(e){const{maxLength:s,required:o}=le(),{createCreditOrderCommmandHandler:d,partners:i,partnersToItemProps:r}=ue(),{tCap:a}=K(),v=["Credit","Debit"],n=De({direction:"Credit",partnerId:"",vatRate:.24,dueDate:null,notes:"",depositAmount:0,discountAmount:0,items:[]}),{dialog:m,formRef:y,validForm:V,loading:p,errorMessage:f,close:C,reset:M,submit:_}=Ne(n,{autoReset:!1}),U=L([]);function N(){n.items.push(dt({id:Be(),name:"",variations:[]})),Oe(()=>{U.value.push(n.items.length-1)})}const b=R(()=>n.items.reduce((T,g)=>{const I=g.variations?.reduce((j,k)=>j+Object.values(k.sizing).reduce((Q,z)=>Q+z,0),0)??0;return T+I},0)),w=R(()=>n.items.reduce((T,g)=>{const I=g.variations?.reduce((j,k)=>{const Q=Object.values(k.sizing).reduce((z,ne)=>z+ne,0);return j+Q*k.price},0)??0;return T+I},0)),D=R(()=>w.value*n.vatRate),x=R(()=>w.value+D.value),F=R(()=>x.value-n.discountAmount),P=R(()=>F.value-n.depositAmount);function ee(T){const g=n.items.findIndex(I=>I.id===T);g!=-1&&n.items.splice(g,1)}async function te(){await _(async T=>{T.direction==="Credit"&&(pe(T),d.handle(pe(T))),M()})}return(T,g)=>{const I=c("v-btn"),j=c("v-autocomplete"),k=c("v-col"),Q=c("v-select"),z=c("v-row"),ne=c("v-expansion-panels"),Ve=c("v-textarea"),ge=c("v-alert"),ye=c("v-container"),we=c("v-form"),xe=c("v-card-text"),he=c("v-spacer"),Ce=c("v-card-actions"),Ae=c("v-card"),ke=c("v-dialog");return $(),E(ke,{modelValue:l(m),"onUpdate:modelValue":g[9]||(g[9]=h=>me(m)?m.value=h:null),"max-width":"1500"},{activator:u(({props:h})=>[t(I,_e(h,{color:"surface-variant",text:l(a)("order.addOrderTitle"),"prepend-icon":"mdi-plus",variant:"flat"}),null,16,["text"])]),default:u(()=>[t(Ae,{title:l(a)("order.addOrderTitle")},{default:u(()=>[t(xe,null,{default:u(()=>[t(we,{ref_key:"formRef",ref:y,modelValue:l(V),"onUpdate:modelValue":g[8]||(g[8]=h=>me(V)?V.value=h:null)},{default:u(()=>[t(ye,{fluid:""},{default:u(()=>[t(z,{dense:""},{default:u(()=>[t(k,{cols:"6"},{default:u(()=>[t(j,{modelValue:n.partnerId,"onUpdate:modelValue":g[0]||(g[0]=h=>n.partnerId=h),"item-props":l(r),label:l(a)("partner.partner"),items:l(i),rules:[l(o)]},null,8,["modelValue","item-props","label","items","rules"])]),_:1}),t(k,{cols:"6"},{default:u(()=>[t(Q,{modelValue:n.direction,"onUpdate:modelValue":g[1]||(g[1]=h=>n.direction=h),label:l(a)("order.direction"),items:v,rules:[l(o)]},null,8,["modelValue","label","rules"])]),_:1}),t(k,{cols:"6"},{default:u(()=>[t(Ct,{modelValue:n.dueDate,"onUpdate:modelValue":g[2]||(g[2]=h=>n.dueDate=h),title:l(a)("order.dueDate")},null,8,["modelValue","title"])]),_:1}),t(k,{cols:"12",class:"d-flex justify-space-between align-center mb-4"},{default:u(()=>[O("h3",null,A(l(a)("order.items")),1),t(I,{color:"indigo",text:l(a)("order.addOrderItemTitle"),"prepend-icon":"mdi-plus",variant:"text",onClick:N},null,8,["text"])]),_:1})]),_:1}),t(z,{dense:""},{default:u(()=>[t(ne,{modelValue:U.value,"onUpdate:modelValue":g[3]||(g[3]=h=>U.value=h),multiple:""},{default:u(()=>[($(!0),ae(Ie,null,Te(n.items,(h,ie)=>($(),E(rt,{key:h.id,modelValue:n.items[ie],"onUpdate:modelValue":re=>n.items[ie]=re,onRemoveItem:re=>ee(h.id)},null,8,["modelValue","onUpdate:modelValue","onRemoveItem"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(z,{class:"mb-4",justify:"end",align:"center"},{default:u(()=>[t(k,{cols:"auto"},{default:u(()=>[B(A(l(a)("order.orderQuantity"))+": ",1),O("strong",null,A(b.value),1)]),_:1}),t(k,{cols:"auto"},{default:u(()=>[B(A(l(a)("order.orderSum"))+" ",1),O("strong",null,A(w.value.toFixed(2))+"€",1)]),_:1})]),_:1}),t(z,null,{default:u(()=>[t(k,{cols:"6"},{default:u(()=>[t(Ve,{modelValue:n.notes,"onUpdate:modelValue":g[4]||(g[4]=h=>n.notes=h),label:l(a)("order.notes"),rules:[l(s)(1e3)],rows:"4",counter:"1000"},null,8,["modelValue","label","rules"])]),_:1}),t(k,{dense:"",cols:"6"},{default:u(()=>[t(z,{class:"mb-4",justify:"end",align:"center"},{default:u(()=>[t(k,{cols:"6"},{default:u(()=>[t(gt,{modelValue:n.vatRate,"onUpdate:modelValue":g[5]||(g[5]=h=>n.vatRate=h),"base-amount":w.value},null,8,["modelValue","base-amount"])]),_:1}),t(k,{cols:"4"},{default:u(()=>[B(A(l(a)("order.amountAfterTax"))+" ",1),O("strong",null,A(x.value.toFixed(2))+"€",1)]),_:1})]),_:1}),t(z,{class:"mb-4",justify:"end",align:"center"},{default:u(()=>[t(k,{cols:"6"},{default:u(()=>[t(fe,{modelValue:n.discountAmount,"onUpdate:modelValue":g[6]||(g[6]=h=>n.discountAmount=h),"base-amount":x.value,label:l(a)("order.discount")},null,8,["modelValue","base-amount","label"])]),_:1}),t(k,{cols:"4"},{default:u(()=>[B(A(l(a)("order.total"))+": ",1),O("strong",null,A(F.value.toFixed(2))+"€",1)]),_:1})]),_:1}),t(z,{class:"mb-4",justify:"end",align:"center"},{default:u(()=>[t(k,{cols:"6"},{default:u(()=>[t(fe,{modelValue:n.depositAmount,"onUpdate:modelValue":g[7]||(g[7]=h=>n.depositAmount=h),"base-amount":F.value,label:l(a)("order.deposit")},null,8,["modelValue","base-amount","label"])]),_:1}),t(k,{cols:"4"},{default:u(()=>[B(A(l(a)("order.remainingAmount"))+": ",1),O("strong",null,A(P.value.toFixed(2))+"€",1)]),_:1})]),_:1})]),_:1})]),_:1}),l(f)?($(),E(ge,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:u(()=>[B(A(l(f)),1)]),_:1})):G("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(Ce,null,{default:u(()=>[t(I,{variant:"tonal",color:"warning",text:l(a)("common.clear"),onClick:l(M)},null,8,["text","onClick"]),t(he),t(I,{variant:"tonal",color:"indigo",text:l(a)("common.save"),loading:l(p),disabled:!l(V)||l(p),onClick:te},null,8,["text","loading","disabled"]),t(I,{text:l(a)("common.cancel"),color:"red",disabled:l(p),onClick:l(C)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}}),kt=Z(At,[["__scopeId","data-v-6964332f"]]),$t={class:"d-flex justify-space-between align-center mb-4"},Rt={class:"text-h6"},Tt=q({__name:"OrdersView",setup(e){const{allOrders:s}=ue(),{tCap:o}=K();return(d,i)=>{const r=c("v-card"),a=c("v-container");return $(),E(a,{class:"py-6"},{default:u(()=>[t(r,{class:"pa-4"},{default:u(()=>[O("div",$t,[O("h2",Rt,A(l(o)("order.order",2)),1),t(kt)]),t(Ze,{orders:l(s)},null,8,["orders"])]),_:1})]),_:1})}}});export{Tt as default};

import{a5 as x,ar as p,as as l,ab as D,af as R,at as v,g as y,C as d,d as C,m as h,l as g,u as c,q as w,y as O,z as _,o as M}from"./index-bd2o7H6g.js";var i=(e=>(e.Card="Card",e.Bank="Bank",e.Cash="Cash",e.Online="Online",e.Cheque="Cheque",e))(i||{}),o=(e=>(e.In="In",e.Out="Out",e))(o||{}),m=(e=>(e.CustomerPayment="CustomerPayment",e.CustomerRefund="CustomerRefund",e.SupplierPayment="SupplierPayment",e.SupplierRefund="SupplierRefund",e.Adjustment="Adjustment",e))(m||{});class L{static createPaymentFromOrder(t,r,a,n,u){return t===x.Sales?this.customerPayment(a,r,n,u):this.supplierPayment(a,r,n,u)}static customerPayment(t,r,a,n){return new p(l(),t,r,a,n,o.In,m.CustomerPayment)}static supplierPayment(t,r,a,n){return new p(l(),t,r,a,n,o.Out,m.SupplierPayment)}static customerRefund(t,r,a,n){return new p(l(),t,r,a,n,o.Out,m.CustomerRefund)}}class E{static async getNext(t){const r=new Date().getFullYear()%100,a=await D.load(),n=await R.getById(t);if(!n)throw new Error(`Partner with id:${t} doesn't exist`);const u=a.filter(s=>s.partnerId===t);if(u.length===0)return v.create(r,n.clientNumber,1);const f=u.map(s=>s.sequence).filter(s=>s.year===r).sort((s,k)=>s.format().localeCompare(k.format())).at(-1);if(!f)throw new Error("Error finding the sequence");return v.create(r,n.clientNumber,f.value+1)}}function F(){const{tCap:e}=y();return{paymentMethodTypes:d(()=>q(e)),moneyDirectionTypes:d(()=>B(e)),movementReasonTypes:d(()=>N(e))}}function q(e){return Object.values(i).map(t=>({title:S(t,e),value:t,icon:P(t)}))}function S(e,t){return t(`moneyMovement.${e.toLowerCase()}`)}function P(e){switch(e){case i.Card:return"mdi-credit-card";case i.Bank:return"mdi-bank";case i.Cash:return"mdi-cash";case i.Online:return"mdi-web";case i.Cheque:return"mdi-checkbook"}}function B(e){return Object.values(o).map(t=>({title:I(t,e),value:t,icon:b(t)}))}function I(e,t){return t(`moneyMovement.${e.toLowerCase()}`)}function b(e){switch(e){case o.In:return"mdi-import";case o.Out:return"mdi-export"}}function j(e){switch(e){case o.In:return"green";case o.Out:return"red"}}function N(e){return Object.values(m).map(t=>({title:T(t,e),value:t}))}function T(e,t){return t(`moneyMovement.${e.toLowerCase()}`)}const Y=C({__name:"PaymentMethodChip",props:{method:{}},setup(e){const{tCap:t}=y();return(r,a)=>{const n=g("v-chip");return M(),h(n,{variant:"outlined",color:"indigo","prepend-icon":c(P)(e.method)},{default:w(()=>[O(_(c(S)(e.method,c(t))),1)]),_:1},8,["prepend-icon"])}}}),z=C({__name:"MovementReasonChip",props:{reason:{},direction:{}},setup(e){const{tCap:t}=y();return(r,a)=>{const n=g("v-chip");return M(),h(n,{variant:"outlined",color:c(j)(e.direction),"prepend-icon":c(b)(e.direction)},{default:w(()=>[O(_(c(T)(e.reason,c(t))),1)]),_:1},8,["color","prepend-icon"])}}});export{o as M,z as _,E as a,L as b,Y as c,m as d,F as u};

import{g as C,C as y,S as N,D as T,E as w,d as $,F as A,G as H,l as f,m as l,o as i,u as o,q as s,e as d,x as S,H as V,y as D,z as L,B as p,c as z,I as E,J as F}from"./index-1Y8v8_c6.js";import{g as I,u as q}from"./useDeliveryCarrierDetails-Bv3slwn5.js";import{_ as G}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-eQc7x-an.js";import{_ as J}from"./EditPartnerModal.vue_vue_type_script_setup_true_lang-uV5IhqE_.js";import{a as M,b as R}from"./AddressLink.vue_vue_type_script_setup_true_lang-Cg41zIPL.js";function j(e){return e.find(t=>t.isPrimary)}function K(e){return e.filter(t=>t.type===w.Phone).sort((t,n)=>Number(n.isPrimary)-Number(t.isPrimary)).slice(0,3)}function m(e){const t=K(e.phones),n=j(e.addresses);return{id:e.id,type:e.type,name:e.businessName?`${e.businessName} (${e.contactName})`:e.contactName,city:n?.city,address:n,phones:t,rowType:"partner",value:e}}function O(e){return{...m(e),activity:e.activity,rowType:"supplier"}}function Q(e){return{...m(e),deliveryCarrier:I(e.deliveryCarrierId),rowType:"b2b"}}function U(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function W(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.activity"),key:"activity",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function X(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("deliveryCarrier.carrier"),key:"deliveryCarrier",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function g(e){return Array.isArray(e)&&e.every(t=>t instanceof N)}function _(e){return Array.isArray(e)&&e.every(t=>t instanceof T)}function Y(e){const{tCap:t}=C(),n=y(()=>{const a=e.value??[];return g(a)?a.map(O):_(a)?a.map(Q):a.map(m)}),c=y(()=>{const a=e.value??[];return g(a)?W(t):_(a)?X(t):U(t)});return{data:n,headers:c}}const Z={class:"d-flex flex-column gap-1"},ee={class:"d-flex flex-column gap-1"},ie=$({__name:"PartnerList",props:{partners:{}},setup(e){const{deletePartnerCommandHandler:t}=q(),n=A(),c=e;function a(k,u){n.push(`/partner/${u.item.id}`)}const{data:v,headers:h}=Y(H(c,"partners"));return(k,u)=>{const b=f("v-btn"),x=f("v-data-table");return i(),l(x,{headers:o(h),items:o(v),class:"text-start","hide-default-footer":"",density:"comfortable",hover:"","onClick:row":a},{"item.phones":s(({item:r})=>[p("div",Z,[(i(!0),z(F,null,E(r.phones,(B,P)=>(i(),l(R,{key:P,class:"d-flex align-center",phone:B},null,8,["phone"]))),128))])]),"item.address":s(({item:r})=>[p("div",ee,[d(M,{class:"d-flex align-center",address:r.address,format:"street"},null,8,["address"])])]),"item.deliveryCarrier":s(({item:r})=>[r.rowType==="b2b"&&r.deliveryCarrier!==void 0?(i(),l(b,{key:0,variant:"text",onClick:V(()=>o(n).push(`/carrier/${r.deliveryCarrier?.id}`),["stop"])},{default:s(()=>[D(L(r.deliveryCarrier.name),1)]),_:2},1032,["onClick"])):S("",!0)]),"item.actions":s(({item:r})=>[d(J,{partner:r.value,mini:!0},null,8,["partner"]),d(G,{name:r.name,"action-fn":()=>o(t).handle({id:r.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}});export{ie as _};

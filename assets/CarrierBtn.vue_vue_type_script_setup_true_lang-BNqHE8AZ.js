import{P,d as R,f as Z,g as h,j as ee,k as ae,w as te,C as U,m as d,l as o,u as e,p as I,q as r,e as l,x as c,y as S,z as L,A as $,o as m,J as ne,F as re}from"./index-CTkL5rO_.js";import{u as le}from"./usePartners-DkYBAhcM.js";import{u as oe,_ as se}from"./AddressLink.vue_vue_type_script_setup_true_lang-DoNMo5pr.js";function ie(i){return i.type===P.Supplier}function ue(i){return i.type===P.B2BCustomer}const pe=R({__name:"EditPartnerModal",props:{partner:{},mini:{type:Boolean}},setup(i){const{maxLength:f,required:N,rangeLength:y}=Z(),{editSupplierCommandHandler:g,editB2BCustomerCommandHandler:D}=le(),{carriers:F}=oe(),{tCap:p,t:H}=h(),u=i,a=ee({businessName:"",contactName:"",activity:"",deliveryCarrierId:""});function M(s){return{title:s.name,value:s.id,subtitle:s.primaryLocation?.value??""}}const{dialog:V,formRef:q,validForm:C,loading:B,errorMessage:w,close:z,submit:T}=ae(a);te(V,s=>{s&&u.partner&&(a.businessName=u.partner.businessName??"",a.contactName=u.partner.contactName??"",v.value&&(a.activity=v.value.activity??""),_.value&&(a.deliveryCarrierId=_.value.deliveryCarrierId??""))});const v=U(()=>u.partner&&ie(u.partner)?u.partner:void 0),_=U(()=>u.partner&&ue(u.partner)?u.partner:void 0);async function j(){await T(async s=>{v.value?g.handle({id:u.partner?.id??"",contactName:s.contactName,activity:s.activity,businessName:s.businessName}):_.value&&D.handle({id:u.partner?.id??"",contactName:s.contactName,businessName:s.businessName,deliveryCarrierId:s.deliveryCarrierId})})}return(s,n)=>{const x=o("v-btn"),b=o("v-text-field"),k=o("v-col"),A=o("v-autocomplete"),E=o("v-row"),J=o("v-alert"),G=o("v-container"),K=o("v-form"),O=o("v-card-text"),Q=o("v-spacer"),W=o("v-card-actions"),X=o("v-card"),Y=o("v-dialog");return m(),d(Y,{modelValue:e(V),"onUpdate:modelValue":n[7]||(n[7]=t=>I(V)?V.value=t:null),"max-width":"500"},{activator:r(({props:t})=>[i.mini?c("",!0):(m(),d(x,$({key:0},t,{color:"surface-variant",text:`${e(p)("common.edit")} ${e(H)("partner.partner")}`,"prepend-icon":"mdi-pencil",variant:"flat"}),null,16,["text"])),i.mini?(m(),d(x,$({key:1},t,{color:"surface-variant",icon:"mdi-pencil",variant:"text",density:"compact"}),null,16)):c("",!0)]),default:r(()=>[l(X,{title:`${e(p)("common.edit")} ${a.businessName}`},{default:r(()=>[l(O,null,{default:r(()=>[l(K,{ref_key:"formRef",ref:q,modelValue:e(C),"onUpdate:modelValue":n[6]||(n[6]=t=>I(C)?C.value=t:null)},{default:r(()=>[l(G,{class:"pa-0",fluid:""},{default:r(()=>[l(E,{dense:""},{default:r(()=>[l(k,{cols:"12"},{default:r(()=>[v.value?(m(),d(b,{key:0,modelValue:a.contactName,"onUpdate:modelValue":n[0]||(n[0]=t=>a.contactName=t),label:e(p)("partner.contactName"),rules:[e(N),e(y)(3,50)]},null,8,["modelValue","label","rules"])):c("",!0),_.value?(m(),d(b,{key:1,modelValue:a.contactName,"onUpdate:modelValue":n[1]||(n[1]=t=>a.contactName=t),label:e(p)("partner.contactName"),rules:[e(y)(3,50)]},null,8,["modelValue","label","rules"])):c("",!0)]),_:1}),l(k,{cols:"12"},{default:r(()=>[_.value?(m(),d(b,{key:0,modelValue:a.businessName,"onUpdate:modelValue":n[2]||(n[2]=t=>a.businessName=t),label:e(p)("partner.businessName"),rules:[e(N),e(f)(50)]},null,8,["modelValue","label","rules"])):c("",!0),v.value?(m(),d(b,{key:1,modelValue:a.businessName,"onUpdate:modelValue":n[3]||(n[3]=t=>a.businessName=t),label:e(p)("partner.businessName"),rules:[e(f)(50)]},null,8,["modelValue","label","rules"])):c("",!0)]),_:1}),v.value?(m(),d(k,{key:0,cols:"12"},{default:r(()=>[l(b,{modelValue:a.activity,"onUpdate:modelValue":n[4]||(n[4]=t=>a.activity=t),label:e(p)("partner.activity"),rules:[e(N),e(f)(50)]},null,8,["modelValue","label","rules"])]),_:1})):c("",!0),_.value?(m(),d(k,{key:1,cols:"12"},{default:r(()=>[l(A,{modelValue:a.deliveryCarrierId,"onUpdate:modelValue":n[5]||(n[5]=t=>a.deliveryCarrierId=t),"item-props":M,label:"Carrier",items:e(F)},{"append-inner":r(()=>[l(se,{mini:""})]),_:1},8,["modelValue","items"])]),_:1})):c("",!0)]),_:1}),e(w)?(m(),d(J,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:r(()=>[S(L(e(w)),1)]),_:1})):c("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(W,null,{default:r(()=>[l(Q),l(x,{variant:"tonal",color:"indigo",text:e(p)("common.save"),loading:e(B),disabled:!e(C)||e(B),onClick:j},null,8,["text","loading","disabled"]),l(x,{text:e(p)("common.cancel"),color:"red",disabled:e(B),onClick:e(z)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}}),ve=R({__name:"CarrierBtn",props:{carrier:{}},setup(i){const f=re();return(N,y)=>{const g=o("v-btn");return i.carrier?(m(),d(g,{key:0,variant:"text",onClick:y[0]||(y[0]=ne(()=>e(f).push(`/carrier/${i.carrier?.id}`),["stop"]))},{default:r(()=>[S(L(i.carrier.name),1)]),_:1})):c("",!0)}}});export{pe as _,ve as a,ue as b,ie as i};

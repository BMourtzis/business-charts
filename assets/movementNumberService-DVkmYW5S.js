import{M as o,b as i}from"./MovementReasonChip.vue_vue_type_script_setup_true_lang-BsDfde0g.js";import{a5 as p,ar as m,as as c,ab as M,af as w,at as l}from"./index-GJmNcSpu.js";class d{static createPaymentFromOrder(r,e,a,t,s){return r===p.Sales?this.customerPayment(a,e,t,s):this.supplierPayment(a,e,t,s)}static customerPayment(r,e,a,t){return new m(c(),r,e,a,t,o.In,i.CustomerPayment)}static supplierPayment(r,e,a,t){return new m(c(),r,e,a,t,o.Out,i.SupplierPayment)}static customerRefund(r,e,a,t){return new m(c(),r,e,a,t,o.Out,i.CustomerRefund)}}class g{static async getNext(r){const e=new Date().getFullYear()%100,a=await M.load(),t=await w.getById(r);if(!t)throw new Error(`Partner with id:${r} doesn't exist`);const s=a.filter(n=>n.partnerId===r);if(s.length===0)return l.create(e,t.clientNumber,1);const u=s.map(n=>n.sequence).filter(n=>n.year===e).sort((n,f)=>n.format().localeCompare(f.format())).at(-1);if(!u)throw new Error("Error finding the sequence");return l.create(e,t.clientNumber,u.value+1)}}export{g as M,d as a};

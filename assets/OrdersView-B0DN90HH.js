import{g as F,C as $,d as q,G as Ue,m as E,l as c,u as o,q as l,e as t,x as J,H as G,y as B,z as C,F as Ee,o as R,a3 as Z,c as le,a4 as de,r as M,_ as X,w as P,a5 as Te,a6 as me,f as ue,t as ae,B as O,a7 as De,A as be,j as Ne,k as Ie,p as ce,I as Be,J as Oe,a8 as qe,n as je}from"./index-DLPsEI6P.js";import{_ as ze}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DBflF40U.js";import{n as K,u as se,_ as Le,a as Me,b as ee,T as Se,N as W,i as Ke,g as Ve,c as Pe,B as Fe,r as Qe,t as He,d as Ge,e as Je,s as ve,f as Y}from"./useVariationTableMapper-BwvUWhRO.js";import{g as We}from"./usePartnerDetails-DVJLeuBh.js";function Ye(e,i){return{id:e.id,orderNumber:Ze(e.orderNumber),partner:We(e.partnerId),createdDate:pe(e.createdDate),dueDate:pe(e.dueDate),status:e.status,direction:e.direction,total:K(e.totalAmount)}}function Ze(e){return`#${e}`}function pe(e){return e?e.toLocaleDateString():"-"}function Xe(e){return[{title:e("order.number"),key:"orderNumber",align:"start"},{title:e("partner.businessName"),key:"partner",align:"start"},{title:e("order.createdDate"),key:"createdDate",align:"start"},{title:e("order.dueDate"),key:"dueDate",align:"start"},{title:e("order.status"),key:"status",align:"start"},{title:e("order.direction"),key:"direction",align:"start"},{title:e("order.total"),key:"total",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function et(e){const{tCap:i}=F(),a=$(()=>(e.value??[]).map(r=>Ye(r))),d=$(()=>Xe(i));return{data:a,headers:d}}const tt=q({__name:"OrderList",props:{orders:{}},setup(e){const i=Ee(),a=e,{deleteOrderCommmandHandler:d}=se(),{data:u,headers:r}=et(Ue(a,"orders"));function s(m){return m.partner?`παραγγελία για ${v(m.partner)}`:m.id}function v(m){return m.businessName?`${m.businessName} (${m.contactName})`:m.contactName}function n(m,y){i.push(`/order/${y.item.id}`)}return(m,y)=>{const V=c("v-btn"),p=c("v-data-table");return R(),E(p,{headers:o(r),items:o(u),class:"text-start","hide-default-footer":"",density:"comfortable","items-per-page":-1,hover:"","onClick:row":n},{"item.partner":l(({item:f})=>[f.partner!==void 0?(R(),E(V,{key:0,variant:"text",onClick:G(()=>o(i).push(`/partner/${f.partner?.id}`),["stop"])},{default:l(()=>[B(C(v(f.partner)),1)]),_:2},1032,["onClick"])):J("",!0)]),"item.status":l(({item:f})=>[t(Me,{status:f.status},null,8,["status"])]),"item.direction":l(({item:f})=>[t(Le,{direction:f.direction},null,8,["direction"])]),"item.actions":l(({item:f})=>[t(ze,{name:s(f),"action-fn":()=>o(d).handle({id:f.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}}),ge=q({__name:"TextEditor",props:{modelValue:{},width:{}},emits:["update:modelValue","blur","navigate"],setup(e,{emit:i}){const a=i,{onKeydown:d}=ee(a);return(u,r)=>{const s=c("v-text-field");return R(),E(s,{"model-value":e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=v=>u.$emit("update:modelValue",v)),density:"compact",variant:"underlined","hide-details":"",autofocus:"",onBlur:r[1]||(r[1]=v=>u.$emit("blur")),onKeydown:o(d),style:Z({width:e.width||"1vw"})},null,8,["model-value","onKeydown","style"])}}}),nt=q({__name:"EditableCell",props:{modelValue:{},focused:{type:Boolean},hasEditor:{type:Boolean},width:{}},emits:["update:modelValue","request-edit","request-close","request-move-cell","request-move-row"],setup(e,{emit:i}){const a=e,d=i,u=$({get:()=>a.modelValue,set:p=>r(p)});function r(p){d("update:modelValue",p)}function s(){!a.focused&&a.hasEditor&&d("request-edit")}function v(p,f){return f?p:!1}function n(p){switch(p){case W.Up:y(-1);break;case W.Down:y(1);break;case W.Left:m(-1);break;case W.Right:m(1);break}}function m(p){d("request-move-cell",p)}function y(p){d("request-move-row",p)}function V(p){p?.preventDefault(),d("request-close")}return(p,f)=>(R(),le("td",{onClick:G(s,["stop"])},[v(e.focused,e.hasEditor)?de(p.$slots,"editor",{key:0,value:u.value,width:e.width,onUpdate:r,onBlur:V,onNavigate:n,onKeydown:f[0]||(f[0]=G(()=>{},["stop"]))},()=>[t(ge,{"model-value":u.value,width:e.width,"onUpdate:modelValue":r,onBlur:V,onNavigate:n},null,8,["model-value","width"])]):J("",!0),v(e.focused,e.hasEditor)?J("",!0):de(p.$slots,"display",{key:1,value:u.value,width:e.width,focused:e.focused,onUpdate:r,onBlur:V,onNavigate:n,onKeydown:f[1]||(f[1]=G(()=>{},["stop"]))},()=>[t(Se,{modelValue:u.value,width:e.width},null,8,["modelValue","width"])])]))}});function ot(e,i,a){function d(_){return _.row*i.length+_.column}const u=M(null);function r(_,U){u.value=d({row:_,column:U})}function s(){u.value=null,a()}function v(_){u.value!==null&&m(u.value,_)}function n(_){u.value!==null&&m(u.value,k(_))}function m(_,U){let D=_+U;const b=y(U);for(;f(D);){if(V(D)){u.value=D,a();return}D+=b}}function y(_){return _<0?-1:1}function V(_){return p(_)?.navigable}function p(_){const U=_%i.length;return i.find(D=>D.order===U)}function f(_){return!(_<0||_>=e.value.length*i.length)}function k(_){return _*i.length}function L(_,U){return k(_)+U===u.value}return{startEditingCell:r,isCellFocused:L,stopEditingCell:s,moveEditingCellByCell:v,moveEditingCellByRow:n}}const at=q({__name:"AutocompleteEditor",props:{modelValue:{},items:{},width:{}},emits:["update:modelValue","blur","navigate"],setup(e,{emit:i}){const a=i,{onKeydown:d}=ee(a);return(u,r)=>{const s=c("v-autocomplete");return R(),E(s,{class:"autocomplete-editor","model-value":e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=v=>u.$emit("update:modelValue",v)),items:e.items,density:"compact","hide-details":"",autofocus:"",onBlur:r[1]||(r[1]=v=>u.$emit("blur")),onKeydown:o(d),style:Z({width:e.width||"5vw"})},null,8,["model-value","items","onKeydown","style"])}}}),lt=X(at,[["__scopeId","data-v-85bbdfb4"]]),ut=q({__name:"NumberEditor",props:{modelValue:{},width:{}},emits:["update:modelValue","blur","navigate"],setup(e,{emit:i}){const a=i,{onKeydown:d}=ee(a);return(u,r)=>{const s=c("v-text-field");return R(),E(s,{class:"number-editor","model-value":e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=v=>u.$emit("update:modelValue",v)),density:"compact",variant:"underlined","hide-details":"",autofocus:"",type:"text",inputmode:"numeric",pattern:"[0-9]*",onBlur:r[1]||(r[1]=v=>u.$emit("blur")),onKeydown:o(d),style:Z({width:e.width||"1vw"})},null,8,["model-value","onKeydown","style"])}}}),st=q({__name:"PriceEditor",props:{modelValue:{},width:{}},emits:["update:modelValue","blur","navigate"],setup(e,{emit:i}){const a=e,d=i,u=$(()=>Ke(a.modelValue)),{onKeydown:r}=ee(d);return(s,v)=>{const n=c("v-text-field");return R(),E(n,{class:"price-editor","model-value":u.value,"onUpdate:modelValue":v[0]||(v[0]=m=>s.$emit("update:modelValue",o(Pe)(m))),density:"compact",variant:"underlined","hide-details":"",autofocus:"",type:"text",inputmode:"decimal",onBlur:v[1]||(v[1]=m=>s.$emit("blur")),onKeydown:o(r),suffix:o(Ve)(),style:Z({width:e.width||"2vw"})},null,8,["model-value","onKeydown","suffix","style"])}}}),rt={autocomplete:lt,number:ut,price:st,text:ge},it=q({__name:"EditableTable",props:{modelValue:{},tableColumns:{},hideRowIndex:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:i}){const a=e,d=i,u=M([]),{startEditingCell:r,isCellFocused:s,stopEditingCell:v,moveEditingCellByCell:n,moveEditingCellByRow:m}=ot(u,a.tableColumns,V);P(()=>a.modelValue,k=>{u.value=Ge(k)},{immediate:!0,deep:!0});function y(k,L,_){return L.calculate?L.calculate(k):_}function V(){d("update:modelValue",He(u.value))}function p(k){return a.tableColumns[k].editorType!==void 0}function f(k){v(),u.value.splice(k,1),V()}return(k,L)=>{const _=c("v-btn");return R(),E(Fe,{"table-columns":e.tableColumns,modelValue:u.value,"hide-row-index":e.hideRowIndex},{cell:l(({row:U,rowIndex:D,column:b,colIndex:w,cell:T})=>[t(nt,{modelValue:T.value,"onUpdate:modelValue":x=>T.value=x,focused:o(s)(D,w),hasEditor:p(w),width:b.width,onRequestEdit:x=>o(r)(D,w),onRequestClose:o(v),onRequestMoveCell:o(n),onRequestMoveRow:o(m)},Te({_:2},[b.editorType?{name:"editor",fn:l(x=>[(R(),E(me(o(rt)[b.editorType]),{"model-value":x.value,"onUpdate:modelValue":x.onUpdate,width:x.width,items:b.list,onBlur:x.onBlur,onNavigate:x.onNavigate},null,40,["model-value","onUpdate:modelValue","width","items","onBlur","onNavigate"]))]),key:"0"}:void 0,b.rendererType?{name:"display",fn:l(x=>[(R(),E(me(o(Qe)[b.rendererType]),{"model-value":y(U,b,x.value),width:x.width,focused:x.focused,"onUpdate:modelValue":x.onUpdate,onBlur:x.onBlur,onNavigate:x.onNavigate},null,40,["model-value","width","focused","onUpdate:modelValue","onBlur","onNavigate"]))]),key:"1"}:void 0]),1032,["modelValue","onUpdate:modelValue","focused","hasEditor","width","onRequestEdit","onRequestClose","onRequestMoveCell","onRequestMoveRow"])]),actions:l(({row:U,rowIndex:D})=>[t(_,{icon:"mdi-close",variant:"text",color:"error",onClick:b=>f(D)},null,8,["onClick"])]),_:1},8,["table-columns","modelValue","hide-row-index"])}}}),dt=X(it,[["__scopeId","data-v-2c4e5e7f"]]),mt=q({__name:"OrderItemEdit",props:{modelValue:{}},emits:["update:modelValue","remove-item"],setup(e,{emit:i}){const{tCap:a}=F(),{maxLength:d,required:u,numeric:r}=ue(),s=e,v=i,n=M(structuredClone(ae(s.modelValue)));P(()=>s.modelValue,b=>{n.value=structuredClone(ae(b))},{deep:!0});function m(){v("update:modelValue",structuredClone(ae(n.value)))}const{vmToRows:y,rowsToVm:V}=Je(Y),p=$({get:()=>y(n.value.variations),set:b=>{n.value.variations=V(b),m()}}),f=$(()=>{const b=n.value.variations.reduce((w,T)=>{const x=Object.values(T.attributes).filter(S=>S).join(" ");return w?w+", "+x:x},"");return b?`(${b})`:""}),k=$(()=>n.value.variations.length),L=$(()=>n.value.variations.reduce((b,w)=>b+ve(w),0)),_=$(()=>n.value.variations.reduce((b,w)=>b+ve(w)*w.price,0));function U(){n.value.variations.push({attributes:Object.fromEntries(Y.slice(0,2).map(b=>[b.name,""])),sizing:Object.fromEntries(Y.filter(b=>b.name.includes("shoe:")).map(b=>[b.name,0])),price:n.value.basePrice}),m()}function D(b){v("remove-item",n.value.id)}return(b,w)=>{const T=c("v-col"),x=c("v-spacer"),S=c("v-btn"),Q=c("v-row"),te=c("v-fade-transition"),ne=c("v-expansion-panel-title"),N=c("v-text-field"),g=c("v-expansion-panel-text"),I=c("v-expansion-panel");return R(),E(I,null,{default:l(()=>[t(ne,{"hide-actions":""},{default:l(({expanded:j})=>[t(Q,{"no-gutters":""},{default:l(()=>[t(T,{class:"d-flex justify-start",cols:"4"},{default:l(()=>[B(C(n.value.name||"no name")+" "+C(f.value),1)]),_:1}),t(T,{class:"text--secondary",cols:"8"},{default:l(()=>[t(te,{"leave-absolute":""},{default:l(()=>[t(Q,{style:{width:"100%"},"no-gutters":""},{default:l(()=>[t(x),t(T,{cols:"3"},{default:l(()=>[B(C(o(a)("order.variation",2))+": ",1),O("strong",null,C(k.value),1)]),_:1}),t(T,{cols:"3"},{default:l(()=>[B(C(o(a)("order.productQuantity"))+": ",1),O("strong",null,C(L.value),1)]),_:1}),t(T,{cols:"3"},{default:l(()=>[B(C(o(a)("order.productSum"))+": ",1),O("strong",null,C(o(K)(_.value)),1)]),_:1}),t(T,{cols:"1"},{default:l(()=>[t(S,{size:"medium",icon:"mdi-trash-can",color:"error",variant:"text",onClick:w[0]||(w[0]=G(A=>D(n.value.id),["stop"]))})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(Q,{justify:"space-around","no-gutters":""},{default:l(()=>[t(T,{cols:"6"},{default:l(()=>[t(N,{modelValue:n.value.name,"onUpdate:modelValue":w[1]||(w[1]=j=>n.value.name=j),onBlur:m,label:o(a)("order.product"),rules:[o(u),o(d)(50)]},null,8,["modelValue","label","rules"])]),_:1}),t(T,{cols:"2"},{default:l(()=>[t(N,{modelValue:n.value.basePrice,"onUpdate:modelValue":w[2]||(w[2]=j=>n.value.basePrice=j),onBlur:m,label:o(a)("order.basePrice"),rules:[o(r)],type:"number",min:"0",step:"0.01",suffix:"€"},null,8,["modelValue","label","rules"])]),_:1}),t(T,{cols:"2"},{default:l(()=>[t(S,{color:"success",text:o(a)("order.addVariationTitle"),"prepend-icon":"mdi-plus",variant:"text",onClick:U},null,8,["text"])]),_:1})]),_:1}),p.value.length>0?(R(),E(dt,{key:0,modelValue:p.value,"onUpdate:modelValue":w[3]||(w[3]=j=>p.value=j),tableColumns:o(Y)},null,8,["modelValue","tableColumns"])):J("",!0)]),_:1})]),_:1})}}}),ct=["shoe:38","shoe:39","shoe:40","shoe:41","shoe:42","shoe:43","shoe:44","shoe:45","shoe:46","shoe:47"];function vt(e){return{id:e.id,name:e.name,basePrice:e.variations?.[0]?.price||0,variations:e.variations.map(pt)}}function pt(e){const i={},a={};for(const[d,u]of Object.entries(e.attributes))ct.includes(d)?a[d]=Number(u)||0:i[d]=String(u);return Object.keys(a).length===0&&e.quantity>0,{attributes:i,sizing:a,price:e.price}}function fe(e){return{partnerId:e.partnerId,vatRate:e.vatRate,dueDate:e.dueDate||void 0,notes:e.notes,depositAmount:e.depositAmount,discountAmount:e.discountAmount,items:ft(e.items)}}function ft(e){return e.map(i=>({name:i.name,variations:_t(i.variations)}))}function _t(e){const i=e.flatMap(a=>Vt(a));return bt(i).sort((a,d)=>a.normalizedAttributes.localeCompare(d.normalizedAttributes))}function bt(e){const i=new Map;for(const a of e){const d=a.normalizedAttributes,u=i.get(d);u?u.quantity+=a.quantity:i.set(d,{...a})}return[...i.values()]}function Vt(e,i){const a=gt(e.sizing),d=yt(e.attributes);return a.map(([u,r])=>{const s={...d,size:u};return{attributes:s,normalizedAttributes:De(s),quantity:r,price:e.price}})}function gt(e){return Object.entries(e).filter(([i,a])=>a>0).map(([i,a])=>[i.split(":")[1],a])}function yt(e,i){return{...wt(e)}}function wt(e){return Object.fromEntries(Object.entries(e).filter(([i,a])=>a!==""&&a!==null&&a!==void 0))}const _e=q({__name:"AmountAdjustmentField",props:{modelValue:{},baseAmount:{},label:{}},emits:["update:modelValue"],setup(e,{emit:i}){const a=e,d=i,u=M("percent"),r=M(0),s=$(()=>u.value==="amount"?r.value||0:(r.value||0)/100*a.baseAmount),v=$(()=>u.value==="percent"?K(s.value):"");return P(()=>a.modelValue,n=>{u.value==="amount"?r.value=n:a.baseAmount>0&&(r.value=+(n/a.baseAmount*100).toFixed(2))},{immediate:!0}),P(()=>a.baseAmount,n=>{if(u.value==="percent"){const m=n*(r.value||0)/100;d("update:modelValue",Math.max(0,m))}}),P([r,u],()=>{let n=0;u.value==="amount"?n=r.value||0:n=(r.value||0)/100*a.baseAmount,d("update:modelValue",Math.max(0,n))}),(n,m)=>{const y=c("v-btn"),V=c("v-btn-toggle"),p=c("v-text-field");return R(),E(p,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=f=>r.value=f),hint:v.value,label:e.label,type:"number","persistent-hint":u.value==="percent"},{"append-inner":l(()=>[t(V,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=f=>u.value=f),density:"compact",mandatory:"",divided:"","selected-class":"bg-primary"},{default:l(()=>[t(y,{value:"percent"},{default:l(()=>[...m[2]||(m[2]=[B("%",-1)])]),_:1}),t(y,{value:"amount"},{default:l(()=>[B(C(o(Ve)()),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","hint","label","persistent-hint"])}}}),xt=q({__name:"vatCalculatorField",props:{modelValue:{},baseAmount:{}},emits:["update:modelValue"],setup(e,{emit:i}){const{required:a,numeric:d}=ue(),{tCap:u}=F(),r=e,s=i,v=M(0),n=V=>{v.value=Number(V)/100},m=$(()=>v.value*r.baseAmount),y=$(()=>K(m.value));return P(()=>r.modelValue,V=>{v.value=Number(V)||0},{immediate:!0}),P(()=>v.value,V=>{s("update:modelValue",V)}),(V,p)=>{const f=c("v-text-field");return R(),E(f,{"model-value":v.value*100,"onUpdate:modelValue":n,type:"number",min:"0",max:"100",step:"1",suffix:"%",label:o(u)("order.vatRate"),rules:[o(a),o(d)],hint:y.value,"persistent-hint":""},null,8,["model-value","label","rules","hint"])}}}),ht={class:"date-picker-wrapper"},Ct={class:"v-label"},kt={class:"date-picker-row"},At=q({__name:"DatePicker",props:{modelValue:{},title:{}},emits:["update:modelValue"],setup(e,{emit:i}){const{tCap:a}=F(),d=e,u=i,r=M(!1),s=M(d.modelValue);function v(){s.value&&(u("update:modelValue",s.value),r.value=!1)}const n=$(()=>s.value?new Date(s.value).toLocaleDateString():a("common.noDateSelected"));return(m,y)=>{const V=c("v-btn"),p=c("v-date-picker"),f=c("v-menu");return R(),le("div",ht,[O("label",Ct,C(e.title),1),O("div",kt,[t(f,{modelValue:r.value,"onUpdate:modelValue":y[1]||(y[1]=k=>r.value=k),transition:"scale-transition","offset-y":"","close-on-content-click":!1,"close-on-back":""},{activator:l(({props:k})=>[t(V,be(k,{class:"date-btn",variant:"text",ripple:!1,size:"large",text:n.value}),null,16,["text"])]),default:l(()=>[t(p,{modelValue:s.value,"onUpdate:modelValue":[y[0]||(y[0]=k=>s.value=k),v],min:new Date,class:"weekdays-primary","control-variant":"modal",elevation:"1","hide-header":"","show-adjacent-months":""},null,8,["modelValue","min"])]),_:1},8,["modelValue"]),t(V,{icon:"mdi-close",color:"red",size:"large",variant:"text",disabled:!s.value,onClick:y[2]||(y[2]=k=>s.value=null),title:"Clear date"},null,8,["disabled"])])])}}}),$t=X(At,[["__scopeId","data-v-adf4af75"]]),Rt=q({__name:"AddOrderModal",setup(e){const{maxLength:i,required:a}=ue(),{createCreditOrderCommmandHandler:d,partners:u,partnersToItemProps:r}=se(),{tCap:s}=F(),v=["Credit","Debit"],n=Ne({direction:"Credit",partnerId:"",vatRate:.24,dueDate:null,notes:"",depositAmount:0,discountAmount:0,items:[]}),{dialog:m,formRef:y,validForm:V,loading:p,errorMessage:f,close:k,reset:L,submit:_}=Ie(n,{autoReset:!1}),U=M([]);function D(){n.items.push(vt({id:qe(),name:"",variations:[]})),je(()=>{U.value.push(n.items.length-1)})}const b=$(()=>n.items.reduce((N,g)=>{const I=g.variations?.reduce((j,A)=>j+Object.values(A.sizing).reduce((H,z)=>H+z,0),0)??0;return N+I},0)),w=$(()=>n.items.reduce((N,g)=>{const I=g.variations?.reduce((j,A)=>{const H=Object.values(A.sizing).reduce((z,oe)=>z+oe,0);return j+H*A.price},0)??0;return N+I},0)),T=$(()=>w.value*n.vatRate),x=$(()=>w.value+T.value),S=$(()=>x.value-n.discountAmount),Q=$(()=>S.value-n.depositAmount);function te(N){const g=n.items.findIndex(I=>I.id===N);g!=-1&&n.items.splice(g,1)}async function ne(){await _(async N=>{N.direction==="Credit"&&(fe(N),d.handle(fe(N))),L()})}return(N,g)=>{const I=c("v-btn"),j=c("v-autocomplete"),A=c("v-col"),H=c("v-select"),z=c("v-row"),oe=c("v-expansion-panels"),ye=c("v-textarea"),we=c("v-alert"),xe=c("v-container"),he=c("v-form"),Ce=c("v-card-text"),ke=c("v-spacer"),Ae=c("v-card-actions"),$e=c("v-card"),Re=c("v-dialog");return R(),E(Re,{modelValue:o(m),"onUpdate:modelValue":g[9]||(g[9]=h=>ce(m)?m.value=h:null),"max-width":"1500"},{activator:l(({props:h})=>[t(I,be(h,{color:"surface-variant",text:o(s)("order.addOrderTitle"),"prepend-icon":"mdi-plus",variant:"flat"}),null,16,["text"])]),default:l(()=>[t($e,{title:o(s)("order.addOrderTitle")},{default:l(()=>[t(Ce,null,{default:l(()=>[t(he,{ref_key:"formRef",ref:y,modelValue:o(V),"onUpdate:modelValue":g[8]||(g[8]=h=>ce(V)?V.value=h:null)},{default:l(()=>[t(xe,{fluid:""},{default:l(()=>[t(z,{dense:""},{default:l(()=>[t(A,{cols:"6"},{default:l(()=>[t(j,{modelValue:n.partnerId,"onUpdate:modelValue":g[0]||(g[0]=h=>n.partnerId=h),"item-props":o(r),label:o(s)("partner.partner"),items:o(u),rules:[o(a)]},null,8,["modelValue","item-props","label","items","rules"])]),_:1}),t(A,{cols:"6"},{default:l(()=>[t(H,{modelValue:n.direction,"onUpdate:modelValue":g[1]||(g[1]=h=>n.direction=h),label:o(s)("order.direction"),items:v,rules:[o(a)]},null,8,["modelValue","label","rules"])]),_:1}),t(A,{cols:"6"},{default:l(()=>[t($t,{modelValue:n.dueDate,"onUpdate:modelValue":g[2]||(g[2]=h=>n.dueDate=h),title:o(s)("order.dueDate")},null,8,["modelValue","title"])]),_:1}),t(A,{cols:"12",class:"d-flex justify-space-between align-center mb-4"},{default:l(()=>[O("h3",null,C(o(s)("order.items")),1),t(I,{color:"indigo",text:o(s)("order.addOrderItemTitle"),"prepend-icon":"mdi-plus",variant:"text",onClick:D},null,8,["text"])]),_:1})]),_:1}),t(z,{dense:""},{default:l(()=>[t(oe,{modelValue:U.value,"onUpdate:modelValue":g[3]||(g[3]=h=>U.value=h),multiple:""},{default:l(()=>[(R(!0),le(Oe,null,Be(n.items,(h,re)=>(R(),E(mt,{key:h.id,modelValue:n.items[re],"onUpdate:modelValue":ie=>n.items[re]=ie,onRemoveItem:ie=>te(h.id)},null,8,["modelValue","onUpdate:modelValue","onRemoveItem"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(z,{class:"mb-4",justify:"end",align:"center"},{default:l(()=>[t(A,{cols:"auto"},{default:l(()=>[B(C(o(s)("order.orderQuantity"))+": ",1),O("strong",null,C(b.value),1)]),_:1}),t(A,{cols:"auto"},{default:l(()=>[B(C(o(s)("order.orderSum"))+" ",1),O("strong",null,C(o(K)(w.value)),1)]),_:1})]),_:1}),t(z,null,{default:l(()=>[t(A,{cols:"6"},{default:l(()=>[t(ye,{modelValue:n.notes,"onUpdate:modelValue":g[4]||(g[4]=h=>n.notes=h),label:o(s)("order.notes"),rules:[o(i)(1e3)],rows:"4",counter:"1000"},null,8,["modelValue","label","rules"])]),_:1}),t(A,{dense:"",cols:"6"},{default:l(()=>[t(z,{class:"mb-4",justify:"end",align:"center"},{default:l(()=>[t(A,{cols:"6"},{default:l(()=>[t(xt,{modelValue:n.vatRate,"onUpdate:modelValue":g[5]||(g[5]=h=>n.vatRate=h),"base-amount":w.value},null,8,["modelValue","base-amount"])]),_:1}),t(A,{cols:"4"},{default:l(()=>[B(C(o(s)("order.amountAfterTax"))+" ",1),O("strong",null,C(o(K)(x.value)),1)]),_:1})]),_:1}),t(z,{class:"mb-4",justify:"end",align:"center"},{default:l(()=>[t(A,{cols:"6"},{default:l(()=>[t(_e,{modelValue:n.discountAmount,"onUpdate:modelValue":g[6]||(g[6]=h=>n.discountAmount=h),"base-amount":x.value,label:o(s)("order.discount")},null,8,["modelValue","base-amount","label"])]),_:1}),t(A,{cols:"4"},{default:l(()=>[B(C(o(s)("order.total"))+": ",1),O("strong",null,C(o(K)(S.value)),1)]),_:1})]),_:1}),t(z,{class:"mb-4",justify:"end",align:"center"},{default:l(()=>[t(A,{cols:"6"},{default:l(()=>[t(_e,{modelValue:n.depositAmount,"onUpdate:modelValue":g[7]||(g[7]=h=>n.depositAmount=h),"base-amount":S.value,label:o(s)("order.deposit")},null,8,["modelValue","base-amount","label"])]),_:1}),t(A,{cols:"4"},{default:l(()=>[B(C(o(s)("order.remainingAmount"))+": ",1),O("strong",null,C(o(K)(Q.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),o(f)?(R(),E(we,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:l(()=>[B(C(o(f)),1)]),_:1})):J("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(Ae,null,{default:l(()=>[t(I,{variant:"tonal",color:"warning",text:o(s)("common.clear"),onClick:o(L)},null,8,["text","onClick"]),t(ke),t(I,{variant:"tonal",color:"indigo",text:o(s)("common.save"),loading:o(p),disabled:!o(V)||o(p),onClick:ne},null,8,["text","loading","disabled"]),t(I,{text:o(s)("common.cancel"),color:"red",disabled:o(p),onClick:o(k)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}}),Ut=X(Rt,[["__scopeId","data-v-89f7292c"]]),Et={class:"d-flex justify-space-between align-center mb-4"},Tt={class:"text-h6"},Ot=q({__name:"OrdersView",setup(e){const{allOrders:i}=se(),{tCap:a}=F();return(d,u)=>{const r=c("v-card"),s=c("v-container");return R(),E(s,{class:"py-6"},{default:l(()=>[t(r,{class:"pa-4"},{default:l(()=>[O("div",Et,[O("h2",Tt,C(o(a)("order.order",2)),1),t(Ut)]),t(tt,{orders:o(i)},null,8,["orders"])]),_:1})]),_:1})}}});export{Ot as default};

import{d as H,f as J,am as L,g as O,r as y,k as T,c as j,e,q as a,l as o,J as G,y as v,z as _,u as s,p as I,m as b,x,an as K,o as g}from"./index-DLPsEI6P.js";const X=H({__name:"ChangePassword",setup(Q){const{required:m,sameAs:C}=J(),{changePassword:k}=L(),{tCap:t}=O(),d=y(""),i=y(""),n=y({oldPassword:"",newPassword:"",confirmNewPassword:""}),{formRef:N,validForm:p,loading:V,submit:h,reset:B}=T(n);async function D(){await h(async w=>{d.value="";try{await k(w.value.oldPassword,w.value.newPassword),i.value=t("vault.passwordChangedSuccess"),B()}catch(l){l instanceof DOMException?d.value=t("vault.decryptionError"):d.value=t("vault.wrongPassowrd")}})}return(w,l)=>{const f=o("v-alert"),M=o("v-card-title"),R=o("v-divider"),P=o("v-text-field"),u=o("v-col"),c=o("v-row"),U=o("v-container"),E=o("v-form"),F=o("v-card-text"),S=o("v-spacer"),q=o("v-btn"),z=o("v-card-actions"),A=o("v-card");return g(),j(G,null,[e(f,{type:"warning",variant:"tonal",density:"compact",class:"mt-2 mb-3"},{default:a(()=>[v(_(s(t)("vault.saveBeforeChangePw")),1)]),_:1}),e(A,null,{default:a(()=>[e(M,null,{default:a(()=>[v(_(s(t)("vault.changePassword")),1)]),_:1}),e(R),e(F,null,{default:a(()=>[e(E,{ref_key:"formRef",ref:N,modelValue:s(p),"onUpdate:modelValue":l[3]||(l[3]=r=>I(p)?p.value=r:null)},{default:a(()=>[e(U,{class:"pa-0",fluid:""},{default:a(()=>[e(c,{dense:""},{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(P,{modelValue:n.value.oldPassword,"onUpdate:modelValue":l[0]||(l[0]=r=>n.value.oldPassword=r),label:s(t)("vault.oldPassword"),rules:[s(m)],type:"password"},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),e(c,{dense:""},{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(P,{modelValue:n.value.newPassword,"onUpdate:modelValue":l[1]||(l[1]=r=>n.value.newPassword=r),label:s(t)("vault.newPassword"),rules:[s(m)],type:"password"},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),e(c,{dense:""},{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(K,{password:n.value.newPassword},null,8,["password"])]),_:1})]),_:1}),e(c,{dense:""},{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(P,{modelValue:n.value.confirmNewPassword,"onUpdate:modelValue":l[2]||(l[2]=r=>n.value.confirmNewPassword=r),label:s(t)("vault.confirmNewPassword"),rules:[s(m),s(C)(()=>n.value.newPassword,"validation.passwordsDoNotMatch")],type:"password"},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),d.value?(g(),b(f,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:a(()=>[v(_(d.value),1)]),_:1})):x("",!0),i.value?(g(),b(f,{key:1,type:"success",variant:"tonal",density:"compact",class:"mt-2"},{default:a(()=>[v(_(i.value),1)]),_:1})):x("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(z,null,{default:a(()=>[e(S),e(q,{variant:"tonal",color:"primary",text:s(t)("vault.changePassword"),loading:s(V),disabled:s(V),onClick:D},null,8,["text","loading","disabled"])]),_:1})]),_:1})],64)}}});export{X as default};

import{P,d as W,f as X,g as Y,j as Z,k as h,w as ee,C as U,m as u,l as s,u as e,p as w,q as n,e as o,x as c,y as ae,z as te,A as I,o as d}from"./index-Bf_LNgB1.js";import{u as le}from"./useDeliveryCarrierDetails-C0dCJktx.js";import{u as ne,_ as oe}from"./AddressLink.vue_vue_type_script_setup_true_lang-CqtMAP8O.js";function re(p){return p.type===P.Supplier}function se(p){return p.type===P.B2BCustomer}const me=W({__name:"EditPartnerModal",props:{partner:{},mini:{type:Boolean}},setup(p){const{maxLength:C,required:x,rangeLength:g}=X(),{editSupplierCommandHandler:S,editB2BCustomerCommandHandler:$}=le(),{carriers:L}=ne(),{tCap:m,t:R}=Y(),i=p,a=Z({businessName:"",contactName:"",activity:"",deliveryCarrierId:""});function D(r){return{title:r.name,value:r.id,subtitle:r.primaryLocation?.value??""}}const{dialog:y,formRef:H,validForm:b,loading:k,errorMessage:B,close:q,submit:z}=h(a);ee(y,r=>{r&&i.partner&&(a.businessName=i.partner.businessName??"",a.contactName=i.partner.contactName??"",v.value&&(a.activity=v.value.activity??""),_.value&&(a.deliveryCarrierId=_.value.deliveryCarrierId??""))});const v=U(()=>i.partner&&re(i.partner)?i.partner:void 0),_=U(()=>i.partner&&se(i.partner)?i.partner:void 0);async function F(){await z(async r=>{v.value?S.handle({id:i.partner?.id??"",contactName:r.contactName,activity:r.activity,businessName:r.businessName}):_.value&&$.handle({id:i.partner?.id??"",contactName:r.contactName,businessName:r.businessName,deliveryCarrierId:r.deliveryCarrierId})})}return(r,l)=>{const N=s("v-btn"),f=s("v-text-field"),V=s("v-col"),M=s("v-autocomplete"),T=s("v-row"),j=s("v-alert"),A=s("v-container"),E=s("v-form"),G=s("v-card-text"),J=s("v-spacer"),K=s("v-card-actions"),O=s("v-card"),Q=s("v-dialog");return d(),u(Q,{modelValue:e(y),"onUpdate:modelValue":l[7]||(l[7]=t=>w(y)?y.value=t:null),"max-width":"500"},{activator:n(({props:t})=>[p.mini?c("",!0):(d(),u(N,I({key:0},t,{color:"surface-variant",text:`${e(m)("common.edit")} ${e(R)("partner.partner")}`,"prepend-icon":"mdi-pencil",variant:"flat"}),null,16,["text"])),p.mini?(d(),u(N,I({key:1},t,{color:"surface-variant",icon:"mdi-pencil",variant:"text",density:"compact"}),null,16)):c("",!0)]),default:n(()=>[o(O,{title:`${e(m)("common.edit")} ${a.businessName}`},{default:n(()=>[o(G,null,{default:n(()=>[o(E,{ref_key:"formRef",ref:H,modelValue:e(b),"onUpdate:modelValue":l[6]||(l[6]=t=>w(b)?b.value=t:null)},{default:n(()=>[o(A,{class:"pa-0",fluid:""},{default:n(()=>[o(T,{dense:""},{default:n(()=>[o(V,{cols:"12"},{default:n(()=>[v.value?(d(),u(f,{key:0,modelValue:a.contactName,"onUpdate:modelValue":l[0]||(l[0]=t=>a.contactName=t),label:e(m)("partner.contactName"),rules:[e(x),e(g)(3,50)]},null,8,["modelValue","label","rules"])):c("",!0),_.value?(d(),u(f,{key:1,modelValue:a.contactName,"onUpdate:modelValue":l[1]||(l[1]=t=>a.contactName=t),label:e(m)("partner.contactName"),rules:[e(g)(3,50)]},null,8,["modelValue","label","rules"])):c("",!0)]),_:1}),o(V,{cols:"12"},{default:n(()=>[_.value?(d(),u(f,{key:0,modelValue:a.businessName,"onUpdate:modelValue":l[2]||(l[2]=t=>a.businessName=t),label:e(m)("partner.businessName"),rules:[e(x),e(C)(50)]},null,8,["modelValue","label","rules"])):c("",!0),v.value?(d(),u(f,{key:1,modelValue:a.businessName,"onUpdate:modelValue":l[3]||(l[3]=t=>a.businessName=t),label:e(m)("partner.businessName"),rules:[e(C)(50)]},null,8,["modelValue","label","rules"])):c("",!0)]),_:1}),v.value?(d(),u(V,{key:0,cols:"12"},{default:n(()=>[o(f,{modelValue:a.activity,"onUpdate:modelValue":l[4]||(l[4]=t=>a.activity=t),label:e(m)("partner.activity"),rules:[e(x),e(C)(50)]},null,8,["modelValue","label","rules"])]),_:1})):c("",!0),_.value?(d(),u(V,{key:1,cols:"12"},{default:n(()=>[o(M,{modelValue:a.deliveryCarrierId,"onUpdate:modelValue":l[5]||(l[5]=t=>a.deliveryCarrierId=t),"item-props":D,label:"Carrier",items:e(L)},{"append-inner":n(()=>[o(oe,{mini:""})]),_:1},8,["modelValue","items"])]),_:1})):c("",!0)]),_:1}),e(B)?(d(),u(j,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:n(()=>[ae(te(e(B)),1)]),_:1})):c("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(K,null,{default:n(()=>[o(J),o(N,{variant:"tonal",color:"indigo",text:e(m)("common.save"),loading:e(k),disabled:!e(b)||e(k),onClick:F},null,8,["text","loading","disabled"]),o(N,{text:e(m)("common.cancel"),color:"red",disabled:e(k),onClick:e(q)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});export{me as _,se as a,re as i};

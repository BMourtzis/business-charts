import{g as P,C as y,S as T,D as C,E as w,d as $,F as A,G as H,l as f,m as l,o as s,u as o,q as i,e as m,x as S,H as V,y as D,z as L,B as p,c as z,I as E,J as F}from"./index-DLPsEI6P.js";import{a as I,u as q}from"./useDeliveryCarrierDetails-CZUIfZ5A.js";import{_ as G}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DBflF40U.js";import{_ as J}from"./EditPartnerModal.vue_vue_type_script_setup_true_lang-B3oN2-uh.js";import{a as M,b as R}from"./AddressLink.vue_vue_type_script_setup_true_lang-BOy7hWMp.js";function j(e){return e.find(t=>t.isPrimary)}function K(e){return e.filter(t=>t.type===w.Phone).sort((t,a)=>Number(a.isPrimary)-Number(t.isPrimary)).slice(0,3)}function u(e){const t=j(e.addresses);return{id:e.id,clientNumber:e.clientNumber,type:e.type,name:O(e),city:t?.city,address:t,phones:K(e.phones),rowType:"partner",value:e}}function O(e){return e.businessName&&e.contactName?`${e.businessName} (${e.contactName})`:e.businessName?e.businessName:e.contactName?e.contactName:""}function Q(e){return{...u(e),activity:e.activity,rowType:"supplier"}}function U(e){return{...u(e),deliveryCarrier:I(e.deliveryCarrierId),rowType:"b2b"}}function W(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function X(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("partner.activity"),key:"activity",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function Y(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("deliveryCarrier.carrier"),key:"deliveryCarrier",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function g(e){return Array.isArray(e)&&e.every(t=>t instanceof T)}function _(e){return Array.isArray(e)&&e.every(t=>t instanceof C)}function Z(e){const{tCap:t}=P(),a=y(()=>{const n=e.value??[];return g(n)?n.map(Q):_(n)?n.map(U):n.map(u)}),c=y(()=>{const n=e.value??[];return g(n)?X(t):_(n)?Y(t):W(t)});return{data:a,headers:c}}const ee={class:"d-flex flex-column gap-1"},te={class:"d-flex flex-column gap-1"},oe=$({__name:"PartnerList",props:{partners:{}},setup(e){const{deletePartnerCommandHandler:t}=q(),a=A(),c=e;function n(k,d){a.push(`/partner/${d.item.id}`)}const{data:v,headers:h}=Z(H(c,"partners"));return(k,d)=>{const b=f("v-btn"),N=f("v-data-table");return s(),l(N,{headers:o(h),items:o(v),class:"text-start","hide-default-footer":"",density:"comfortable","items-per-page":-1,hover:"","onClick:row":n},{"item.phones":i(({item:r})=>[p("div",ee,[(s(!0),z(F,null,E(r.phones,(x,B)=>(s(),l(R,{key:B,class:"d-flex align-center",phone:x},null,8,["phone"]))),128))])]),"item.city":i(({item:r})=>[p("div",te,[m(M,{class:"d-flex align-center",address:r.address,format:"city"},null,8,["address"])])]),"item.deliveryCarrier":i(({item:r})=>[r.rowType==="b2b"&&r.deliveryCarrier!==void 0?(s(),l(b,{key:0,variant:"text",onClick:V(()=>o(a).push(`/carrier/${r.deliveryCarrier?.id}`),["stop"])},{default:i(()=>[D(L(r.deliveryCarrier.name),1)]),_:2},1032,["onClick"])):S("",!0)]),"item.actions":i(({item:r})=>[m(J,{partner:r.value,mini:!0},null,8,["partner"]),m(G,{name:r.name,"action-fn":()=>o(t).handle({id:r.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}});export{oe as _};

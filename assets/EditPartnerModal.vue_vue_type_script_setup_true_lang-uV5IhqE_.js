import{L as U,d as W,f as X,g as Y,j as Z,k as h,w as ee,C as B,m as c,l as r,u as e,p as w,q as o,e as a,x as p,y as ae,z as te,A as I,o as m}from"./index-1Y8v8_c6.js";import{u as ne}from"./useDeliveryCarrierDetails-Bv3slwn5.js";import{u as oe,_ as le}from"./AddressLink.vue_vue_type_script_setup_true_lang-Cg41zIPL.js";function re(u){return u.type===U.Supplier}function ie(u){return u.type===U.B2BCustomer}const ce=W({__name:"EditPartnerModal",props:{partner:{},mini:{type:Boolean}},setup(u){const{maxLength:x,required:g,rangeLength:L}=X(),{editSupplierCommandHandler:S,editB2BCustomerCommandHandler:$}=ne(),{carriers:P}=oe(),{tCap:d,t:R}=Y(),s=u,t=Z({businessName:"",contactName:"",activity:"",deliveryCarrierId:""});function D(l){return{title:l.name,value:l.id,subtitle:l.primaryLocation?.value??""}}const{dialog:v,formRef:H,validForm:_,loading:N,errorMessage:k,close:q,submit:z}=h(t);ee(v,l=>{l&&s.partner&&(t.businessName=s.partner.businessName??"",t.contactName=s.partner.contactName,f.value&&(t.activity=f.value.activity??""),y.value&&(t.deliveryCarrierId=y.value.deliveryCarrierId??""))});const f=B(()=>s.partner&&re(s.partner)?s.partner:void 0),y=B(()=>s.partner&&ie(s.partner)?s.partner:void 0);async function F(){await z(async l=>{f.value?S.handle({id:s.partner?.id??"",contactName:l.contactName,activity:l.activity,businessName:l.businessName}):y.value&&$.handle({id:s.partner?.id??"",contactName:l.contactName,businessName:l.businessName,deliveryCarrierId:l.deliveryCarrierId})})}return(l,i)=>{const b=r("v-btn"),V=r("v-text-field"),C=r("v-col"),M=r("v-autocomplete"),T=r("v-row"),j=r("v-alert"),A=r("v-container"),E=r("v-form"),G=r("v-card-text"),J=r("v-spacer"),K=r("v-card-actions"),O=r("v-card"),Q=r("v-dialog");return m(),c(Q,{modelValue:e(v),"onUpdate:modelValue":i[5]||(i[5]=n=>w(v)?v.value=n:null),"max-width":"500"},{activator:o(({props:n})=>[u.mini?p("",!0):(m(),c(b,I({key:0},n,{color:"surface-variant",text:`${e(d)("common.edit")} ${e(R)("partner.partner")}`,"prepend-icon":"mdi-pencil",variant:"flat"}),null,16,["text"])),u.mini?(m(),c(b,I({key:1},n,{color:"surface-variant",icon:"mdi-pencil",variant:"text",density:"compact"}),null,16)):p("",!0)]),default:o(()=>[a(O,{title:`${e(d)("common.edit")} ${t.businessName}`},{default:o(()=>[a(G,null,{default:o(()=>[a(E,{ref_key:"formRef",ref:H,modelValue:e(_),"onUpdate:modelValue":i[4]||(i[4]=n=>w(_)?_.value=n:null)},{default:o(()=>[a(A,{class:"pa-0",fluid:""},{default:o(()=>[a(T,{dense:""},{default:o(()=>[a(C,{cols:"12"},{default:o(()=>[a(V,{modelValue:t.contactName,"onUpdate:modelValue":i[0]||(i[0]=n=>t.contactName=n),label:e(d)("partner.contactName"),rules:[e(g),e(L)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),a(C,{cols:"12"},{default:o(()=>[a(V,{modelValue:t.businessName,"onUpdate:modelValue":i[1]||(i[1]=n=>t.businessName=n),label:e(d)("partner.businessName"),rules:[e(x)(50)]},null,8,["modelValue","label","rules"])]),_:1}),f.value?(m(),c(C,{key:0,cols:"12"},{default:o(()=>[a(V,{modelValue:t.activity,"onUpdate:modelValue":i[2]||(i[2]=n=>t.activity=n),label:e(d)("partner.activity"),rules:[e(g),e(x)(50)]},null,8,["modelValue","label","rules"])]),_:1})):p("",!0),y.value?(m(),c(C,{key:1,cols:"12"},{default:o(()=>[a(M,{modelValue:t.deliveryCarrierId,"onUpdate:modelValue":i[3]||(i[3]=n=>t.deliveryCarrierId=n),"item-props":D,label:"Carrier",items:e(P)},{"append-inner":o(()=>[a(le,{mini:""})]),_:1},8,["modelValue","items"])]),_:1})):p("",!0)]),_:1}),e(k)?(m(),c(j,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:o(()=>[ae(te(e(k)),1)]),_:1})):p("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(K,null,{default:o(()=>[a(J),a(b,{variant:"tonal",color:"indigo",text:e(d)("common.save"),loading:e(N),disabled:!e(_)||e(N),onClick:F},null,8,["text","loading","disabled"]),a(b,{text:e(d)("common.cancel"),color:"red",disabled:e(N),onClick:e(q)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});export{ce as _,ie as a,re as i};

import{ad as L,ae as B,af as J,a9 as U,U as A,a8 as g,d as O,g as S,r as C,m as R,q as a,e,l as t,y as h,z as H,u as n,p as w,o as j,c as E,I,B as F}from"./index-CJz8f9ss.js";import{_ as T}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-Bze5fObe.js";class z{_loadPartnersCommandHandler;_loadDeliveryCarriesCommandHandler;_clearStoresCommandHandler;constructor(){this._loadPartnersCommandHandler=new L,this._loadDeliveryCarriesCommandHandler=new B,this._clearStoresCommandHandler=new J}async handle(l){l.removePartners&&await U.removeAll(),l.removeCarriers&&await A.removeAll(),l.removeOrders&&await g.removeAll(),l.removePartners&&await this._loadPartnersCommandHandler.handle(),l.removeCarriers&&await this._loadDeliveryCarriesCommandHandler.handle(),await this._clearStoresCommandHandler.handle(l)}}class q{async exportAll(l,i,s){const r={partners:[],orders:[],carriers:[]};l&&(r.partners=await U.getAll()),i&&(r.carriers=await A.getAll()),s&&(r.orders=await g.getAll());const o=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),d=URL.createObjectURL(o),D=document.createElement("a");D.href=d,D.download=`export-${new Date().toISOString().slice(0,10)}.json`,D.click(),URL.revokeObjectURL(d)}async importAll(l,i,s,r){const o=await l.text(),d=JSON.parse(o);i&&d.partners&&await U.saveAll(d.partners),s&&d.orders&&await g.saveAll(d.orders),r&&d.carriers&&await A.saveAll(d.carriers)}}class M{_fileService;constructor(l){this._fileService=l}async handle(l){await this._fileService.exportAll(l.includePartners,l.includeCarriers,l.includeOrders)}}class G{_fileService;_loadPartnersCommandHandler;_loadDeliveryCarriesCommandHandler;constructor(l){this._fileService=l,this._loadPartnersCommandHandler=new L,this._loadDeliveryCarriesCommandHandler=new B}async handle(l){await this._fileService.importAll(l.file,l.includePartners,l.includeCarriers,l.includeOrders),l.includePartners&&await this._loadPartnersCommandHandler.handle(),l.includeCarriers&&await this._loadDeliveryCarriesCommandHandler.handle()}}function k(){const v=new q;return{exportDataCommandHandler:new M(v),importDataCommandHandler:new G(v),deleteDataCommandHandler:new z}}const K=O({__name:"ExportData",setup(v){const{exportDataCommandHandler:l}=k(),{tCap:i}=S();let s=C(!1),r=C(!1),o=C(!1);function d(){l.handle({includePartners:s.value,includeCarriers:r.value,includeOrders:o.value})}return(D,c)=>{const u=t("v-card-title"),b=t("v-divider"),y=t("v-switch"),_=t("v-col"),V=t("v-row"),x=t("v-btn"),P=t("v-card-text"),m=t("v-card");return j(),R(m,null,{default:a(()=>[e(u,null,{default:a(()=>[h(H(n(i)("options.export")),1)]),_:1}),e(b),e(P,null,{default:a(()=>[e(V,{justify:"center"},{default:a(()=>[e(_,{cols:"auto"},{default:a(()=>[e(y,{modelValue:n(s),"onUpdate:modelValue":c[0]||(c[0]=f=>w(s)?s.value=f:s=f),label:n(i)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(_,{cols:"auto"},{default:a(()=>[e(y,{modelValue:n(r),"onUpdate:modelValue":c[1]||(c[1]=f=>w(r)?r.value=f:r=f),label:n(i)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(_,{cols:"auto"},{default:a(()=>[e(y,{modelValue:n(o),"onUpdate:modelValue":c[2]||(c[2]=f=>w(o)?o.value=f:o=f),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{justify:"center"},{default:a(()=>[e(x,{color:"warning",onClick:d},{default:a(()=>[h(H(n(i)("options.exportJson")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Q=O({__name:"ImportData",setup(v){const{importDataCommandHandler:l}=k(),{tCap:i}=S();let s=C(!1),r=C(!1),o=C(!1),d=C(null);function D(){d.value&&l.handle({file:d.value,includePartners:s.value,includeCarriers:r.value,includeOrders:o.value})}return(c,u)=>{const b=t("v-card-title"),y=t("v-divider"),_=t("v-switch"),V=t("v-col"),x=t("v-row"),P=t("v-file-input"),m=t("v-btn"),f=t("v-card-text"),N=t("v-card");return j(),R(N,null,{default:a(()=>[e(b,null,{default:a(()=>[h(H(n(i)("options.import")),1)]),_:1}),e(y),e(f,null,{default:a(()=>[e(x,{justify:"center"},{default:a(()=>[e(V,{cols:"auto"},{default:a(()=>[e(_,{modelValue:n(s),"onUpdate:modelValue":u[0]||(u[0]=p=>w(s)?s.value=p:s=p),label:n(i)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(V,{cols:"auto"},{default:a(()=>[e(_,{modelValue:n(r),"onUpdate:modelValue":u[1]||(u[1]=p=>w(r)?r.value=p:r=p),label:n(i)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(V,{cols:"auto"},{default:a(()=>[e(_,{modelValue:n(o),"onUpdate:modelValue":u[2]||(u[2]=p=>w(o)?o.value=p:o=p),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{justify:"center"},{default:a(()=>[e(P,{modelValue:n(d),"onUpdate:modelValue":u[3]||(u[3]=p=>w(d)?d.value=p:d=p),label:"JSON file",accept:"application/json"},null,8,["modelValue"])]),_:1}),e(x,{justify:"center"},{default:a(()=>[e(m,{color:"primary",disabled:!n(d),onClick:D},{default:a(()=>[h(H(n(i)("options.importJson")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})}}}),W=O({__name:"DeleteData",setup(v){const{deleteDataCommandHandler:l}=k(),{tCap:i}=S();let s=C(!1),r=C(!1),o=C(!1);function d(){l.handle({removePartners:s.value,removeCarriers:r.value,removeOrders:o.value})}return(D,c)=>{const u=t("v-card-title"),b=t("v-divider"),y=t("v-switch"),_=t("v-col"),V=t("v-row"),x=t("v-card-text"),P=t("v-card");return j(),R(P,null,{default:a(()=>[e(u,null,{default:a(()=>[h(H(n(i)("options.deleteData")),1)]),_:1}),e(b),e(x,null,{default:a(()=>[e(V,{justify:"center"},{default:a(()=>[e(_,{cols:"auto"},{default:a(()=>[e(y,{modelValue:n(s),"onUpdate:modelValue":c[0]||(c[0]=m=>w(s)?s.value=m:s=m),label:n(i)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(_,{cols:"auto"},{default:a(()=>[e(y,{modelValue:n(r),"onUpdate:modelValue":c[1]||(c[1]=m=>w(r)?r.value=m:r=m),label:n(i)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(_,{cols:"auto"},{default:a(()=>[e(y,{modelValue:n(o),"onUpdate:modelValue":c[2]||(c[2]=m=>w(o)?o.value=m:o=m),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{justify:"center"},{default:a(()=>[e(T,{name:"All Data","action-fn":d,mini:!1})]),_:1})]),_:1})]),_:1})}}}),Z=O({__name:"DataTransfer",setup(v){const{tCap:l}=S();return(i,s)=>{const r=t("v-row"),o=t("v-col");return j(),E(I,null,[e(r,{justify:"center"},{default:a(()=>[F("h1",null,H(n(l)("options.dataTransfer")),1)]),_:1}),e(r,{justify:"center",class:"mt-6"},{default:a(()=>[e(o,{cols:"auto"},{default:a(()=>[e(K)]),_:1})]),_:1}),e(r,{justify:"center",class:"mt-6"},{default:a(()=>[e(o,{cols:"auto"},{default:a(()=>[e(Q)]),_:1})]),_:1}),e(r,{justify:"center",class:"mt-6"},{default:a(()=>[e(o,{cols:"auto"},{default:a(()=>[e(W)]),_:1})]),_:1})],64)}}});export{Z as default};

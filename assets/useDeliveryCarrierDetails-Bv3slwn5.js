import{K as s,R as m,T as d,U as i,V as p,W as a,P as n,X as h,Y as c,C as u,L as l,Z as y,$ as C}from"./index-1Y8v8_c6.js";class w{constructor(e=s()){this._partnersStore=e}async handle(e){const r=m(e.contactName,e.activity,e.businessName);return e.email&&e.email.trim()!==""&&r.addEmail(d(e.email,!0)),e.phone&&e.phone.trim()!==""&&r.addPhone(i(e.phone,!0)),e.address&&r.addAddress(p(e.address.street,e.address.city,e.address.zip,e.address.country,!0)),await a.add(r),this._partnersStore.add(n.toDTO(r)),r}}class S{constructor(e=s()){this._partnersStore=e}async handle(e){const r=h(e.contactName,e.deliveryCarrierId,e.businessName);return e.email&&e.email.trim()!=""&&r.addEmail(d(e.email,!0)),e.phone&&e.phone.trim()!=""&&r.addPhone(i(e.phone,!0)),e.address&&r.addAddress(p(e.address.street,e.address.city,e.address.zip,e.address.country,!0)),await a.add(r),this._partnersStore.add(n.toDTO(r)),r}}class P{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.id);if(r)return r.updateData(e.contactName,e.businessName),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class I{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getSupplierById(e.id);if(r)return r.updateData(e.contactName,e.businessName,e.activity),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class B{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getB2BCustomerById(e.id);if(r)return r.updateData(e.contactName,e.businessName),r.deliveryCarrierId=e.deliveryCarrierId,await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class H{constructor(e=s()){this._partnersStore=e}async handle(e){await a.remove(e.id),this._partnersStore.remove(e.id)}}class _{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(!r)return;const o=d(e.email,e.isPrimary,e.name);return r.addEmail(o),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class f{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(!r)return;const o=d(e.email,e.isPrimary,e.name);return r.editEmail(e.emailId,o),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class v{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(r)return r.removeEmail(e.emailId),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class D{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(!r)return;const o=i(e.phone,e.isPrimary,e.name);return r.addPhone(o),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class E{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(!r)return;const o=i(e.phone,e.isPrimary,e.name);return r.editPhone(e.phoneId,o),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class T{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(r)return r.removePhone(e.phoneId),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class g{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(!r)return;const o=p(e.street,e.city,e.zip,e.country,e.isPrimary,e.name);return r.addAddress(o),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class A{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(!r)return;const o=p(e.street,e.city,e.zip,e.country,e.isPrimary,e.name);return r.editAddress(e.addressId,o),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}class O{constructor(e=s()){this._partnersStore=e}async handle(e){const r=await a.getById(e.partnerId);if(r)return r.removeAddress(e.addressId),await a.update(r),this._partnersStore.update(n.toDTO(r)),r}}function N(){const t=s(),{all:e}=c(t);return{b2bCustomers:u(()=>e.value.filter(r=>r.type===l.B2BCustomer).map(n.toModel)),suppliers:u(()=>e.value.filter(r=>r.type===l.Supplier).map(n.toModel)),createSupplierCommandHandler:new w(t),createB2BCustomerCommandHandler:new S(t),editSupplierCommandHandler:new I(t),editB2BCustomerCommandHandler:new B(t),editPartnerCommandHandler:new P(t),addEmailCommandHandler:new _(t),editEmailCommandHandler:new f(t),removeEmailCommandHandler:new v(t),addPhoneCommandHandler:new D(t),editPhoneCommandHandler:new E(t),removePhoneCommandHandler:new T(t),addAddressCommandHandler:new g(t),editAddressCommandHandler:new A(t),removeAddressCommandHandler:new O(t),deletePartnerCommandHandler:new H(t)}}function M(t){const r=y().getById(t);if(r)return C.toModel(r)}function R(t){const e=s();return{b2bCustomers:u(()=>e.getByType(l.B2BCustomer).filter(o=>o.deliveryCarrierId===t).map(n.toModel))}}export{R as a,M as g,N as u};

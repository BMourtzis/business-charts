import{a2 as k,a3 as B,a4 as E,W as A,a0 as U,d as h,g as P,r as y,m as N,q as l,e,l as n,y as g,z as H,u as d,p as C,o as j,c as T,J as F,B as z}from"./index-mlWFRU9E.js";import{_ as q}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-B8aYGJ6a.js";const x="orders";async function G(){const r=localStorage.getItem(x);return r?JSON.parse(r):[]}async function R(r){localStorage.setItem(x,JSON.stringify(r))}const J={async getAll(){return G()},async saveAll(r){R(r)},async load(){const r=localStorage.getItem(x);return r?JSON.parse(r):[]},async getById(r){},async add(r){const a=await this.load();a.push(r),localStorage.setItem(x,JSON.stringify(a))},async update(r){const a=await this.load(),i=a.findIndex(o=>o.id===r.id);i!==-1&&(a[i]=r),localStorage.setItem(x,JSON.stringify(a))},async remove(r){const i=(await this.load()).filter(o=>o.id!==r);localStorage.setItem(x,JSON.stringify(i))},async removeAll(){await R([])}};class K{_loadPartnersCommandHandler;_loadDeliveryCarriesCommandHandler;_clearStoresCommandHandler;constructor(){this._loadPartnersCommandHandler=new k,this._loadDeliveryCarriesCommandHandler=new B,this._clearStoresCommandHandler=new E}async handle(a){a.removePartners&&await A.removeAll(),a.removeCarriers&&await U.removeAll(),a.removeOrders&&await J.removeAll(),a.removePartners&&await this._loadPartnersCommandHandler.handle(),a.removeCarriers&&await this._loadDeliveryCarriesCommandHandler.handle(),await this._clearStoresCommandHandler.handle(a)}}class M{_fileService;constructor(a){this._fileService=a}async handle(a){await this._fileService.exportAll(a.includePartners,a.includeCarriers,a.includeOrders)}}class W{_fileService;_loadPartnersCommandHandler;_loadDeliveryCarriesCommandHandler;constructor(a){this._fileService=a,this._loadPartnersCommandHandler=new k,this._loadDeliveryCarriesCommandHandler=new B}async handle(a){await this._fileService.importAll(a.file,a.includePartners,a.includeCarriers,a.includeOrders),a.includePartners&&await this._loadPartnersCommandHandler.handle(),a.includeCarriers&&await this._loadDeliveryCarriesCommandHandler.handle()}}class Y{async exportAll(a,i,o){const t={partners:[],orders:[],carriers:[]};a&&(t.partners=await A.getAll()),i&&(t.carriers=await U.getAll()),o&&(t.orders=await J.getAll());const s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),c=URL.createObjectURL(s),D=document.createElement("a");D.href=c,D.download=`export-${new Date().toISOString().slice(0,10)}.json`,D.click(),URL.revokeObjectURL(c)}async importAll(a,i,o,t){const s=await a.text(),c=JSON.parse(s);i&&c.partners&&await A.saveAll(c.partners),o&&c.orders&&await J.saveAll(c.orders),t&&c.carriers&&await U.saveAll(c.carriers)}}function I(){const r=new Y;return{exportDataCommandHandler:new M(r),importDataCommandHandler:new W(r),deleteDataCommandHandler:new K}}const Q=h({__name:"ExportData",setup(r){const{exportDataCommandHandler:a}=I(),{tCap:i}=P();let o=y(!1),t=y(!1),s=y(!1);function c(){a.handle({includePartners:o.value,includeCarriers:t.value,includeOrders:s.value})}return(D,u)=>{const m=n("v-card-title"),b=n("v-divider"),w=n("v-switch"),p=n("v-col"),V=n("v-row"),S=n("v-btn"),O=n("v-card-text"),_=n("v-card");return j(),N(_,null,{default:l(()=>[e(m,null,{default:l(()=>[g(H(d(i)("options.export")),1)]),_:1}),e(b),e(O,null,{default:l(()=>[e(V,{justify:"center"},{default:l(()=>[e(p,{cols:"auto"},{default:l(()=>[e(w,{modelValue:d(o),"onUpdate:modelValue":u[0]||(u[0]=v=>C(o)?o.value=v:o=v),label:d(i)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(p,{cols:"auto"},{default:l(()=>[e(w,{modelValue:d(t),"onUpdate:modelValue":u[1]||(u[1]=v=>C(t)?t.value=v:t=v),label:d(i)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(p,{cols:"auto"},{default:l(()=>[e(w,{modelValue:d(s),"onUpdate:modelValue":u[2]||(u[2]=v=>C(s)?s.value=v:s=v),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{justify:"center"},{default:l(()=>[e(S,{color:"warning",onClick:c},{default:l(()=>[g(H(d(i)("options.exportJson")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),X=h({__name:"ImportData",setup(r){const{importDataCommandHandler:a}=I(),{tCap:i}=P();let o=y(!1),t=y(!1),s=y(!1),c=y(null);function D(){c.value&&a.handle({file:c.value,includePartners:o.value,includeCarriers:t.value,includeOrders:s.value})}return(u,m)=>{const b=n("v-card-title"),w=n("v-divider"),p=n("v-switch"),V=n("v-col"),S=n("v-row"),O=n("v-file-input"),_=n("v-btn"),v=n("v-card-text"),L=n("v-card");return j(),N(L,null,{default:l(()=>[e(b,null,{default:l(()=>[g(H(d(i)("options.import")),1)]),_:1}),e(w),e(v,null,{default:l(()=>[e(S,{justify:"center"},{default:l(()=>[e(V,{cols:"auto"},{default:l(()=>[e(p,{modelValue:d(o),"onUpdate:modelValue":m[0]||(m[0]=f=>C(o)?o.value=f:o=f),label:d(i)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(V,{cols:"auto"},{default:l(()=>[e(p,{modelValue:d(t),"onUpdate:modelValue":m[1]||(m[1]=f=>C(t)?t.value=f:t=f),label:d(i)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(V,{cols:"auto"},{default:l(()=>[e(p,{modelValue:d(s),"onUpdate:modelValue":m[2]||(m[2]=f=>C(s)?s.value=f:s=f),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(S,{justify:"center"},{default:l(()=>[e(O,{modelValue:d(c),"onUpdate:modelValue":m[3]||(m[3]=f=>C(c)?c.value=f:c=f),label:"JSON file",accept:"application/json"},null,8,["modelValue"])]),_:1}),e(S,{justify:"center"},{default:l(()=>[e(_,{color:"primary",disabled:!d(c),onClick:D},{default:l(()=>[g(H(d(i)("options.importJson")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})}}}),Z=h({__name:"DeleteData",setup(r){const{deleteDataCommandHandler:a}=I(),{tCap:i}=P();let o=y(!1),t=y(!1),s=y(!1);function c(){a.handle({removePartners:o.value,removeCarriers:t.value,removeOrders:s.value})}return(D,u)=>{const m=n("v-card-title"),b=n("v-divider"),w=n("v-switch"),p=n("v-col"),V=n("v-row"),S=n("v-card-text"),O=n("v-card");return j(),N(O,null,{default:l(()=>[e(m,null,{default:l(()=>[g(H(d(i)("options.deleteData")),1)]),_:1}),e(b),e(S,null,{default:l(()=>[e(V,{justify:"center"},{default:l(()=>[e(p,{cols:"auto"},{default:l(()=>[e(w,{modelValue:d(o),"onUpdate:modelValue":u[0]||(u[0]=_=>C(o)?o.value=_:o=_),label:d(i)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(p,{cols:"auto"},{default:l(()=>[e(w,{modelValue:d(t),"onUpdate:modelValue":u[1]||(u[1]=_=>C(t)?t.value=_:t=_),label:d(i)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),e(p,{cols:"auto"},{default:l(()=>[e(w,{modelValue:d(s),"onUpdate:modelValue":u[2]||(u[2]=_=>C(s)?s.value=_:s=_),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{justify:"center"},{default:l(()=>[e(q,{name:"All Data","action-fn":c,mini:!1})]),_:1})]),_:1})]),_:1})}}}),ae=h({__name:"DataTransfer",setup(r){const{tCap:a}=P();return(i,o)=>{const t=n("v-row"),s=n("v-col");return j(),T(F,null,[e(t,{justify:"center"},{default:l(()=>[z("h1",null,H(d(a)("options.dataTransfer")),1)]),_:1}),e(t,{justify:"center",class:"mt-6"},{default:l(()=>[e(s,{cols:"auto"},{default:l(()=>[e(Q)]),_:1})]),_:1}),e(t,{justify:"center",class:"mt-6"},{default:l(()=>[e(s,{cols:"auto"},{default:l(()=>[e(X)]),_:1})]),_:1}),e(t,{justify:"center",class:"mt-6"},{default:l(()=>[e(s,{cols:"auto"},{default:l(()=>[e(Z)]),_:1})]),_:1})],64)}}});export{ae as default};

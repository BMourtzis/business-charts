import{g as B,C as y,S as P,D as x,E as T,d as $,F as w,G as A,l as C,m as c,o as i,u as l,q as s,e as m,x as H,B as f,c as S,H as L,I as V}from"./index-GJmNcSpu.js";import{u as D}from"./usePartners-CFSt2nES.js";import{g as E}from"./useDeliveryCarrierDetails-Dg98Uyjn.js";import{_ as F}from"./ConfirmDeleteModal.vue_vue_type_script_setup_true_lang-DMZbPiBp.js";import{_ as I,a as q}from"./CarrierBtn.vue_vue_type_script_setup_true_lang-CNdrwvyz.js";import{a as z,b as G}from"./AddressLink.vue_vue_type_script_setup_true_lang-blf97eZh.js";function R(e){return e.find(t=>t.isPrimary)}function j(e){return e.filter(t=>t.type===T.Phone).sort((t,n)=>Number(n.isPrimary)-Number(t.isPrimary)).slice(0,3)}function u(e){const t=R(e.addresses);return{id:e.id,clientNumber:e.clientNumber,type:e.type,name:J(e),city:t?.city,address:t,phones:j(e.phones),rowType:"partner",value:e}}function J(e){return e.businessName&&e.contactName?`${e.businessName} (${e.contactName})`:e.businessName?e.businessName:e.contactName?e.contactName:""}function K(e){return{...u(e),activity:e.activity,rowType:"supplier"}}function M(e){return{...u(e),deliveryCarrier:E(e.deliveryCarrierId),rowType:"b2b"}}function O(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function Q(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("partner.activity"),key:"activity",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function U(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.clientNumber"),key:"clientNumber",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("deliveryCarrier.carrier"),key:"deliveryCarrier",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function p(e){return Array.isArray(e)&&e.every(t=>t instanceof P)}function g(e){return Array.isArray(e)&&e.every(t=>t instanceof x)}function W(e){const{tCap:t}=B(),n=y(()=>{const a=e.value??[];return p(a)?a.map(K):g(a)?a.map(M):a.map(u)}),o=y(()=>{const a=e.value??[];return p(a)?Q(t):g(a)?U(t):O(t)});return{data:n,headers:o}}const X={class:"d-flex flex-column gap-1"},Y={class:"d-flex flex-column gap-1"},ie=$({__name:"PartnerList",props:{partners:{}},setup(e){const{deletePartnerCommandHandler:t}=D(),n=w(),o=e;function a(k,d){n.push(`/partner/${d.item.id}`)}const{data:_,headers:h}=W(A(o,"partners"));return(k,d)=>{const b=C("v-data-table");return i(),c(b,{headers:l(h),items:l(_),class:"text-start","hide-default-footer":"",density:"comfortable","items-per-page":-1,hover:"","onClick:row":a},{"item.phones":s(({item:r})=>[f("div",X,[(i(!0),S(V,null,L(r.phones,(v,N)=>(i(),c(G,{key:N,class:"d-flex align-center",phone:v},null,8,["phone"]))),128))])]),"item.city":s(({item:r})=>[f("div",Y,[m(z,{class:"d-flex align-center",address:r.address,format:"city"},null,8,["address"])])]),"item.deliveryCarrier":s(({item:r})=>[r.rowType==="b2b"&&r.deliveryCarrier!==void 0?(i(),c(q,{key:0,carrier:r.deliveryCarrier},null,8,["carrier"])):H("",!0)]),"item.actions":s(({item:r})=>[m(I,{partner:r.value,mini:!0},null,8,["partner"]),m(F,{name:r.name,"action-fn":()=>l(t).handle({id:r.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}});export{ie as _};

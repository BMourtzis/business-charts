import{_ as $}from"./PartnerBtn.vue_vue_type_script_setup_true_lang-Do4xGql0.js";import{g as C,_ as I,a as B,c as j,d as H}from"./MovementReasonChip.vue_vue_type_script_setup_true_lang-Cf3gld0z.js";import{g as T}from"./usePartnerDetails-CpwqrI22.js";import{d as h,g as b,C as M,c as A,e as t,l,q as s,B as m,z as r,x as k,y as f,u as o,I as V,o as g,_ as F,G as L,m as D,F as z}from"./index-BTMAe9ol.js";import{g as G,a as x}from"./useUtils-CXifNUXT.js";import{n as P}from"./priceUtils-Dq5SYNCJ.js";const R={class:"mr-2"},S={key:0,class:"text-subtitle-1 text-grey-darken-1 order-details-line"},q={class:"text-subtitle-1 text-grey-darken-1 order-details-line"},E={class:"text-h5 font-weight-bold"},O=h({__name:"MoneyMovementDetailsHeader",props:{moneyMovement:{}},setup(e){const{tCap:n}=b(),a=e,c=M(()=>T(a.moneyMovement.partnerId)),u=C(a.moneyMovement.id,a.moneyMovement.partnerId),_=M(()=>a.moneyMovement.amount-u.value);function v(){return`#${a.moneyMovement.movementNumber}`}return(p,d)=>{const i=l("v-col"),y=l("v-row");return g(),A(V,null,[t(y,{align:"start",justify:"space-between",dense:""},{default:s(()=>[t(i,{cols:"5",class:"d-flex",justify:"start"},{default:s(()=>[m("h1",R,r(v()),1),t(I,{reason:e.moneyMovement.reason,direction:e.moneyMovement.direction,class:"ml-2 mt-2"},null,8,["reason","direction"]),t(B,{method:e.moneyMovement.method,class:"ml-2 mt-2"},null,8,["method"])]),_:1}),t(i,{cols:"1",class:"d-flex flex-row justify-end"})]),_:1}),t(y,{align:"start",justify:"space-between",dense:""},{default:s(()=>[t(i,{cols:"3",class:"text-md-left"},{default:s(()=>[c.value?(g(),A("div",S,[m("strong",null,r(o(n)("partner.customer")),1),d[0]||(d[0]=f(": ",-1)),t($,{partner:c.value},null,8,["partner"])])):k("",!0),m("div",q,[m("strong",null,r(o(n)("moneyMovement.createdDate")),1),f(" : "+r(o(G)(e.moneyMovement.createdDate)),1)])]),_:1}),t(i,{cols:"4",md:"5",class:"text-md-right"},{default:s(()=>[m("span",null,r(o(n)("moneyMovement.amount")),1),m("div",E,r(o(x)(e.moneyMovement.amount)),1),m("div",null,[f(r(o(n)("moneyMovement.allocatedAmount"))+" ",1),m("strong",null,r(o(x)(o(u))),1),f(" Â· "+r(o(n)("moneyMovement.remainingAmount"))+" ",1),m("strong",null,r(o(x)(_.value)),1)])]),_:1})]),_:1})],64)}}}),J=F(O,[["__scopeId","data-v-8445a50c"]]);function K(e){return e.allocations.map(n=>({orderId:e.id,orderNumber:Q(e.orderNumber),amount:P(n.amount),allocatedAt:U(n.allocatedAt)}))}function Q(e){return`#${e}`}function U(e){return e?e.toLocaleDateString():"-"}function W(e){return[{title:e("order.number"),key:"orderNumber",align:"start"},{title:e("order.allocatedAt"),key:"allocatedAt",align:"start"},{title:e("moneyMovement.amount"),key:"amount",align:"start"}]}function X(e){const{tCap:n}=b(),a=M(()=>j(e.value.id,e.value.partnerId).value.flatMap(K)),c=M(()=>W(n));return{data:a,headers:c}}const Y=h({__name:"MoneyMovementDetailsAllocations",props:{moneyMovement:{}},setup(e){const n=z(),{tCap:a}=b(),c=e,{data:u,headers:_}=X(L(c,"moneyMovement"));function v(p,d){n.push(`/order/${d.item.orderId}`)}return(p,d)=>{const i=l("v-card-title"),y=l("v-data-table"),w=l("v-card-text"),N=l("v-card");return g(),D(N,null,{default:s(()=>[t(i,null,{default:s(()=>[f(r(o(a)("order.moneyAllocation",2)),1)]),_:1}),t(w,null,{default:s(()=>[t(y,{headers:o(_),items:o(u),class:"text-start","hide-default-footer":"",density:"comfortable","items-per-page":-1,hover:"","onClick:row":v},null,8,["headers","items"])]),_:1})]),_:1})}}}),re=h({__name:"MoneyMovementDetails",props:{id:{}},setup(e){const n=e,{model:a}=H(n.id);return(c,u)=>{const _=l("v-spacer"),v=l("v-col"),p=l("v-row"),d=l("v-container");return o(a)?(g(),D(d,{key:0},{default:s(()=>[t(J,{"money-movement":o(a)},null,8,["money-movement"]),t(p,{class:"mt-6",align:"start"},{default:s(()=>[t(_),t(v,{cols:"8",lg:"6",xl:"4"},{default:s(()=>[t(Y,{"money-movement":o(a)},null,8,["money-movement"])]),_:1})]),_:1})]),_:1})):k("",!0)}}});export{re as default};

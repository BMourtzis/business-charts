import{a4 as C,ar as m,as as l,ab as v,af as g,at as f,g as w,C as p}from"./index-BegK-sUb.js";var o=(e=>(e.Card="Card",e.Bank="Bank",e.Cash="Cash",e.Online="Online",e.Cheque="Cheque",e))(o||{}),s=(e=>(e.In="In",e.Out="Out",e))(s||{}),c=(e=>(e.CustomerPayment="CustomerPayment",e.CustomerRefund="CustomerRefund",e.SupplierPayment="SupplierPayment",e.SupplierRefund="SupplierRefund",e.Adjustment="Adjustment",e))(c||{});class k{static createPaymentFromOrder(t,r,a,n,i){return t===C.Sales?this.customerPayment(a,r,n,i):this.supplierPayment(a,r,n,i)}static customerPayment(t,r,a,n){return new m(l(),t,r,a,n,s.In,c.CustomerPayment)}static supplierPayment(t,r,a,n){return new m(l(),t,r,a,n,s.Out,c.SupplierPayment)}static customerRefund(t,r,a,n){return new m(l(),t,r,a,n,s.Out,c.CustomerRefund)}}class q{static async getNext(t){const r=new Date().getFullYear()%100,a=await v.load(),n=await g.getById(t);if(!n)throw new Error(`Partner with id:${t} doesn't exist`);const i=a.filter(u=>u.partnerId===t);if(i.length===0)return f.create(r,n.clientNumber,1);const y=i.map(u=>u.sequence).filter(u=>u.year===r).sort((u,d)=>u.format().localeCompare(d.format())).at(-1);if(!y)throw new Error("Error finding the sequence");return f.create(r,n.clientNumber,y.value+1)}}function I(){const{tCap:e}=w();return{paymentMethodTypes:p(()=>h(e)),moneyDirectionTypes:p(()=>b(e)),movementReasonTypes:p(()=>T(e))}}function h(e){return Object.values(o).map(t=>({title:O(t,e),value:t,icon:S(t)}))}function O(e,t){return t(`moneyMovement.${e.toLowerCase()}`)}function S(e){switch(e){case o.Card:return"mdi-credit-card";case o.Bank:return"mdi-bank";case o.Cash:return"mdi-cash";case o.Online:return"mdi-web";case o.Cheque:return"mdi-checkbook"}}function b(e){return Object.values(s).map(t=>({title:M(t,e),value:t,icon:P(t)}))}function M(e,t){return t(`moneyMovement.${e.toLowerCase()}`)}function P(e){switch(e){case s.In:return"mdi-import";case s.Out:return"mdi-export"}}function j(e){switch(e){case s.In:return"green";case s.Out:return"red"}}function T(e){return Object.values(c).map(t=>({title:D(t,e),value:t}))}function D(e,t){return t(`moneyMovement.${e.toLowerCase()}`)}export{s as M,q as a,k as b,c,O as d,P as e,j as f,S as g,D as h,I as u};

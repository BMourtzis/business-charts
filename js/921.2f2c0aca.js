"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[921],{7299:function(e,t,r){r.d(t,{X:function(){return F}});r(8111),r(2489),r(1701);var a=r(6768),n=r(2261),s=r(1176),d=r(2819),i=r(1114),o=r(8114),c=r(7017),l=r(8568),u=r(2496),p=r(676);class m{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=(0,l.j)(e.contactName,e.activity,e.businessName);return e.email&&""!==e.email.trim()&&t.addEmail((0,u.tp)(e.email,!0)),e.phone&&""!==e.phone.trim()&&t.addPhone((0,u.FX)(e.phone,!0)),e.address&&t.addAddress((0,p.F)(e.address.street,e.address.city,e.address.zip,e.address.country,!0)),await c.V.add(t),this._partnersStore.add(d.z.toDTO(t)),t}}var h=r(600);class v{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=(0,h.F)(e.contactName,e.deliveryCarrierId,e.businessName);return e.email&&""!=e.email.trim()&&t.addEmail((0,u.tp)(e.email,!0)),e.phone&&""!=e.phone.trim()&&t.addPhone((0,u.FX)(e.phone,!0)),e.address&&t.addAddress((0,p.F)(e.address.street,e.address.city,e.address.zip,e.address.country,!0)),await c.V.add(t),this._partnersStore.add(d.z.toDTO(t)),t}}class _{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.id);if(t)return t.updateData(e.contactName,e.businessName),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class y{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getSupplierById(e.id);if(t)return t.updateData(e.contactName,e.businessName,e.activity),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class f{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getB2BCustomerById(e.id);if(t)return t.updateData(e.contactName,e.businessName),t.deliveryCarrierId=e.deliveryCarrierId,await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class g{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){await c.V.remove(e.id),this._partnersStore.remove(e.id)}}class w{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(!t)return;const r=(0,u.tp)(e.email,e.isPrimary,e.name);return t.addEmail(r),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class S{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(!t)return;const r=(0,u.tp)(e.email,e.isPrimary,e.name);return t.editEmail(e.emailId,r),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class b{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(t)return t.removeEmail(e.emailId),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class C{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(!t)return;const r=(0,u.FX)(e.phone,e.isPrimary,e.name);return t.addPhone(r),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class I{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(!t)return;const r=(0,u.FX)(e.phone,e.isPrimary,e.name);return t.editPhone(e.phoneId,r),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class k{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(t)return t.removePhone(e.phoneId),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class B{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(!t)return;const r=(0,p.F)(e.street,e.city,e.zip,e.country,e.isPrimary,e.name);return t.addAddress(r),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class V{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(!t)return;const r=(0,p.F)(e.street,e.city,e.zip,e.country,e.isPrimary,e.name);return t.editAddress(e.addressId,r),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}class A{constructor(e=(0,o.g)()){(0,i.A)(this,"_partnersStore",void 0),this._partnersStore=e}async handle(e){const t=await c.V.getById(e.partnerId);if(t)return t.removeAddress(e.addressId),await c.V.update(t),this._partnersStore.update(d.z.toDTO(t)),t}}function F(){const e=(0,o.g)(),{all:t}=(0,n.bP)(e);return{b2bCustomers:(0,a.EW)(()=>t.value.filter(e=>e.type===s.t.B2BCustomer).map(d.z.toModel)),suppliers:(0,a.EW)(()=>t.value.filter(e=>e.type===s.t.Supplier).map(d.z.toModel)),createSupplierCommandHandler:new m(e),createB2BCustomerCommandHandler:new v(e),editSupplierCommandHandler:new y(e),editB2BCustomerCommandHandler:new f(e),editPartnerCommandHandler:new _(e),addEmailCommandHandler:new w(e),editEmailCommandHandler:new S(e),removeEmailCommandHandler:new b(e),addPhoneCommandHandler:new C(e),editPhoneCommandHandler:new I(e),removePhoneCommandHandler:new k(e),addAddressCommandHandler:new B(e),editAddressCommandHandler:new V(e),removeAddressCommandHandler:new A(e),deletePartnerCommandHandler:new g(e)}}},8425:function(e,t,r){r.d(t,{B:function(){return l},x:function(){return c}});r(8111),r(2489),r(1701);var a=r(6252),n=r(2819),s=r(1176),d=r(2844),i=r(8114),o=r(6768);function c(e){const t=(0,d.h)(),r=t.getById(e);if(r)return a.h.toModel(r)}function l(e){const t=(0,i.g)(),r=(0,o.EW)(()=>t.getByType(s.t.B2BCustomer).filter(t=>t.deliveryCarrierId===e).map(n.z.toModel));return{b2bCustomers:r}}},9611:function(e,t,r){r.r(t),r.d(t,{default:function(){return I}});var a=r(6768),n=r(144),s=r(4232),d=r(9605),i=r(8425),o=r(2686),c=r(8512),l=r(7648),u=r(8447),p=r(8571);const m={class:"d-flex justify-space-between align-start flex-wrap"},h={class:"d-flex align-center flex-wrap"},v={class:"text-h4 font-weight-bold mr-2"},_={class:"d-flex align-center mt-2 mt-md-0"};var y=(0,a.pM)({__name:"CarrierHeader",props:{carrier:{}},setup(e){const t=e,{deleteDeliveryCarrierCommandHandler:r}=(0,l.J)(),{tCap:i}=(0,d.S)(),o=(0,c.rd)();function y(){o.back(),r.handle({id:t.carrier.id})}return(t,r)=>{const d=(0,a.g2)("v-chip");return(0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("div",h,[(0,a.Lk)("h1",v,(0,s.v_)(e.carrier.name),1),(0,a.bF)(d,{color:"primary",size:"small"},{default:(0,a.k6)(()=>[(0,a.eW)((0,s.v_)((0,n.R1)(i)("deliveryCarrier.carrier")),1)]),_:1})]),(0,a.Lk)("div",_,[(0,a.bF)(p.A,{carrier:e.carrier,mini:""},null,8,["carrier"]),(0,a.bF)(u.A,{name:e.carrier.name,"action-fn":()=>y(),mini:""},null,8,["name","action-fn"])])])}}});const f=y;var g=f;const w={class:"d-flex align-center justify-space-between w-100"},S={key:0,class:"text-grey text-body-2"};var b=(0,a.pM)({__name:"DeliveryCarrierDetails",props:{id:{}},setup(e){const t=e,{tCap:r}=(0,d.S)(),c=(0,i.x)(t.id),{b2bCustomers:l}=(0,i.B)(t.id);return(e,t)=>{const d=(0,a.g2)("v-chip"),i=(0,a.g2)("v-card-title"),u=(0,a.g2)("v-divider"),p=(0,a.g2)("v-list-item-title"),m=(0,a.g2)("v-list-item-subtitle"),h=(0,a.g2)("v-list-item"),v=(0,a.g2)("v-list"),_=(0,a.g2)("v-card-text"),y=(0,a.g2)("v-card"),f=(0,a.g2)("v-col"),b=(0,a.g2)("v-row"),C=(0,a.g2)("v-container");return(0,n.R1)(c)?((0,a.uX)(),(0,a.Wv)(C,{key:0},{default:(0,a.k6)(()=>[(0,a.bF)(g,{carrier:(0,n.R1)(c)},null,8,["carrier"]),(0,a.bF)(b,{class:"mt-6",align:"start"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{cols:"12",md:"8",xl:"10"},{default:(0,a.k6)(()=>[(0,a.bF)(y,null,{default:(0,a.k6)(()=>[(0,a.bF)(i,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",w,[(0,a.Lk)("span",null,(0,s.v_)((0,n.R1)(r)("partner.b2bCustomer",2)),1),(0,a.bF)(d,{color:"primary",size:"small"},{default:(0,a.k6)(()=>[(0,a.eW)((0,s.v_)((0,n.R1)(l).length),1)]),_:1})])]),_:1}),(0,a.bF)(u),(0,a.bF)(_,null,{default:(0,a.k6)(()=>[0===(0,n.R1)(l).length?((0,a.uX)(),(0,a.CE)("div",S,(0,s.v_)((0,n.R1)(r)("carrier.noB2bUsingCarrier")),1)):((0,a.uX)(),(0,a.Wv)(v,{key:1,lines:"one"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(l),e=>((0,a.uX)(),(0,a.Wv)(h,{key:e.id,to:`/partner/${e.id}`,class:"rounded-lg mb-1","prepend-icon":"mdi-account-briefcase"},{default:(0,a.k6)(()=>[(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.eW)((0,s.v_)(e.businessName),1)]),_:2},1024),(0,a.bF)(m,null,{default:(0,a.k6)(()=>[(0,a.eW)((0,s.v_)(e.contactName),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1}))]),_:1})]),_:1})]),_:1}),(0,a.bF)(f,{cols:"12",md:"4",xl:"2"},{default:(0,a.k6)(()=>[(0,a.bF)(o.A,{"contact-info":(0,n.R1)(c)},null,8,["contact-info"])]),_:1})]),_:1})]),_:1})):(0,a.Q3)("",!0)}}});const C=b;var I=C}}]);
//# sourceMappingURL=921.2f2c0aca.js.map
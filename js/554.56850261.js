"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[554],{4554:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});var l=a(6768),r=a(4232),n=a(144),i=a(6392),s=a(8269),o=a(7299),d=a(6022),u=a(9605),c=a(7648),m=a(8571),p=(0,l.pM)({__name:"AddB2BCustomerModal",setup(e){const{createB2BCustomerCommandHandler:t}=(0,o.X)(),{carriers:a}=(0,c.J)(),{tCap:i}=(0,u.S)(),p=(0,n.Kh)({businessName:"",contactName:"",deliveryCarrierId:"",email:"",phone:"",street:"",city:"",zip:"",country:""}),{dialog:y,formRef:b,validForm:v,loading:f,errorMessage:k,close:g,submit:R}=(0,d.q)(p);function F(e){return{title:e.name,value:e.id,subtitle:e.primaryLocation?.value??""}}async function h(){await R(async e=>{let a={};e.street&&e.city&&(a={id:"",isPrimary:!0,street:e.street,city:e.city,zip:e.zip,country:e.country}),t.handle({contactName:e.contactName,deliveryCarrierId:e.deliveryCarrierId,businessName:e.businessName,email:e.email,phone:e.phone,address:a})})}return(e,t)=>{const o=(0,l.g2)("v-btn"),d=(0,l.g2)("v-text-field"),u=(0,l.g2)("v-col"),c=(0,l.g2)("v-autocomplete"),R=(0,l.g2)("v-row"),_=(0,l.g2)("v-alert"),V=(0,l.g2)("v-container"),C=(0,l.g2)("v-form"),x=(0,l.g2)("v-card-text"),N=(0,l.g2)("v-spacer"),A=(0,l.g2)("v-card-actions"),w=(0,l.g2)("v-card"),U=(0,l.g2)("v-dialog");return(0,l.uX)(),(0,l.Wv)(U,{modelValue:(0,n.R1)(y),"onUpdate:modelValue":t[10]||(t[10]=e=>(0,n.i9)(y)?y.value=e:null),"max-width":"500"},{activator:(0,l.k6)(({props:e})=>[(0,l.bF)(o,(0,l.v6)(e,{color:"indigo",text:(0,n.R1)(i)("partner.addΒ2ΒCustomerTitle"),"prepend-icon":"mdi-plus",variant:"flat"}),null,16,["text"])]),default:(0,l.k6)(()=>[(0,l.bF)(w,{title:(0,n.R1)(i)("partner.addΒ2ΒCustomerTitle")},{default:(0,l.k6)(()=>[(0,l.bF)(x,null,{default:(0,l.k6)(()=>[(0,l.bF)(C,{ref_key:"formRef",ref:b,modelValue:(0,n.R1)(v),"onUpdate:modelValue":t[9]||(t[9]=e=>(0,n.i9)(v)?v.value=e:null)},{default:(0,l.k6)(()=>[(0,l.bF)(V,{class:"pa-0",fluid:""},{default:(0,l.k6)(()=>[(0,l.bF)(R,{dense:""},{default:(0,l.k6)(()=>[(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:p.contactName,"onUpdate:modelValue":t[0]||(t[0]=e=>p.contactName=e),label:(0,n.R1)(i)("partner.contactName"),rules:[(0,n.R1)(s.mw),(0,n.R1)(s.oE)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:p.businessName,"onUpdate:modelValue":t[1]||(t[1]=e=>p.businessName=e),label:(0,n.R1)(i)("partner.businessName"),rules:[(0,n.R1)(s.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(c,{modelValue:p.deliveryCarrierId,"onUpdate:modelValue":t[2]||(t[2]=e=>p.deliveryCarrierId=e),"item-props":F,label:"Carrier",items:(0,n.R1)(a)},{"append-inner":(0,l.k6)(()=>[(0,l.bF)(m.A,{mini:""})]),_:1},8,["modelValue","items"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:p.email,"onUpdate:modelValue":t[3]||(t[3]=e=>p.email=e),label:(0,n.R1)(i)("contact.mainEmailField"),placeholder:"johndoe@gmail.com",type:"email",rules:[(0,n.R1)(s.iK)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:p.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>p.phone=e),label:(0,n.R1)(i)("contact.mainPhoneField"),placeholder:"21080212345",type:"tel",rules:[(0,n.R1)(s.gB)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:p.street,"onUpdate:modelValue":t[5]||(t[5]=e=>p.street=e),label:(0,n.R1)(i)("address.street"),rules:[(0,n.R1)(s.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"8"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:p.city,"onUpdate:modelValue":t[6]||(t[6]=e=>p.city=e),label:(0,n.R1)(i)("address.city"),rules:[(0,n.R1)(s.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"4"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:p.zip,"onUpdate:modelValue":t[7]||(t[7]=e=>p.zip=e),label:(0,n.R1)(i)("address.zip"),rules:[(0,n.R1)(s.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:p.country,"onUpdate:modelValue":t[8]||(t[8]=e=>p.country=e),label:(0,n.R1)(i)("address.country"),rules:[(0,n.R1)(s.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),(0,n.R1)(k)?((0,l.uX)(),(0,l.Wv)(_,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,l.k6)(()=>[(0,l.eW)((0,r.v_)((0,n.R1)(k)),1)]),_:1})):(0,l.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(A,null,{default:(0,l.k6)(()=>[(0,l.bF)(N),(0,l.bF)(o,{variant:"tonal",color:"indigo",text:(0,n.R1)(i)("common.save"),loading:(0,n.R1)(f),disabled:!(0,n.R1)(v)||(0,n.R1)(f),onClick:h},null,8,["text","loading","disabled"]),(0,l.bF)(o,{text:(0,n.R1)(i)("common.cancel"),color:"red",disabled:(0,n.R1)(f),onClick:(0,n.R1)(g)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const y=p;var b=y;const v={class:"d-flex justify-space-between align-center mb-4"},f={class:"text-h6"};var k=(0,l.pM)({__name:"B2BCustomersView",setup(e){const{b2bCustomers:t}=(0,o.X)(),{tCap:a}=(0,u.S)();return(e,s)=>{const o=(0,l.g2)("v-card"),d=(0,l.g2)("v-container");return(0,l.uX)(),(0,l.Wv)(d,{class:"py-6"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{class:"pa-4"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",v,[(0,l.Lk)("h2",f,(0,r.v_)((0,n.R1)(a)("partner.b2bCustomer",2)),1),(0,l.bF)(b)]),(0,l.bF)(i.A,{partners:(0,n.R1)(t)},null,8,["partners"])]),_:1})]),_:1})}}}),g=a(1241);const R=(0,g.A)(k,[["__scopeId","data-v-f300aa20"]]);var F=R},6392:function(e,t,a){a.d(t,{A:function(){return W}});var l=a(6768),r=a(144),n=a(4232),i=a(7299),s=(a(8111),a(1148),a(2489),a(116),a(1701),a(2988)),o=a(8568),d=a(600),u=a(9605),c=a(8425);function m(e){return e.find(e=>e.isPrimary)}function p(e){return e.filter(e=>e.type===s.P.Phone).sort((e,t)=>Number(t.isPrimary)-Number(e.isPrimary)).slice(0,3)}function y(e){const t=p(e.phones),a=m(e.addresses);return{id:e.id,type:e.type,name:e.businessName?`${e.businessName} (${e.contactName})`:e.contactName,city:a?.city,address:a,phones:t,rowType:"partner",value:e}}function b(e){return{...y(e),activity:e.activity,rowType:"supplier"}}function v(e){return{...y(e),deliveryCarrier:(0,c.x)(e.deliveryCarrierId),rowType:"b2b"}}function f(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function k(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.activity"),key:"activity",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function g(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("deliveryCarrier.carrier"),key:"deliveryCarrier",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function R(e){return Array.isArray(e)&&e.every(e=>e instanceof o.P)}function F(e){return Array.isArray(e)&&e.every(e=>e instanceof d.d)}function h(e){const{tCap:t}=(0,u.S)(),a=(0,l.EW)(()=>{const t=e.value??[];return R(t)?t.map(b):F(t)?t.map(v):t.map(y)}),r=(0,l.EW)(()=>{const a=e.value??[];return R(a)?k(t):F(a)?g(t):f(t)});return{data:a,headers:r}}var _=a(8447),V=a(9149),C=a(7286),x=a(3676);const N={class:"d-flex flex-column gap-1"},A={class:"d-flex flex-column gap-1"};var w=(0,l.pM)({__name:"PartnerList",props:{partners:{}},setup(e){const{deletePartnerCommandHandler:t}=(0,i.X)(),a=e,{data:s,headers:o}=h((0,r.lW)(a,"partners"));return(e,a)=>{const i=(0,l.g2)("v-btn"),d=(0,l.g2)("v-data-table");return(0,l.uX)(),(0,l.Wv)(d,{headers:(0,r.R1)(o),items:(0,r.R1)(s),class:"text-start","hide-default-footer":"",density:"comfortable",hover:""},{["item.phones"]:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",N,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.phones,(e,t)=>((0,l.uX)(),(0,l.Wv)(C.A,{key:t,class:"d-flex align-center",phone:e},null,8,["phone"]))),128))])]),["item.address"]:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",A,[(0,l.bF)(x.A,{class:"d-flex align-center",address:e.address,format:"street"},null,8,["address"])])]),["item.deliveryCarrier"]:(0,l.k6)(({item:e})=>["b2b"===e.rowType&&e.deliveryCarrier?((0,l.uX)(),(0,l.Wv)(i,{key:0,variant:"text",to:`/carrier/${e.deliveryCarrier.id}`},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(e.deliveryCarrier.name),1)]),_:2},1032,["to"])):(0,l.Q3)("",!0)]),["item.actions"]:(0,l.k6)(({item:e})=>[(0,l.bF)(i,{color:"primary",variant:"text",density:"compact",icon:"mdi-account-details",to:`/partner/${e.id}`},null,8,["to"]),(0,l.bF)(V.A,{partner:e.value,mini:!0},null,8,["partner"]),(0,l.bF)(_.A,{name:e.name,"action-fn":()=>(0,r.R1)(t).handle({id:e.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}});const U=w;var W=U}}]);
//# sourceMappingURL=554.56850261.js.map
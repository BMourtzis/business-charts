"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[779],{2779:function(t,e,a){a.r(e),a.d(e,{default:function(){return w}});var n=a(6768),r=a(144),s=a(1114);class i{constructor(t){(0,s.A)(this,"fileService",void 0),this.fileService=t}async execute(){await this.fileService.exportAll()}}var c=a(331);class l{constructor(t){(0,s.A)(this,"fileService",void 0),this.fileService=t}async execute(t){await this.fileService.importAll(t),(0,c.Y)()}}a(4603),a(7566),a(8721);var o=a(7017);a(4114),a(8111),a(2489);const u="orders";async function p(){const t=localStorage.getItem(u);return t?JSON.parse(t):[]}async function f(t){localStorage.setItem(u,JSON.stringify(t))}const d={async getAll(){return p()},async saveAll(t){f(t)},async load(){const t=localStorage.getItem(u);if(!t)return[];const e=JSON.parse(t);return e},async add(t){const e=await this.load();e.push(t),localStorage.setItem(u,JSON.stringify(e))},async update(t){const e=await this.load(),a=e.findIndex(e=>e.id===t.id);-1!==a&&(e[a]=t),localStorage.setItem(u,JSON.stringify(e))},async remove(t){const e=await this.load(),a=e.filter(e=>e.id!==t);localStorage.setItem(u,JSON.stringify(a))}};class S{async exportAll(){const t={partners:await o.V.getAll(),orders:await d.getAll()},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=`export-${(new Date).toISOString().slice(0,10)}.json`,n.click(),URL.revokeObjectURL(a)}async importAll(t){const e=await t.text(),a=JSON.parse(e);a.partners&&await o.V.saveAll(a.partners),a.orders&&await d.saveAll(a.orders)}}function g(){const t=new S,e=new i(t),a=new l(t);return{exportData:()=>e.execute(),importData:t=>a.execute(t)}}var h=(0,n.pM)({__name:"DataTransfer",setup(t){const{exportData:e,importData:a}=g();function s(t){const e=t.target.files?.[0];e&&a(e)}return(t,a)=>{const i=(0,n.g2)("v-btn"),c=(0,n.g2)("v-file-input");return(0,n.uX)(),(0,n.CE)(n.FK,null,[a[1]||(a[1]=(0,n.Lk)("h1",null,"Data Transfer",-1)),a[2]||(a[2]=(0,n.Lk)("h2",null,"Export",-1)),(0,n.bF)(i,{color:"warning",onClick:(0,r.R1)(e)},{default:(0,n.k6)(()=>[...a[0]||(a[0]=[(0,n.eW)(" Export JSON ",-1)])]),_:1},8,["onClick"]),a[3]||(a[3]=(0,n.Lk)("h2",null,"Import",-1)),(0,n.bF)(c,{label:"JSON file",type:"file",accept:"application/json",onChange:s})],64)}}});const v=h;var w=v}}]);
//# sourceMappingURL=779.9b853308.js.map
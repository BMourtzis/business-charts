"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[411],{411:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var l=a(6768),r=a(4232),n=a(144),i=a(6392),s=a(7299),o=a(6022),d=a(9605),u=a(7160),c=(0,l.pM)({__name:"AddSupplierModal",setup(e){const{maxLength:t,required:a,emailFormat:i,phoneFormat:c,rangeLength:m}=(0,u.A)(),{createSupplierCommandHandler:p}=(0,s.X)(),{tCap:y}=(0,d.S)(),b=(0,n.Kh)({businessName:"",contactName:"",activity:"",email:"",phone:"",street:"",city:"",zip:"",country:""}),{dialog:v,formRef:f,validForm:k,loading:g,errorMessage:h,close:R,submit:F}=(0,o.q)(b);function _(e){return!((b.city||b.zip||b.country)&&!b.street)||y("validation.streetRequired")}function V(e){return!((b.street||b.zip||b.country)&&!b.city)||y("validation.cityRequired")}async function C(){await F(async e=>{p.handle({contactName:e.contactName,activity:e.activity,businessName:e.businessName,email:e.email,phone:e.phone,address:x(e)})})}function x(e){if(e.street||e.city)return{id:"",isPrimary:!0,street:e.street??"",city:e.city??"",zip:e.zip,country:e.country}}return(e,s)=>{const o=(0,l.g2)("v-btn"),d=(0,l.g2)("v-text-field"),u=(0,l.g2)("v-col"),p=(0,l.g2)("v-row"),F=(0,l.g2)("v-alert"),x=(0,l.g2)("v-container"),N=(0,l.g2)("v-form"),A=(0,l.g2)("v-card-text"),w=(0,l.g2)("v-spacer"),U=(0,l.g2)("v-card-actions"),W=(0,l.g2)("v-card"),P=(0,l.g2)("v-dialog");return(0,l.uX)(),(0,l.Wv)(P,{modelValue:(0,n.R1)(v),"onUpdate:modelValue":s[10]||(s[10]=e=>(0,n.i9)(v)?v.value=e:null),"max-width":"500"},{activator:(0,l.k6)(({props:e})=>[(0,l.bF)(o,(0,l.v6)(e,{color:"indigo",text:(0,n.R1)(y)("partner.addSupplierTitle"),"prepend-icon":"mdi-plus",variant:"flat"}),null,16,["text"])]),default:(0,l.k6)(()=>[(0,l.bF)(W,{title:(0,n.R1)(y)("partner.addSupplierTitle")},{default:(0,l.k6)(()=>[(0,l.bF)(A,null,{default:(0,l.k6)(()=>[(0,l.bF)(N,{ref_key:"formRef",ref:f,modelValue:(0,n.R1)(k),"onUpdate:modelValue":s[9]||(s[9]=e=>(0,n.i9)(k)?k.value=e:null)},{default:(0,l.k6)(()=>[(0,l.bF)(x,{class:"pa-0",fluid:""},{default:(0,l.k6)(()=>[(0,l.bF)(p,{dense:""},{default:(0,l.k6)(()=>[(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.contactName,"onUpdate:modelValue":s[0]||(s[0]=e=>b.contactName=e),label:(0,n.R1)(y)("partner.contactName"),rules:[(0,n.R1)(a),(0,n.R1)(m)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.businessName,"onUpdate:modelValue":s[1]||(s[1]=e=>b.businessName=e),label:(0,n.R1)(y)("partner.businessName"),rules:[(0,n.R1)(t)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.activity,"onUpdate:modelValue":s[2]||(s[2]=e=>b.activity=e),label:(0,n.R1)(y)("partner.activity"),rules:[(0,n.R1)(a),(0,n.R1)(t)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.email,"onUpdate:modelValue":s[3]||(s[3]=e=>b.email=e),label:(0,n.R1)(y)("contact.mainEmailField"),placeholder:"johndoe@gmail.com",type:"email",rules:[(0,n.R1)(i)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.phone,"onUpdate:modelValue":s[4]||(s[4]=e=>b.phone=e),label:(0,n.R1)(y)("contact.mainPhoneField"),placeholder:"21080212345",type:"tel",rules:[(0,n.R1)(c)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.street,"onUpdate:modelValue":s[5]||(s[5]=e=>b.street=e),label:(0,n.R1)(y)("address.street"),rules:[_,(0,n.R1)(t)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"8"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.city,"onUpdate:modelValue":s[6]||(s[6]=e=>b.city=e),label:(0,n.R1)(y)("address.city"),rules:[V,(0,n.R1)(t)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"4"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.zip,"onUpdate:modelValue":s[7]||(s[7]=e=>b.zip=e),label:(0,n.R1)(y)("address.zip"),rules:[(0,n.R1)(t)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(u,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:b.country,"onUpdate:modelValue":s[8]||(s[8]=e=>b.country=e),label:(0,n.R1)(y)("address.country"),rules:[(0,n.R1)(t)(50)]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),(0,n.R1)(h)?((0,l.uX)(),(0,l.Wv)(F,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,l.k6)(()=>[(0,l.eW)((0,r.v_)((0,n.R1)(h)),1)]),_:1})):(0,l.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(U,null,{default:(0,l.k6)(()=>[(0,l.bF)(w),(0,l.bF)(o,{variant:"tonal",color:"indigo",text:(0,n.R1)(y)("common.save"),loading:(0,n.R1)(g),disabled:!(0,n.R1)(k)||(0,n.R1)(g),onClick:C},null,8,["text","loading","disabled"]),(0,l.bF)(o,{text:(0,n.R1)(y)("common.cancel"),color:"red",disabled:(0,n.R1)(g),onClick:(0,n.R1)(R)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const m=c;var p=m;const y={class:"d-flex justify-space-between align-center mb-4"},b={class:"text-h6"};var v=(0,l.pM)({__name:"SuppliersView",setup(e){const{suppliers:t}=(0,s.X)(),{tCap:a}=(0,d.S)();return(e,s)=>{const o=(0,l.g2)("v-card"),d=(0,l.g2)("v-container");return(0,l.uX)(),(0,l.Wv)(d,{class:"py-6"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{class:"pa-4"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",y,[(0,l.Lk)("h2",b,(0,r.v_)((0,n.R1)(a)("partner.supplier",2)),1),(0,l.bF)(p)]),(0,l.bF)(i.A,{partners:(0,n.R1)(t)},null,8,["partners"])]),_:1})]),_:1})}}}),f=a(1241);const k=(0,f.A)(v,[["__scopeId","data-v-50b3e6a6"]]);var g=k},6392:function(e,t,a){a.d(t,{A:function(){return X}});a(4114);var l=a(6768),r=a(144),n=a(5130),i=a(4232),s=a(8512),o=a(7299),d=(a(8111),a(1148),a(2489),a(116),a(1701),a(2988)),u=a(8568),c=a(600),m=a(9605),p=a(8425);function y(e){return e.find(e=>e.isPrimary)}function b(e){return e.filter(e=>e.type===d.P.Phone).sort((e,t)=>Number(t.isPrimary)-Number(e.isPrimary)).slice(0,3)}function v(e){const t=b(e.phones),a=y(e.addresses);return{id:e.id,type:e.type,name:e.businessName?`${e.businessName} (${e.contactName})`:e.contactName,city:a?.city,address:a,phones:t,rowType:"partner",value:e}}function f(e){return{...v(e),activity:e.activity,rowType:"supplier"}}function k(e){return{...v(e),deliveryCarrier:(0,p.x)(e.deliveryCarrierId),rowType:"b2b"}}function g(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function h(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.activity"),key:"activity",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function R(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("deliveryCarrier.carrier"),key:"deliveryCarrier",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function F(e){return Array.isArray(e)&&e.every(e=>e instanceof u.P)}function _(e){return Array.isArray(e)&&e.every(e=>e instanceof c.d)}function V(e){const{tCap:t}=(0,m.S)(),a=(0,l.EW)(()=>{const t=e.value??[];return F(t)?t.map(f):_(t)?t.map(k):t.map(v)}),r=(0,l.EW)(()=>{const a=e.value??[];return F(a)?h(t):_(a)?R(t):g(t)});return{data:a,headers:r}}var C=a(8447),x=a(9149),N=a(7286),A=a(3676);const w={class:"d-flex flex-column gap-1"},U={class:"d-flex flex-column gap-1"};var W=(0,l.pM)({__name:"PartnerList",props:{partners:{}},setup(e){const{deletePartnerCommandHandler:t}=(0,o.X)(),a=(0,s.rd)(),d=e;function u(e,t){a.push(`/partner/${t.item.id}`)}const{data:c,headers:m}=V((0,r.lW)(d,"partners"));return(e,s)=>{const o=(0,l.g2)("v-btn"),d=(0,l.g2)("v-data-table");return(0,l.uX)(),(0,l.Wv)(d,{headers:(0,r.R1)(m),items:(0,r.R1)(c),class:"text-start","hide-default-footer":"",density:"comfortable",hover:"","onClick:row":u},{["item.phones"]:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",w,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.phones,(e,t)=>((0,l.uX)(),(0,l.Wv)(N.A,{key:t,class:"d-flex align-center",phone:e},null,8,["phone"]))),128))])]),["item.address"]:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",U,[(0,l.bF)(A.A,{class:"d-flex align-center",address:e.address,format:"street"},null,8,["address"])])]),["item.deliveryCarrier"]:(0,l.k6)(({item:e})=>["b2b"===e.rowType&&void 0!==e.deliveryCarrier?((0,l.uX)(),(0,l.Wv)(o,{key:0,variant:"text",onClick:(0,n.D$)(()=>(0,r.R1)(a).push(`/carrier/${e.deliveryCarrier?.id}`),["stop"])},{default:(0,l.k6)(()=>[(0,l.eW)((0,i.v_)(e.deliveryCarrier.name),1)]),_:2},1032,["onClick"])):(0,l.Q3)("",!0)]),["item.actions"]:(0,l.k6)(({item:e})=>[(0,l.bF)(x.A,{partner:e.value,mini:!0},null,8,["partner"]),(0,l.bF)(C.A,{name:e.name,"action-fn":()=>(0,r.R1)(t).handle({id:e.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}});const P=W;var X=P}}]);
//# sourceMappingURL=411.c6ac606f.js.map
"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[790],{2790:function(e,a,l){l.r(a),l.d(a,{default:function(){return H}});var t=l(6768),r=l(4232),n=l(144),o=l(9605),i=l(1114);l(4114),l(8111),l(2489);const d="orders";async function u(){const e=localStorage.getItem(d);return e?JSON.parse(e):[]}async function s(e){localStorage.setItem(d,JSON.stringify(e))}const c={async getAll(){return u()},async saveAll(e){s(e)},async load(){const e=localStorage.getItem(d);if(!e)return[];const a=JSON.parse(e);return a},async getById(e){},async add(e){const a=await this.load();a.push(e),localStorage.setItem(d,JSON.stringify(a))},async update(e){const a=await this.load(),l=a.findIndex(a=>a.id===e.id);-1!==l&&(a[l]=e),localStorage.setItem(d,JSON.stringify(a))},async remove(e){const a=await this.load(),l=a.filter(a=>a.id!==e);localStorage.setItem(d,JSON.stringify(l))},async removeAll(){await s([])}};var v=l(7017),m=l(9062),f=l(5922),p=l(1794);class b{constructor(){(0,i.A)(this,"_loadPartnersCommandHandler",void 0),(0,i.A)(this,"_loadDeliveryCarriesCommandHandler",void 0),this._loadPartnersCommandHandler=new m.x,this._loadDeliveryCarriesCommandHandler=new p.n}async handle(e){e.removePartners&&await v.V.removeAll(),e.removeCarriers&&await f.D.removeAll(),e.removeOrders&&await c.removeAll(),e.removePartners&&this._loadPartnersCommandHandler.handle(),e.removeCarriers&&this._loadDeliveryCarriesCommandHandler.handle()}}class _{constructor(e){(0,i.A)(this,"_fileService",void 0),this._fileService=e}async handle(e){await this._fileService.exportAll(e.includePartners,e.includeCarriers,e.includeOrders)}}class y{constructor(e){(0,i.A)(this,"_fileService",void 0),(0,i.A)(this,"_loadPartnersCommandHandler",void 0),(0,i.A)(this,"_loadDeliveryCarriesCommandHandler",void 0),this._fileService=e,this._loadPartnersCommandHandler=new m.x,this._loadDeliveryCarriesCommandHandler=new p.n}async handle(e){await this._fileService.importAll(e.file,e.includePartners,e.includeCarriers,e.includeOrders),e.includePartners&&this._loadPartnersCommandHandler.handle(),e.includeCarriers&&this._loadDeliveryCarriesCommandHandler.handle()}}l(4603),l(7566),l(8721);class g{async exportAll(e,a,l){const t={partners:[],orders:[],carriers:[]};e&&(t.partners=await v.V.getAll()),a&&(t.carriers=await f.D.getAll()),l&&(t.orders=await c.getAll());const r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=`export-${(new Date).toISOString().slice(0,10)}.json`,o.click(),URL.revokeObjectURL(n)}async importAll(e,a,l,t){const r=await e.text(),n=JSON.parse(r);a&&n.partners&&await v.V.saveAll(n.partners),l&&n.orders&&await c.saveAll(n.orders),t&&n.carriers&&await f.D.saveAll(n.carriers)}}function F(){const e=new g;return{exportDataCommandHandler:new _(e),importDataCommandHandler:new y(e),deleteDataCommandHandler:new b}}var k=(0,t.pM)({__name:"ExportData",setup(e){const{exportDataCommandHandler:a}=F(),{tCap:l}=(0,o.S)();let i=(0,n.KR)(!1),d=(0,n.KR)(!1),u=(0,n.KR)(!1);function s(){a.handle({includePartners:i.value,includeCarriers:d.value,includeOrders:u.value})}return(e,a)=>{const o=(0,t.g2)("v-card-title"),c=(0,t.g2)("v-divider"),v=(0,t.g2)("v-switch"),m=(0,t.g2)("v-col"),f=(0,t.g2)("v-row"),p=(0,t.g2)("v-btn"),b=(0,t.g2)("v-card-text"),_=(0,t.g2)("v-card");return(0,t.uX)(),(0,t.Wv)(_,null,{default:(0,t.k6)(()=>[(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.export")),1)]),_:1}),(0,t.bF)(c),(0,t.bF)(b,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(i),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(i)?i.value=e:i=e),label:(0,n.R1)(l)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(m,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(d),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(d)?d.value=e:d=e),label:(0,n.R1)(l)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(m,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(u),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.i9)(u)?u.value=e:u=e),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(f,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{color:"warning",onClick:s},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.exportJson")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}});const R=k;var h=R,w=(0,t.pM)({__name:"ImportData",setup(e){const{importDataCommandHandler:a}=F(),{tCap:l}=(0,o.S)();let i=(0,n.KR)(!1),d=(0,n.KR)(!1),u=(0,n.KR)(!1),s=(0,n.KR)(null);function c(){s.value&&a.handle({file:s.value,includePartners:i.value,includeCarriers:d.value,includeOrders:u.value})}return(e,a)=>{const o=(0,t.g2)("v-card-title"),v=(0,t.g2)("v-divider"),m=(0,t.g2)("v-switch"),f=(0,t.g2)("v-col"),p=(0,t.g2)("v-row"),b=(0,t.g2)("v-file-input"),_=(0,t.g2)("v-btn"),y=(0,t.g2)("v-card-text"),g=(0,t.g2)("v-card");return(0,t.uX)(),(0,t.Wv)(g,null,{default:(0,t.k6)(()=>[(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.import")),1)]),_:1}),(0,t.bF)(v),(0,t.bF)(y,null,{default:(0,t.k6)(()=>[(0,t.bF)(p,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(f,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(i),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(i)?i.value=e:i=e),label:(0,n.R1)(l)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(f,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(d),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(d)?d.value=e:d=e),label:(0,n.R1)(l)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(f,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(u),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.i9)(u)?u.value=e:u=e),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(p,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(b,{modelValue:(0,n.R1)(s),"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.i9)(s)?s.value=e:s=e),label:"JSON file",accept:"application/json"},null,8,["modelValue"])]),_:1}),(0,t.bF)(p,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(_,{color:"primary",disabled:!(0,n.R1)(s),onClick:c},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.importJson")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})}}});const C=w;var V=C,S=l(8447),A=(0,t.pM)({__name:"DeleteData",setup(e){const{deleteDataCommandHandler:a}=F(),{tCap:l}=(0,o.S)();let i=(0,n.KR)(!1),d=(0,n.KR)(!1),u=(0,n.KR)(!1);function s(){a.handle({removePartners:i.value,removeCarriers:d.value,removeOrders:u.value})}return(e,a)=>{const o=(0,t.g2)("v-card-title"),c=(0,t.g2)("v-divider"),v=(0,t.g2)("v-switch"),m=(0,t.g2)("v-col"),f=(0,t.g2)("v-row"),p=(0,t.g2)("v-card-text"),b=(0,t.g2)("v-card");return(0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)(()=>[(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.deleteData")),1)]),_:1}),(0,t.bF)(c),(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(i),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(i)?i.value=e:i=e),label:(0,n.R1)(l)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(m,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(d),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(d)?d.value=e:d=e),label:(0,n.R1)(l)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(m,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(u),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.i9)(u)?u.value=e:u=e),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(f,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(S.A,{name:"All Data","action-fn":s,mini:!1})]),_:1})]),_:1})]),_:1})}}});const x=A;var D=x,O=(0,t.pM)({__name:"DataTransfer",setup(e){const{tCap:a}=(0,o.S)();return(e,l)=>{const o=(0,t.g2)("v-row"),i=(0,t.g2)("v-col");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(o,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.Lk)("h1",null,(0,r.v_)((0,n.R1)(a)("options.dataTransfer")),1)]),_:1}),(0,t.bF)(o,{justify:"center",class:"mt-6"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(h)]),_:1})]),_:1}),(0,t.bF)(o,{justify:"center",class:"mt-6"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(V)]),_:1})]),_:1}),(0,t.bF)(o,{justify:"center",class:"mt-6"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(D)]),_:1})]),_:1})],64)}}});const j=O;var H=j},6022:function(e,a,l){l.d(a,{q:function(){return n}});var t=l(6768),r=l(144);function n(e,a){const l=(0,r.KR)(!1),n=(0,r.KR)(),o=(0,r.KR)(!1),i=(0,r.KR)(!1),d=(0,r.KR)(null),u=a?.autoReset??!0;function s(){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){const l=a;e[l]=""}o.value=!1,n.value?.resetValidation?.(),d.value=null}function c(a){for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const t=l;e[t]=a[t]}}async function v(){let e=!1;if(n.value?.validate&&(e=await n.value.validate()),n.value?.items)for(const a of n.value.items)a.validate?.();return o.value=n.value?.valid??!!e,o.value}function m(){l.value=!1}async function f(a){d.value=null;const l=await v();if(l){i.value=!0;try{await a(e),m()}catch(t){console.error(t);const e=t instanceof Error?t.message:"string"===typeof t?t:String(t);d.value=e||"An unexpected error occurred"}finally{i.value=!1}}}return(0,t.wB)(e,async()=>{l.value&&await v()},{deep:!0}),(0,t.wB)(l,e=>{!e&&u&&s()}),{dialog:l,formRef:n,validForm:o,loading:i,errorMessage:d,submit:f,validate:v,close:m,reset:s,setFormValues:c}}},8447:function(e,a,l){l.d(a,{A:function(){return s}});var t=l(6768),r=l(144),n=l(4232),o=l(6022),i=l(9605),d=(0,t.pM)({__name:"ConfirmDeleteModal",props:{name:{},actionFn:{type:Function},mini:{type:Boolean}},setup(e){const a=e,{tCap:l}=(0,i.S)(),d=(0,r.KR)(),{dialog:u,formRef:s,validForm:c,loading:v,close:m}=(0,o.q)(d);async function f(){v.value=!0,m(),await(0,t.dY)();try{await a.actionFn()}finally{v.value=!1}}return(a,o)=>{const i=(0,t.g2)("v-btn"),d=(0,t.g2)("v-row"),p=(0,t.g2)("v-container"),b=(0,t.g2)("v-form"),_=(0,t.g2)("v-card-text"),y=(0,t.g2)("v-spacer"),g=(0,t.g2)("v-card-actions"),F=(0,t.g2)("v-card"),k=(0,t.g2)("v-dialog");return(0,t.uX)(),(0,t.Wv)(k,{modelValue:(0,r.R1)(u),"onUpdate:modelValue":o[1]||(o[1]=e=>(0,r.i9)(u)?u.value=e:null),"max-width":"500"},{activator:(0,t.k6)(({props:a})=>[e.mini?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(i,(0,t.v6)({key:0},a,{color:"red",text:(0,r.R1)(l)("common.delete"),"prepend-icon":"mdi-trash-can",variant:"flat"}),null,16,["text"])),e.mini?((0,t.uX)(),(0,t.Wv)(i,(0,t.v6)({key:1},a,{color:"red",icon:"mdi-trash-can",variant:"text",density:"compact"}),null,16)):(0,t.Q3)("",!0)]),default:(0,t.k6)(()=>[(0,t.bF)(F,{title:`${(0,r.R1)(l)("common.delete")} ${e.name}`},{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>[(0,t.bF)(b,{ref_key:"formRef",ref:s,modelValue:(0,r.R1)(c),"onUpdate:modelValue":o[0]||(o[0]=e=>(0,r.i9)(c)?c.value=e:null)},{default:(0,t.k6)(()=>[(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.Lk)("h2",null,(0,n.v_)((0,r.R1)(l)("common.confirmDeleteMessage"))+" "+(0,n.v_)(e.name),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(g,null,{default:(0,t.k6)(()=>[(0,t.bF)(y),(0,t.bF)(i,{variant:"tonal",color:"red",text:(0,r.R1)(l)("common.delete"),loading:(0,r.R1)(v),disabled:(0,r.R1)(v),onClick:f},null,8,["text","loading","disabled"]),(0,t.bF)(i,{text:(0,r.R1)(l)("common.cancel"),disabled:(0,r.R1)(v),onClick:(0,r.R1)(m)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const u=d;var s=u}}]);
//# sourceMappingURL=790.c457cde9.js.map
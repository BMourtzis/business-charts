"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[211],{3676:function(e,r,t){t.d(r,{A:function(){return u}});var a=t(6768),n=t(4232);const i={key:0},o=["href"],l={key:0},d={key:1};var s=(0,a.pM)({__name:"AddressLink",props:{address:{},format:{}},setup(e){function r(e){const r=encodeURIComponent(e);return`https://www.google.com/maps/search/?api=1&query=${r}`}return(t,s)=>{const c=(0,a.g2)("v-icon");return e.address?.street?((0,a.uX)(),(0,a.CE)("span",i,[(0,a.bF)(c,{icon:"mdi-map-marker",size:"16",class:"mr-1 text-grey"}),(0,a.Lk)("a",{href:r(e.address.value),target:"_blank",rel:"noopener noreferrer",class:"text-decoration-none text-body-2"},["full"===e.format?((0,a.uX)(),(0,a.CE)("span",l,(0,n.v_)(e.address.value),1)):(0,a.Q3)("",!0),"street"===e.format?((0,a.uX)(),(0,a.CE)("span",d,(0,n.v_)(e.address.street),1)):(0,a.Q3)("",!0)],8,o)])):(0,a.Q3)("",!0)}}});const c=s;var u=c},6022:function(e,r,t){t.d(r,{q:function(){return i}});var a=t(6768),n=t(144);function i(e,r){const t=(0,n.KR)(!1),i=(0,n.KR)(),o=(0,n.KR)(!1),l=(0,n.KR)(!1),d=(0,n.KR)(null),s=r?.autoReset??!0;function c(){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const t=r;e[t]=""}o.value=!1,i.value?.resetValidation?.(),d.value=null}function u(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){const a=t;e[a]=r[a]}}async function m(){const e=await(i.value?.validate?.());return!!e?.valid}function v(){t.value=!1}async function p(r){d.value=null;const t=await m();if(t){l.value=!0;try{await r(e),v()}catch(a){console.error(a);const e=a instanceof Error?a.message:"string"===typeof a?a:String(a);d.value=e||"An unexpected error occurred"}finally{l.value=!1}}}return(0,a.wB)(t,e=>{!e&&s&&c()}),{dialog:t,formRef:i,validForm:o,loading:l,errorMessage:d,submit:p,validate:m,close:v,reset:c,setFormValues:u}}},7286:function(e,r,t){t.d(r,{A:function(){return d}});var a=t(6768),n=t(4232);const i=["href"];var o=(0,a.pM)({__name:"PhoneLink",props:{phone:{}},setup(e){const r=e;return(e,t)=>{const o=(0,a.g2)("v-icon");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(o,{icon:"mdi-phone",size:"16",class:"mr-1 text-grey"}),(0,a.Lk)("a",{href:`tel:${r.phone.value}`,class:"text-decoration-none text-body-2"},(0,n.v_)(r.phone.value),9,i)])}}});const l=o;var d=l},7648:function(e,r,t){t.d(r,{J:function(){return C}});t(8111),t(1701);var a=t(6768),n=t(2261),i=t(6252),o=t(1114),l=t(676),d=t(2844),s=t(5922);class c{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,l.F)(e.street,e.city,e.zip,e.country,e.isPrimary,e.name);return r.addAddress(t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class u{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,l.F)(e.street,e.city,e.zip,e.country,e.isPrimary,e.name);return r.editAddress(e.addressId,t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class m{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(r)return r.removeAddress(e.addressId),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}var v=t(2737);class p{constructor(e=(0,d.h)()){(0,o.A)(this,"_deliveryCarrierStore",void 0),this._deliveryCarrierStore=e}async handle(e){const r=(0,l.F)(e.address.street,e.address.city,e.address.zip,e.address.country,e.address.isPrimary,e.address.name),t=(0,v.B)(e.name,r);return await s.D.add(t),this._deliveryCarrierStore.add(i.i.toDTO(t)),t}}class f{constructor(e=(0,d.h)()){(0,o.A)(this,"_deliveryCarrierStore",void 0),this._deliveryCarrierStore=e}async handle(e){await s.D.remove(e.id),this._deliveryCarrierStore.remove(e.id)}}class y{constructor(e=(0,d.h)()){(0,o.A)(this,"_deliveryCarrierStore",void 0),this._deliveryCarrierStore=e}async handle(e){const r=await s.D.getById(e.id);if(r)return r.name=e.name,await s.D.update(r),this._deliveryCarrierStore.update(i.i.toDTO(r)),r}}var h=t(2496);class _{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,h.tp)(e.email,e.isPrimary,e.name);return r.addEmail(t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class g{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,h.tp)(e.email,e.isPrimary,e.name);return r.editEmail(e.emailId,t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class b{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(r)return r.removeEmail(e.emailId),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class w{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,h.FX)(e.phone,e.isPrimary,e.name);return r.addPhone(t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class R{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,h.FX)(e.phone,e.isPrimary,e.name);return r.editPhone(e.phoneId,t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class k{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(r)return r.removePhone(e.phoneId),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}function C(){const e=(0,d.h)(),{all:r}=(0,n.bP)(e);return{carriers:(0,a.EW)(()=>r.value.map(i.i.toModel)),createDeliveryCarrierCommandHandler:new p(e),editDeliveryCarrierCommandHandler:new y(e),deleteDeliveryCarrierCommandHandler:new f(e),addEmailCommandHandler:new _(e),editEmailCommandHandler:new g(e),removeEmailCommandHandler:new b(e),addPhoneCommandHandler:new w(e),editPhoneCommandHandler:new R(e),removePhoneCommandHandler:new k(e),addAddressCommandHandler:new c(e),editAddressCommandHandler:new u(e),removeAddressCommandHandler:new m(e)}}},8269:function(e,r,t){t.d(r,{Ru:function(){return o},gB:function(){return i},iK:function(){return n},mw:function(){return a},oE:function(){return l}});const a=e=>null!==e&&void 0!==e&&""!==e||"This field is required.",n=e=>{if(null===e||void 0===e)return!0;if("string"===typeof e&&""===e.trim())return!0;const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!!r.test(String(e))||"Please enter a valid email address."},i=e=>{if(null===e||void 0===e)return!0;if("string"===typeof e&&""===e.trim())return!0;const r=/^\+?[1-9]\d{9,14}$/;return!!r.test(String(e))||"Please enter a valid phone number."},o=e=>r=>null===r||void 0===r||("string"===typeof r&&""===r.trim()||("string"===typeof r&&r.length<=e||`Maximum length is ${e} characters.`)),l=(e,r)=>t=>null===t||void 0===t||("string"===typeof t&&""===t.trim()||("string"===typeof t&&t.length>=e&&t.length<=r||`Length must be between ${e} and ${r} characters.`))},8447:function(e,r,t){t.d(r,{A:function(){return c}});var a=t(6768),n=t(144),i=t(4232),o=t(6022),l=t(9605),d=(0,a.pM)({__name:"ConfirmDeleteModal",props:{name:{},actionFn:{type:Function},mini:{type:Boolean}},setup(e){const r=e,{tCap:t}=(0,l.S)(),d=(0,n.KR)(),{dialog:s,formRef:c,validForm:u,loading:m,close:v}=(0,o.q)(d);async function p(){m.value=!0,v(),await(0,a.dY)();try{await r.actionFn()}finally{m.value=!1}}return(r,o)=>{const l=(0,a.g2)("v-btn"),d=(0,a.g2)("v-row"),f=(0,a.g2)("v-container"),y=(0,a.g2)("v-form"),h=(0,a.g2)("v-card-text"),_=(0,a.g2)("v-spacer"),g=(0,a.g2)("v-card-actions"),b=(0,a.g2)("v-card"),w=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(w,{modelValue:(0,n.R1)(s),"onUpdate:modelValue":o[1]||(o[1]=e=>(0,n.i9)(s)?s.value=e:null),"max-width":"500"},{activator:(0,a.k6)(({props:r})=>[e.mini?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,(0,a.v6)({key:0},r,{color:"red",text:(0,n.R1)(t)("common.delete"),"prepend-icon":"mdi-trash-can",variant:"flat"}),null,16,["text"])),e.mini?((0,a.uX)(),(0,a.Wv)(l,(0,a.v6)({key:1},r,{color:"red",icon:"mdi-trash-can",variant:"text",density:"compact"}),null,16)):(0,a.Q3)("",!0)]),default:(0,a.k6)(()=>[(0,a.bF)(b,{title:`${(0,n.R1)(t)("common.delete")} ${e.name}`},{default:(0,a.k6)(()=>[(0,a.bF)(h,null,{default:(0,a.k6)(()=>[(0,a.bF)(y,{ref_key:"formRef",ref:c,modelValue:(0,n.R1)(u),"onUpdate:modelValue":o[0]||(o[0]=e=>(0,n.i9)(u)?u.value=e:null)},{default:(0,a.k6)(()=>[(0,a.bF)(f,null,{default:(0,a.k6)(()=>[(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.Lk)("h2",null,(0,i.v_)((0,n.R1)(t)("common.confirmDeleteMessage"))+" "+(0,i.v_)(e.name),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)(()=>[(0,a.bF)(_),(0,a.bF)(l,{variant:"tonal",color:"red",text:(0,n.R1)(t)("common.delete"),loading:(0,n.R1)(m),disabled:(0,n.R1)(m),onClick:p},null,8,["text","loading","disabled"]),(0,a.bF)(l,{text:(0,n.R1)(t)("common.cancel"),disabled:(0,n.R1)(m),onClick:(0,n.R1)(v)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const s=d;var c=s},8571:function(e,r,t){t.d(r,{A:function(){return v}});var a=t(6768),n=t(144),i=t(4232),o=t(2737),l=t(8269),d=t(9605),s=t(6022),c=t(7648),u=(0,a.pM)({__name:"CarrierModal",props:{carrier:{type:o.n,required:!1,default:null},mini:{type:Boolean,required:!1,default:!1}},setup(e){const{createDeliveryCarrierCommandHandler:r,editDeliveryCarrierCommandHandler:t}=(0,c.J)(),{tCap:o}=(0,d.S)(),u=e,m=(0,a.EW)(()=>!!u.carrier),v=(0,a.EW)(()=>m.value?o("deliveryCarrier.editCarrier"):o("deliveryCarrier.addCarrier")),p=(0,a.EW)(()=>m.value?"mdi-pencil":"mdi-plus"),f=(0,n.Kh)({name:"",street:"",city:"",zip:"",country:""}),{dialog:y,formRef:h,validForm:_,loading:g,errorMessage:b,close:w,submit:R}=(0,s.q)(f);async function k(){await R(async e=>{m.value?await t.handle({id:u.carrier.id,name:e.name}):await r.handle({name:e.name,address:{id:"",isPrimary:!0,street:e.street,city:e.city,zip:e.zip,country:e.country}})})}return(0,a.wB)(y,e=>{e&&u.carrier&&(f.name=u.carrier.name)}),(r,t)=>{const d=(0,a.g2)("v-btn"),s=(0,a.g2)("v-text-field"),c=(0,a.g2)("v-col"),u=(0,a.g2)("v-row"),R=(0,a.g2)("v-alert"),C=(0,a.g2)("v-container"),F=(0,a.g2)("v-form"),S=(0,a.g2)("v-card-text"),D=(0,a.g2)("v-spacer"),V=(0,a.g2)("v-card-actions"),x=(0,a.g2)("v-card"),I=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(I,{modelValue:(0,n.R1)(y),"onUpdate:modelValue":t[6]||(t[6]=e=>(0,n.i9)(y)?y.value=e:null),"max-width":"500"},{activator:(0,a.k6)(({props:r})=>[e.mini?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(d,(0,a.v6)({key:0},r,{color:"indigo",text:v.value,"prepend-icon":p.value,variant:"flat"}),null,16,["text","prepend-icon"])),e.mini?((0,a.uX)(),(0,a.Wv)(d,(0,a.v6)({key:1},r,{color:"surface-variant",icon:p.value,variant:"text",density:"compact"}),null,16,["icon"])):(0,a.Q3)("",!0)]),default:(0,a.k6)(()=>[(0,a.bF)(x,{title:v.value},{default:(0,a.k6)(()=>[(0,a.bF)(S,null,{default:(0,a.k6)(()=>[(0,a.bF)(F,{ref_key:"formRef",ref:h,modelValue:(0,n.R1)(_),"onUpdate:modelValue":t[5]||(t[5]=e=>(0,n.i9)(_)?_.value=e:null)},{default:(0,a.k6)(()=>[(0,a.bF)(C,{class:"pa-0",fluid:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,{dense:""},{default:(0,a.k6)(()=>[(0,a.bF)(c,{cols:"12"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{modelValue:f.name,"onUpdate:modelValue":t[0]||(t[0]=e=>f.name=e),label:(0,n.R1)(o)("common.name"),rules:[(0,n.R1)(l.mw),(0,n.R1)(l.oE)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),m.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(c,{cols:"12"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{modelValue:f.street,"onUpdate:modelValue":t[1]||(t[1]=e=>f.street=e),label:(0,n.R1)(o)("address.street"),rules:[(0,n.R1)(l.mw),(0,n.R1)(l.oE)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,a.bF)(c,{cols:"8"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{modelValue:f.city,"onUpdate:modelValue":t[2]||(t[2]=e=>f.city=e),label:(0,n.R1)(o)("address.city"),rules:[(0,n.R1)(l.mw),(0,n.R1)(l.oE)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,a.bF)(c,{cols:"4"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{modelValue:f.zip,"onUpdate:modelValue":t[3]||(t[3]=e=>f.zip=e),label:(0,n.R1)(o)("address.zip"),rules:[(0,n.R1)(l.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,a.bF)(c,{cols:"12"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{modelValue:f.country,"onUpdate:modelValue":t[4]||(t[4]=e=>f.country=e),label:(0,n.R1)(o)("address.country"),rules:[(0,n.R1)(l.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1})],64))]),_:1}),(0,n.R1)(b)?((0,a.uX)(),(0,a.Wv)(R,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,a.k6)(()=>[(0,a.eW)((0,i.v_)((0,n.R1)(b)),1)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(V,null,{default:(0,a.k6)(()=>[(0,a.bF)(D),(0,a.bF)(d,{variant:"tonal",color:"indigo",text:(0,n.R1)(o)("common.save"),loading:(0,n.R1)(g),disabled:!(0,n.R1)(_)||(0,n.R1)(g),onClick:k},null,8,["text","loading","disabled"]),(0,a.bF)(d,{text:(0,n.R1)(o)("common.cancel"),color:"red",disabled:(0,n.R1)(g),onClick:(0,n.R1)(w)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const m=u;var v=m}}]);
//# sourceMappingURL=211.35d88277.js.map
"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[411],{411:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var l=a(6768),r=a(4232),n=a(144),i=a(6392),s=a(7299),o=a(6022),d=a(9605),u=a(8269),c=(0,l.pM)({__name:"AddSupplierModal",setup(e){const{createSupplierCommandHandler:t}=(0,s.X)(),{tCap:a}=(0,d.S)(),i=(0,n.Kh)({businessName:"",contactName:"",activity:"",email:"",phone:"",street:"",city:"",zip:"",country:""}),{dialog:c,formRef:m,validForm:p,loading:y,errorMessage:b,close:v,submit:f}=(0,o.q)(i);async function k(){await f(async e=>{let a={};e.street&&e.city&&(a={id:"",isPrimary:!0,street:e.street,city:e.city,zip:e.zip,country:e.country}),t.handle({contactName:e.contactName,activity:e.activity,businessName:e.businessName,email:e.email,phone:e.phone,address:a})})}return(e,t)=>{const s=(0,l.g2)("v-btn"),o=(0,l.g2)("v-text-field"),d=(0,l.g2)("v-col"),f=(0,l.g2)("v-row"),g=(0,l.g2)("v-alert"),R=(0,l.g2)("v-container"),h=(0,l.g2)("v-form"),F=(0,l.g2)("v-card-text"),_=(0,l.g2)("v-spacer"),V=(0,l.g2)("v-card-actions"),x=(0,l.g2)("v-card"),C=(0,l.g2)("v-dialog");return(0,l.uX)(),(0,l.Wv)(C,{modelValue:(0,n.R1)(c),"onUpdate:modelValue":t[10]||(t[10]=e=>(0,n.i9)(c)?c.value=e:null),"max-width":"500"},{activator:(0,l.k6)(({props:e})=>[(0,l.bF)(s,(0,l.v6)(e,{color:"indigo",text:(0,n.R1)(a)("partner.addSupplierTitle"),"prepend-icon":"mdi-plus",variant:"flat"}),null,16,["text"])]),default:(0,l.k6)(()=>[(0,l.bF)(x,{title:(0,n.R1)(a)("partner.addSupplierTitle")},{default:(0,l.k6)(()=>[(0,l.bF)(F,null,{default:(0,l.k6)(()=>[(0,l.bF)(h,{ref_key:"formRef",ref:m,modelValue:(0,n.R1)(p),"onUpdate:modelValue":t[9]||(t[9]=e=>(0,n.i9)(p)?p.value=e:null)},{default:(0,l.k6)(()=>[(0,l.bF)(R,{class:"pa-0",fluid:""},{default:(0,l.k6)(()=>[(0,l.bF)(f,{dense:""},{default:(0,l.k6)(()=>[(0,l.bF)(d,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.contactName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.contactName=e),label:(0,n.R1)(a)("partner.contactName"),rules:[(0,n.R1)(u.mw),(0,n.R1)(u.oE)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(d,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.businessName,"onUpdate:modelValue":t[1]||(t[1]=e=>i.businessName=e),label:(0,n.R1)(a)("partner.businessName"),rules:[(0,n.R1)(u.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(d,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.activity,"onUpdate:modelValue":t[2]||(t[2]=e=>i.activity=e),label:(0,n.R1)(a)("partner.activity"),rules:[(0,n.R1)(u.mw),(0,n.R1)(u.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(d,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.email,"onUpdate:modelValue":t[3]||(t[3]=e=>i.email=e),label:(0,n.R1)(a)("contact.mainEmailField"),placeholder:"johndoe@gmail.com",type:"email",rules:[(0,n.R1)(u.iK)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(d,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>i.phone=e),label:(0,n.R1)(a)("contact.mainPhoneField"),placeholder:"21080212345",type:"tel",rules:[(0,n.R1)(u.gB)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(d,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.street,"onUpdate:modelValue":t[5]||(t[5]=e=>i.street=e),label:(0,n.R1)(a)("address.street"),rules:[(0,n.R1)(u.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(d,{cols:"8"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.city,"onUpdate:modelValue":t[6]||(t[6]=e=>i.city=e),label:(0,n.R1)(a)("address.city"),rules:[(0,n.R1)(u.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(d,{cols:"4"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.zip,"onUpdate:modelValue":t[7]||(t[7]=e=>i.zip=e),label:(0,n.R1)(a)("address.zip"),rules:[(0,n.R1)(u.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,l.bF)(d,{cols:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:i.country,"onUpdate:modelValue":t[8]||(t[8]=e=>i.country=e),label:(0,n.R1)(a)("address.country"),rules:[(0,n.R1)(u.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),(0,n.R1)(b)?((0,l.uX)(),(0,l.Wv)(g,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,l.k6)(()=>[(0,l.eW)((0,r.v_)((0,n.R1)(b)),1)]),_:1})):(0,l.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(V,null,{default:(0,l.k6)(()=>[(0,l.bF)(_),(0,l.bF)(s,{variant:"tonal",color:"indigo",text:(0,n.R1)(a)("common.save"),loading:(0,n.R1)(y),disabled:!(0,n.R1)(p)||(0,n.R1)(y),onClick:k},null,8,["text","loading","disabled"]),(0,l.bF)(s,{text:(0,n.R1)(a)("common.cancel"),color:"red",disabled:(0,n.R1)(y),onClick:(0,n.R1)(v)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const m=c;var p=m;const y={class:"d-flex justify-space-between align-center mb-4"},b={class:"text-h6"};var v=(0,l.pM)({__name:"SuppliersView",setup(e){const{suppliers:t}=(0,s.X)(),{tCap:a}=(0,d.S)();return(e,s)=>{const o=(0,l.g2)("v-card"),d=(0,l.g2)("v-container");return(0,l.uX)(),(0,l.Wv)(d,{class:"py-6"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{class:"pa-4"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",y,[(0,l.Lk)("h2",b,(0,r.v_)((0,n.R1)(a)("partner.supplier",2)),1),(0,l.bF)(p)]),(0,l.bF)(i.A,{partners:(0,n.R1)(t)},null,8,["partners"])]),_:1})]),_:1})}}}),f=a(1241);const k=(0,f.A)(v,[["__scopeId","data-v-50b3e6a6"]]);var g=k},6392:function(e,t,a){a.d(t,{A:function(){return W}});var l=a(6768),r=a(144),n=a(4232),i=a(7299),s=(a(8111),a(1148),a(2489),a(116),a(1701),a(2988)),o=a(8568),d=a(600),u=a(9605),c=a(8425);function m(e){return e.find(e=>e.isPrimary)}function p(e){return e.filter(e=>e.type===s.P.Phone).sort((e,t)=>Number(t.isPrimary)-Number(e.isPrimary)).slice(0,3)}function y(e){const t=p(e.phones),a=m(e.addresses);return{id:e.id,type:e.type,name:e.businessName?`${e.businessName} (${e.contactName})`:e.contactName,city:a?.city,address:a,phones:t,rowType:"partner",value:e}}function b(e){return{...y(e),activity:e.activity,rowType:"supplier"}}function v(e){return{...y(e),deliveryCarrier:(0,c.x)(e.deliveryCarrierId),rowType:"b2b"}}function f(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function k(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("partner.activity"),key:"activity",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function g(e){return[{title:e("common.name"),key:"name",align:"start"},{title:e("address.city"),key:"city",align:"start"},{title:e("address.street"),key:"address",align:"start"},{title:e("contact.phone",2),key:"phones",align:"start"},{title:e("deliveryCarrier.carrier"),key:"deliveryCarrier",align:"start"},{title:e("common.action",2),key:"actions",align:"start"}]}function R(e){return Array.isArray(e)&&e.every(e=>e instanceof o.P)}function h(e){return Array.isArray(e)&&e.every(e=>e instanceof d.d)}function F(e){const{tCap:t}=(0,u.S)(),a=(0,l.EW)(()=>{const t=e.value??[];return R(t)?t.map(b):h(t)?t.map(v):t.map(y)}),r=(0,l.EW)(()=>{const a=e.value??[];return R(a)?k(t):h(a)?g(t):f(t)});return{data:a,headers:r}}var _=a(8447),V=a(9149),x=a(7286),C=a(3676);const N={class:"d-flex flex-column gap-1"},w={class:"d-flex flex-column gap-1"};var A=(0,l.pM)({__name:"PartnerList",props:{partners:{}},setup(e){const{deletePartnerCommandHandler:t}=(0,i.X)(),a=e,{data:s,headers:o}=F((0,r.lW)(a,"partners"));return(e,a)=>{const i=(0,l.g2)("v-btn"),d=(0,l.g2)("v-data-table");return(0,l.uX)(),(0,l.Wv)(d,{headers:(0,r.R1)(o),items:(0,r.R1)(s),class:"text-start","hide-default-footer":"",density:"comfortable",hover:""},{["item.phones"]:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",N,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.phones,(e,t)=>((0,l.uX)(),(0,l.Wv)(x.A,{key:t,class:"d-flex align-center",phone:e},null,8,["phone"]))),128))])]),["item.address"]:(0,l.k6)(({item:e})=>[(0,l.Lk)("div",w,[(0,l.bF)(C.A,{class:"d-flex align-center",address:e.address,format:"street"},null,8,["address"])])]),["item.deliveryCarrier"]:(0,l.k6)(({item:e})=>["b2b"===e.rowType&&e.deliveryCarrier?((0,l.uX)(),(0,l.Wv)(i,{key:0,variant:"text",to:`/carrier/${e.deliveryCarrier.id}`},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(e.deliveryCarrier.name),1)]),_:2},1032,["to"])):(0,l.Q3)("",!0)]),["item.actions"]:(0,l.k6)(({item:e})=>[(0,l.bF)(i,{color:"primary",variant:"text",density:"compact",icon:"mdi-account-details",to:`/partner/${e.id}`},null,8,["to"]),(0,l.bF)(V.A,{partner:e.value,mini:!0},null,8,["partner"]),(0,l.bF)(_.A,{name:e.name,"action-fn":()=>(0,r.R1)(t).handle({id:e.id}),mini:!0},null,8,["name","action-fn"])]),_:2},1032,["headers","items"])}}});const U=A;var W=U}}]);
//# sourceMappingURL=411.41a432f5.js.map
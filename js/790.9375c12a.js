"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[790],{2790:function(e,a,l){l.r(a),l.d(a,{default:function(){return U}});var t=l(6768),r=l(4232),n=l(144),o=l(9605),d=l(1114);l(4114),l(8111),l(2489);const i="orders";async function s(){const e=localStorage.getItem(i);return e?JSON.parse(e):[]}async function u(e){localStorage.setItem(i,JSON.stringify(e))}const c={async getAll(){return s()},async saveAll(e){u(e)},async load(){const e=localStorage.getItem(i);if(!e)return[];const a=JSON.parse(e);return a},async getById(e){},async add(e){const a=await this.load();a.push(e),localStorage.setItem(i,JSON.stringify(a))},async update(e){const a=await this.load(),l=a.findIndex(a=>a.id===e.id);-1!==l&&(a[l]=e),localStorage.setItem(i,JSON.stringify(a))},async remove(e){const a=await this.load(),l=a.filter(a=>a.id!==e);localStorage.setItem(i,JSON.stringify(l))},async removeAll(){await u([])}};var m=l(7017),v=l(9062),f=l(5922),p=l(1794),b=l(4891);class _{constructor(){(0,d.A)(this,"_loadPartnersCommandHandler",void 0),(0,d.A)(this,"_loadDeliveryCarriesCommandHandler",void 0),(0,d.A)(this,"_clearStoresCommandHandler",void 0),this._loadPartnersCommandHandler=new v.x,this._loadDeliveryCarriesCommandHandler=new p.n,this._clearStoresCommandHandler=new b.D}async handle(e){e.removePartners&&await m.V.removeAll(),e.removeCarriers&&await f.D.removeAll(),e.removeOrders&&await c.removeAll(),e.removePartners&&await this._loadPartnersCommandHandler.handle(),e.removeCarriers&&await this._loadDeliveryCarriesCommandHandler.handle(),await this._clearStoresCommandHandler.handle(e)}}class F{constructor(e){(0,d.A)(this,"_fileService",void 0),this._fileService=e}async handle(e){await this._fileService.exportAll(e.includePartners,e.includeCarriers,e.includeOrders)}}class g{constructor(e){(0,d.A)(this,"_fileService",void 0),(0,d.A)(this,"_loadPartnersCommandHandler",void 0),(0,d.A)(this,"_loadDeliveryCarriesCommandHandler",void 0),this._fileService=e,this._loadPartnersCommandHandler=new v.x,this._loadDeliveryCarriesCommandHandler=new p.n}async handle(e){await this._fileService.importAll(e.file,e.includePartners,e.includeCarriers,e.includeOrders),e.includePartners&&await this._loadPartnersCommandHandler.handle(),e.includeCarriers&&await this._loadDeliveryCarriesCommandHandler.handle()}}l(4603),l(7566),l(8721);class y{async exportAll(e,a,l){const t={partners:[],orders:[],carriers:[]};e&&(t.partners=await m.V.getAll()),a&&(t.carriers=await f.D.getAll()),l&&(t.orders=await c.getAll());const r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=`export-${(new Date).toISOString().slice(0,10)}.json`,o.click(),URL.revokeObjectURL(n)}async importAll(e,a,l,t){const r=await e.text(),n=JSON.parse(r);a&&n.partners&&await m.V.saveAll(n.partners),l&&n.orders&&await c.saveAll(n.orders),t&&n.carriers&&await f.D.saveAll(n.carriers)}}function k(){const e=new y;return{exportDataCommandHandler:new F(e),importDataCommandHandler:new g(e),deleteDataCommandHandler:new _}}var C=(0,t.pM)({__name:"ExportData",setup(e){const{exportDataCommandHandler:a}=k(),{tCap:l}=(0,o.S)();let d=(0,n.KR)(!1),i=(0,n.KR)(!1),s=(0,n.KR)(!1);function u(){a.handle({includePartners:d.value,includeCarriers:i.value,includeOrders:s.value})}return(e,a)=>{const o=(0,t.g2)("v-card-title"),c=(0,t.g2)("v-divider"),m=(0,t.g2)("v-switch"),v=(0,t.g2)("v-col"),f=(0,t.g2)("v-row"),p=(0,t.g2)("v-btn"),b=(0,t.g2)("v-card-text"),_=(0,t.g2)("v-card");return(0,t.uX)(),(0,t.Wv)(_,null,{default:(0,t.k6)(()=>[(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.export")),1)]),_:1}),(0,t.bF)(c),(0,t.bF)(b,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(d),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(d)?d.value=e:d=e),label:(0,n.R1)(l)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(v,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(i),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(i)?i.value=e:i=e),label:(0,n.R1)(l)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(v,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(s),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.i9)(s)?s.value=e:s=e),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(f,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{color:"warning",onClick:u},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.exportJson")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}});const R=C;var h=R,w=(0,t.pM)({__name:"ImportData",setup(e){const{importDataCommandHandler:a}=k(),{tCap:l}=(0,o.S)();let d=(0,n.KR)(!1),i=(0,n.KR)(!1),s=(0,n.KR)(!1),u=(0,n.KR)(null);function c(){u.value&&a.handle({file:u.value,includePartners:d.value,includeCarriers:i.value,includeOrders:s.value})}return(e,a)=>{const o=(0,t.g2)("v-card-title"),m=(0,t.g2)("v-divider"),v=(0,t.g2)("v-switch"),f=(0,t.g2)("v-col"),p=(0,t.g2)("v-row"),b=(0,t.g2)("v-file-input"),_=(0,t.g2)("v-btn"),F=(0,t.g2)("v-card-text"),g=(0,t.g2)("v-card");return(0,t.uX)(),(0,t.Wv)(g,null,{default:(0,t.k6)(()=>[(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.import")),1)]),_:1}),(0,t.bF)(m),(0,t.bF)(F,null,{default:(0,t.k6)(()=>[(0,t.bF)(p,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(f,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(d),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(d)?d.value=e:d=e),label:(0,n.R1)(l)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(f,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(i),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(i)?i.value=e:i=e),label:(0,n.R1)(l)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(f,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,n.R1)(s),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.i9)(s)?s.value=e:s=e),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(p,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(b,{modelValue:(0,n.R1)(u),"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.i9)(u)?u.value=e:u=e),label:"JSON file",accept:"application/json"},null,8,["modelValue"])]),_:1}),(0,t.bF)(p,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(_,{color:"primary",disabled:!(0,n.R1)(u),onClick:c},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.importJson")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})}}});const V=w;var S=V,A=l(8447),D=(0,t.pM)({__name:"DeleteData",setup(e){const{deleteDataCommandHandler:a}=k(),{tCap:l}=(0,o.S)();let d=(0,n.KR)(!1),i=(0,n.KR)(!1),s=(0,n.KR)(!1);function u(){a.handle({removePartners:d.value,removeCarriers:i.value,removeOrders:s.value})}return(e,a)=>{const o=(0,t.g2)("v-card-title"),c=(0,t.g2)("v-divider"),m=(0,t.g2)("v-switch"),v=(0,t.g2)("v-col"),f=(0,t.g2)("v-row"),p=(0,t.g2)("v-card-text"),b=(0,t.g2)("v-card");return(0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)(()=>[(0,t.bF)(o,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,n.R1)(l)("options.deleteData")),1)]),_:1}),(0,t.bF)(c),(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(d),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(d)?d.value=e:d=e),label:(0,n.R1)(l)("partner.partner",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(v,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(i),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(i)?i.value=e:i=e),label:(0,n.R1)(l)("deliveryCarrier.carrier",2),color:"primary"},null,8,["modelValue","label"])]),_:1}),(0,t.bF)(v,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:(0,n.R1)(s),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.i9)(s)?s.value=e:s=e),label:"Orders",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(f,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(A.A,{name:"All Data","action-fn":u,mini:!1})]),_:1})]),_:1})]),_:1})}}});const x=D;var H=x,O=(0,t.pM)({__name:"DataTransfer",setup(e){const{tCap:a}=(0,o.S)();return(e,l)=>{const o=(0,t.g2)("v-row"),d=(0,t.g2)("v-col");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(o,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.Lk)("h1",null,(0,r.v_)((0,n.R1)(a)("options.dataTransfer")),1)]),_:1}),(0,t.bF)(o,{justify:"center",class:"mt-6"},{default:(0,t.k6)(()=>[(0,t.bF)(d,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(h)]),_:1})]),_:1}),(0,t.bF)(o,{justify:"center",class:"mt-6"},{default:(0,t.k6)(()=>[(0,t.bF)(d,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(S)]),_:1})]),_:1}),(0,t.bF)(o,{justify:"center",class:"mt-6"},{default:(0,t.k6)(()=>[(0,t.bF)(d,{cols:"auto"},{default:(0,t.k6)(()=>[(0,t.bF)(H)]),_:1})]),_:1})],64)}}});const j=O;var U=j},8447:function(e,a,l){l.d(a,{A:function(){return u}});var t=l(6768),r=l(144),n=l(4232),o=l(6022),d=l(9605),i=(0,t.pM)({__name:"ConfirmDeleteModal",props:{name:{},actionFn:{type:Function},mini:{type:Boolean}},setup(e){const a=e,{tCap:l}=(0,d.S)(),i=(0,r.KR)(),{dialog:s,formRef:u,validForm:c,loading:m,close:v}=(0,o.q)(i);async function f(){m.value=!0,v(),await(0,t.dY)();try{await a.actionFn()}finally{m.value=!1}}return(a,o)=>{const d=(0,t.g2)("v-btn"),i=(0,t.g2)("v-row"),p=(0,t.g2)("v-container"),b=(0,t.g2)("v-form"),_=(0,t.g2)("v-card-text"),F=(0,t.g2)("v-spacer"),g=(0,t.g2)("v-card-actions"),y=(0,t.g2)("v-card"),k=(0,t.g2)("v-dialog");return(0,t.uX)(),(0,t.Wv)(k,{modelValue:(0,r.R1)(s),"onUpdate:modelValue":o[1]||(o[1]=e=>(0,r.i9)(s)?s.value=e:null),"max-width":"500"},{activator:(0,t.k6)(({props:a})=>[e.mini?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(d,(0,t.v6)({key:0},a,{color:"red",text:(0,r.R1)(l)("common.delete"),"prepend-icon":"mdi-trash-can",variant:"flat"}),null,16,["text"])),e.mini?((0,t.uX)(),(0,t.Wv)(d,(0,t.v6)({key:1},a,{color:"red",icon:"mdi-trash-can",variant:"text",density:"compact"}),null,16)):(0,t.Q3)("",!0)]),default:(0,t.k6)(()=>[(0,t.bF)(y,{title:`${(0,r.R1)(l)("common.delete")} ${e.name}`},{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>[(0,t.bF)(b,{ref_key:"formRef",ref:u,modelValue:(0,r.R1)(c),"onUpdate:modelValue":o[0]||(o[0]=e=>(0,r.i9)(c)?c.value=e:null)},{default:(0,t.k6)(()=>[(0,t.bF)(p,null,{default:(0,t.k6)(()=>[(0,t.bF)(i,null,{default:(0,t.k6)(()=>[(0,t.Lk)("h2",null,(0,n.v_)((0,r.R1)(l)("common.confirmDeleteMessage"))+" "+(0,n.v_)(e.name),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(g,null,{default:(0,t.k6)(()=>[(0,t.bF)(F),(0,t.bF)(d,{variant:"tonal",color:"red",text:(0,r.R1)(l)("common.delete"),loading:(0,r.R1)(m),disabled:(0,r.R1)(m),onClick:f},null,8,["text","loading","disabled"]),(0,t.bF)(d,{text:(0,r.R1)(l)("common.cancel"),disabled:(0,r.R1)(m),onClick:(0,r.R1)(v)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const s=i;var u=s}}]);
//# sourceMappingURL=790.9375c12a.js.map
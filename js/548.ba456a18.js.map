{"version":3,"file":"js/548.ba456a18.js","mappings":"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","sources":["webpack://business-charts/./src/infrastructure/repositories/orderRepository.local.ts","webpack://business-charts/./src/application/commands/deleteDataCommand.ts","webpack://business-charts/./src/application/commands/exportDataCommand.ts","webpack://business-charts/./src/application/commands/importDataCommand.ts","webpack://business-charts/./src/infrastructure/services/filePersistenceService.ts","webpack://business-charts/./src/presentation/composables/useDataManagement.ts","webpack://business-charts/./src/presentation/views/DataTransfer.vue?4a18","webpack://business-charts/./src/presentation/views/DataTransfer.vue","webpack://business-charts/./src/presentation/views/DataTransfer.vue?23df","webpack://business-charts/./src/presentation/composables/useFormDialog.ts","webpack://business-charts/./src/presentation/components/ConfirmDeleteModal.vue?f891","webpack://business-charts/./src/presentation/components/ConfirmDeleteModal.vue","webpack://business-charts/./src/presentation/components/ConfirmDeleteModal.vue?052a"],"sourcesContent":["import { Order, OrderDTO } from \"@/domain/order/models/order\";\nimport { Repository } from \"./type\";\n\nconst STORAGE_KEY = 'orders';\n\nasync function loadDTOs(): Promise<OrderDTO[]> {\n    const json = localStorage.getItem(STORAGE_KEY);\n    if (!json) return [];\n    return JSON.parse(json);\n}\n\nasync function saveDTOs(dtos: OrderDTO[]): Promise<void> {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(dtos));\n}\n\n//TODO: update this to save with DTO\nexport const orderRepository: Repository<Order, OrderDTO> = {\n    async getAll() {\n        return loadDTOs();\n    },\n    async saveAll(orderDtos) {\n        saveDTOs(orderDtos)\n    },\n    async load() {\n        const json = localStorage.getItem(STORAGE_KEY);\n        if (!json) return [];\n        const plain = JSON.parse(json);\n        return plain;\n    },\n    async getById(id: string) {\n        //TODO: create the OrderMapper to fix this.\n        return undefined;\n    },\n    async add(order) {\n        const all = await this.load();\n        all.push(order);\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(all));\n    },\n\n    async update(order) {\n        const all = await this.load();\n        const i = all.findIndex((o: Order) => o.id === order.id);\n        if (i !== -1) all[i] = order;\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(all));\n    },\n\n    async remove(id) {\n        const all = await this.load();\n        const filtered = all.filter((o: Order) => o.id !== id);\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));\n    },\n    async removeAll() {\n        await saveDTOs([]);\n    }\n};","import { orderRepository } from \"@/infrastructure/repositories/orderRepository.local\";\nimport { partnerRepository } from \"@/infrastructure/repositories/partnerRepository.local\";\nimport { LoadPartnersCommandHandler } from \"./partner/loadPartnersCommand\";\nimport { deliveryCarrierRepository } from \"@/infrastructure/repositories/deliverCarrierRepository.local\";\nimport { LoadDeliveryCarriersCommandHandler } from \"./deliveryCarrier/loadDeliveryCarriersCommand\";\n\nexport interface DeleteDataCommand {\n    removePartners: boolean;\n    removeOrders: boolean;\n}\n\nexport class DeleteDataCommandHandler {\n    private _loadPartnersCommandHandler: LoadPartnersCommandHandler;\n    private _loadDeliveryCarriesCommandHandler: LoadDeliveryCarriersCommandHandler;\n\n    constructor() {\n        this._loadPartnersCommandHandler = new LoadPartnersCommandHandler();\n        this._loadDeliveryCarriesCommandHandler = new LoadDeliveryCarriersCommandHandler();\n    }\n\n    async handle() {\n        await partnerRepository.removeAll();\n        await orderRepository.removeAll();\n        await deliveryCarrierRepository.removeAll();\n\n        this._loadPartnersCommandHandler.handle();\n        this._loadDeliveryCarriesCommandHandler.handle();\n    }\n}","import { FilePersistenceService } from '@/infrastructure/services/filePersistenceService';\n\nexport interface ExportDataCommand {\n    includePartners: boolean;\n    includeCarriers: boolean;\n    includeOrders: boolean;\n}\n\nexport class ExportDataCommandHandler {\n    private _fileService: FilePersistenceService;\n\n    constructor(fileService: FilePersistenceService) {\n        this._fileService = fileService;\n    }\n\n    async handle(cmd: ExportDataCommand) {\n        await this._fileService.exportAll(\n            cmd.includePartners,\n            cmd.includeCarriers,\n            cmd.includeOrders\n        );\n    }\n}","import { FilePersistenceService } from '@/infrastructure/services/filePersistenceService';\nimport { LoadPartnersCommandHandler } from './partner/loadPartnersCommand';\nimport { LoadDeliveryCarriersCommandHandler } from './deliveryCarrier/loadDeliveryCarriersCommand';\n\nexport interface ImportDataCommand {\n    file: File\n}\n\nexport class ImportDataCommandHandler {\n    private _fileService: FilePersistenceService;\n    private _loadPartnersCommandHandler: LoadPartnersCommandHandler;\n    private _loadDeliveryCarriesCommandHandler: LoadDeliveryCarriersCommandHandler;\n\n    constructor(fileService: FilePersistenceService) {\n        this._fileService = fileService;\n        this._loadPartnersCommandHandler = new LoadPartnersCommandHandler();\n        this._loadDeliveryCarriesCommandHandler = new LoadDeliveryCarriersCommandHandler();\n        \n    }\n\n    async handle(cmd: ImportDataCommand) {\n        await this._fileService.importAll(cmd.file);\n\n        this._loadPartnersCommandHandler.handle();\n         this._loadDeliveryCarriesCommandHandler.handle();\n    }\n}","import { partnerRepository } from '@/infrastructure/repositories/partnerRepository.local';\nimport { orderRepository } from '@/infrastructure/repositories/orderRepository.local';\nimport { PartnerDTO } from '@/application/dto/partnerDTO';\nimport { OrderDTO } from '@/domain/order/models/order';\nimport { DeliveryCarrierDTO } from '@/application/dto/deliveryCarrierDTO';\nimport { deliveryCarrierRepository } from '../repositories/deliverCarrierRepository.local';\n\nexport class FilePersistenceService {\n    async exportAll(includePartners: boolean, includeCarriers: boolean, includeOrders: boolean) {\n        const data = {\n            partners: [] as PartnerDTO[],\n            orders: [] as OrderDTO[],\n            carriers: [] as DeliveryCarrierDTO[],\n        }\n\n        if(includePartners) {\n            data.partners = await partnerRepository.getAll();\n        }\n\n        if(includeCarriers) {\n            data.carriers = await deliveryCarrierRepository.getAll();\n        }\n\n        if(includeOrders) {\n            data.orders = await orderRepository.getAll();\n        }\n\n        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })\n        const url = URL.createObjectURL(blob)\n        const a = document.createElement('a')\n        a.href = url\n        a.download = `export-${new Date().toISOString().slice(0, 10)}.json`\n        a.click()\n        URL.revokeObjectURL(url)\n    }\n\n    async importAll(file: File) {\n        const text = await file.text();\n        const data = JSON.parse(text);\n\n        if (data.partners) {\n            await partnerRepository.saveAll(data.partners);\n        }\n\n        if (data.orders) {\n            await orderRepository.saveAll(data.orders);\n        }\n\n        if(data.carriers) {\n            await deliveryCarrierRepository.saveAll(data.carriers);\n        }\n    }\n}","import { DeleteDataCommandHandler } from '@/application/commands/deleteDataCommand';\nimport { ExportDataCommandHandler } from '@/application/commands/exportDataCommand';\nimport { ImportDataCommandHandler } from '@/application/commands/importDataCommand';\nimport { FilePersistenceService } from '@/infrastructure/services/filePersistenceService';\n\nexport function useDataManagement() {\n    const filePersistenceService = new FilePersistenceService();\n    \n    return { \n        exportDataCommandHandler: new ExportDataCommandHandler(filePersistenceService), \n        importDataCommandHandler: new ImportDataCommandHandler(filePersistenceService),\n        deleteDataCommandHandler: new DeleteDataCommandHandler()\n    };\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport ConfirmDeleteModal from '@/presentation/components/ConfirmDeleteModal.vue';\nimport { useDataManagement } from '@/presentation/composables/useDataManagement';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DataTransfer',\n  setup(__props) {\n\nconst { exportDataCommandHandler, importDataCommandHandler, deleteDataCommandHandler } = useDataManagement()\n\nfunction onImport(e: Event) {\n    const file = (e.target as HTMLInputElement).files?.[0]\n    if (file) importDataCommandHandler.handle({file})\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_file_input = _resolveComponent(\"v-file-input\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _cache[1] || (_cache[1] = _createElementVNode(\"h1\", null, \"Data Transfer\", -1)),\n    _cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"Export\", -1)),\n    _createVNode(_component_v_btn, {\n      color: \"warning\",\n      onClick: _unref(exportDataCommandHandler).handle\n    }, {\n      default: _withCtx(() => [...(_cache[0] || (_cache[0] = [\n        _createTextVNode(\" Export JSON \", -1)\n      ]))]),\n      _: 1\n    }, 8, [\"onClick\"]),\n    _cache[3] || (_cache[3] = _createElementVNode(\"h2\", null, \"Import\", -1)),\n    _createVNode(_component_v_file_input, {\n      label: \"JSON file\",\n      type: \"file\",\n      accept: \"application/json\",\n      onChange: onImport\n    }),\n    _cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"Delete all data\", -1)),\n    _createVNode(ConfirmDeleteModal, {\n      name: \"All Data\",\n      \"action-fn\": _unref(deleteDataCommandHandler).handle,\n      mini: false\n    }, null, 8, [\"action-fn\"])\n  ], 64))\n}\n}\n\n})","<template>\n  <h1>Data Transfer</h1>\n  <h2>Export</h2>\n  <v-btn \n    color=\"warning\"\n    @click=\"exportDataCommandHandler.handle\"\n  >\n    Export JSON\n  </v-btn>\n  <h2>Import</h2>\n  <v-file-input\n    label=\"JSON file\"\n    type=\"file\"\n    accept=\"application/json\"\n    @change=\"onImport\" \n  />\n  <h2>Delete all data</h2>\n  <ConfirmDeleteModal\n    name=\"All Data\"\n    :action-fn=\"deleteDataCommandHandler.handle\"\n    :mini=\"false\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport ConfirmDeleteModal from '@/presentation/components/ConfirmDeleteModal.vue';\nimport { useDataManagement } from '@/presentation/composables/useDataManagement';\n\nconst { exportDataCommandHandler, importDataCommandHandler, deleteDataCommandHandler } = useDataManagement()\n\nfunction onImport(e: Event) {\n    const file = (e.target as HTMLInputElement).files?.[0]\n    if (file) importDataCommandHandler.handle({file})\n}\n</script>\n\n<style scoped></style>s","import script from \"./DataTransfer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DataTransfer.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { ref, watch } from 'vue';\n\nexport function useFormDialog<T extends object>(form: T, options?: { autoReset?: boolean }) {\n  const dialog = ref(false);\n  const formRef = ref();\n  const validForm = ref(false);\n  const loading = ref(false);\n  const errorMessage = ref<string | null>(null);\n\n  const autoReset = options?.autoReset ?? true;\n\n  function reset() {\n    for (const key in form) {\n      if (Object.prototype.hasOwnProperty.call(form, key)) {\n        const k = key as keyof T;\n        (form as T)[k] = '' as unknown as T[keyof T];\n      }\n    }\n    validForm.value = false;\n    formRef.value?.resetValidation?.();\n    errorMessage.value = null;\n  }\n\n  function setFormValues(values: Partial<T>) {\n    for (const key in values) {\n      if (Object.prototype.hasOwnProperty.call(values, key)) {\n        const k = key as keyof T;\n        (form as T)[k] = (values as Partial<T>)[k] as T[keyof T];\n      }\n    }\n  }\n\n  async function validate(): Promise<boolean> {\n    const result = await formRef.value?.validate?.();\n    return !!result?.valid;\n  }\n\n  function close() {\n    dialog.value = false;\n  }\n\n  async function submit(action: (form: T) => Promise<void> | void) {\n    errorMessage.value = null;\n    const isValid = await validate();\n    if (!isValid) return;\n\n    loading.value = true;\n    try {\n      await action(form);\n      close();\n    } catch (err: unknown) {\n      console.error(err);\n      const message = err instanceof Error ? err.message : typeof err === 'string' ? err : String(err);\n      errorMessage.value = message || 'An unexpected error occurred';\n    } finally {\n      loading.value = false;\n    }\n  }\n\n  watch(dialog, (open) => {\n    if (!open && autoReset) reset();\n  });\n\n  return {\n    dialog,\n    formRef,\n    validForm,\n    loading,\n    errorMessage,\n    submit,\n    validate,\n    close,\n    reset,\n    setFormValues\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, mergeProps as _mergeProps, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, isRef as _isRef } from \"vue\"\n\nimport { ref, nextTick } from 'vue';\n\nimport { useFormDialog } from '@/presentation/composables/useFormDialog';\nimport { useLocalizationHelpers } from '@/presentation/composables/useLocalization';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ConfirmDeleteModal',\n  props: {\n    name: {},\n    actionFn: { type: Function },\n    mini: { type: Boolean }\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\nconst { tCap } = useLocalizationHelpers();\n\nconst form = ref();\n\nconst {\n  dialog,\n  formRef,\n  validForm,\n  loading,\n  close,\n} = useFormDialog(form); \n\nasync function confirmAction() {\n  loading.value = true;\n  close();\n  await nextTick();\n  try {\n    await props.actionFn();\n  } finally {\n    loading.value = false;\n  }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_v_container = _resolveComponent(\"v-container\")!\n  const _component_v_form = _resolveComponent(\"v-form\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    modelValue: _unref(dialog),\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (_isRef(dialog) ? (dialog).value = $event : null)),\n    \"max-width\": \"500\"\n  }, {\n    activator: _withCtx(({ props: activatorProps }) => [\n      (!__props.mini)\n        ? (_openBlock(), _createBlock(_component_v_btn, _mergeProps({ key: 0 }, activatorProps, {\n            color: \"red\",\n            text: _unref(tCap)('common.delete'),\n            \"prepend-icon\": \"mdi-trash-can\",\n            variant: \"flat\"\n          }), null, 16, [\"text\"]))\n        : _createCommentVNode(\"\", true),\n      (__props.mini)\n        ? (_openBlock(), _createBlock(_component_v_btn, _mergeProps({ key: 1 }, activatorProps, {\n            color: \"red\",\n            icon: \"mdi-trash-can\",\n            variant: \"text\",\n            density: \"compact\"\n          }), null, 16))\n        : _createCommentVNode(\"\", true)\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_component_v_card, {\n        title: `${_unref(tCap)('common.delete')} ${__props.name}`\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_card_text, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_form, {\n                ref_key: \"formRef\",\n                ref: formRef,\n                modelValue: _unref(validForm),\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(validForm) ? (validForm).value = $event : null))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_container, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_row, null, {\n                        default: _withCtx(() => [\n                          _createElementVNode(\"h2\", null, _toDisplayString(_unref(tCap)('common.confirmDeleteMessage')) + \" \" + _toDisplayString(__props.name), 1)\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_card_actions, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_spacer),\n              _createVNode(_component_v_btn, {\n                variant: \"tonal\",\n                color: \"red\",\n                text: _unref(tCap)('common.delete'),\n                loading: _unref(loading),\n                disabled: _unref(loading),\n                onClick: confirmAction\n              }, null, 8, [\"text\", \"loading\", \"disabled\"]),\n              _createVNode(_component_v_btn, {\n                text: _unref(tCap)('common.cancel'),\n                disabled: _unref(loading),\n                onClick: _unref(close)\n              }, null, 8, [\"text\", \"disabled\", \"onClick\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"title\"])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\n  <v-dialog \n    v-model=\"dialog\" \n    max-width=\"500\"\n  >\n    <template #activator=\"{ props: activatorProps }\">\n      <v-btn\n        v-if=\"!mini\"\n        v-bind=\"activatorProps\"\n        color=\"red\"\n        :text=\"tCap('common.delete')\"\n        prepend-icon=\"mdi-trash-can\"\n        variant=\"flat\"\n      />\n      <v-btn\n        v-if=\"mini\"\n        v-bind=\"activatorProps\"\n        color=\"red\"\n        icon=\"mdi-trash-can\"\n        variant=\"text\"\n        density=\"compact\"\n      />\n    </template>\n\n    <v-card :title=\"`${tCap('common.delete')} ${name}`\">\n      <v-card-text>\n        <v-form \n          ref=\"formRef\" \n          v-model=\"validForm\"\n        >\n          <v-container>\n            <v-row>\n              <h2>{{ tCap('common.confirmDeleteMessage') }} {{ name }}</h2>\n            </v-row>\n          </v-container>\n        </v-form>\n      </v-card-text>\n\n      <v-card-actions>\n        <v-spacer />\n        <v-btn\n          variant=\"tonal\"\n          color=\"red\"\n          :text=\"tCap('common.delete')\"\n          :loading=\"loading\"\n          :disabled=\"loading\"\n          @click=\"confirmAction\"\n        />\n        <v-btn\n          :text=\"tCap('common.cancel')\"\n          :disabled=\"loading\"\n          @click=\"close\"\n        />\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, defineProps, nextTick } from 'vue';\n\nimport { useFormDialog } from '@/presentation/composables/useFormDialog';\nimport { useLocalizationHelpers } from '@/presentation/composables/useLocalization';\n\nconst props = defineProps<{\n  name: string;\n  actionFn: () => void;\n  mini: boolean;\n}>();\n\nconst { tCap } = useLocalizationHelpers();\n\nconst form = ref();\n\nconst {\n  dialog,\n  formRef,\n  validForm,\n  loading,\n  close,\n} = useFormDialog(form); \n\nasync function confirmAction() {\n  loading.value = true;\n  close();\n  await nextTick();\n  try {\n    await props.actionFn();\n  } finally {\n    loading.value = false;\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n</style>","import script from \"./ConfirmDeleteModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ConfirmDeleteModal.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["STORAGE_KEY","async","loadDTOs","json","localStorage","getItem","JSON","parse","saveDTOs","dtos","setItem","stringify","orderRepository","getAll","saveAll","orderDtos","load","plain","getById","id","add","order","all","this","push","update","i","findIndex","o","remove","filtered","filter","removeAll","DeleteDataCommandHandler","constructor","_defineProperty","_loadPartnersCommandHandler","LoadPartnersCommandHandler","_loadDeliveryCarriesCommandHandler","LoadDeliveryCarriersCommandHandler","handle","partnerRepository","deliveryCarrierRepository","ExportDataCommandHandler","fileService","_fileService","cmd","exportAll","includePartners","includeCarriers","includeOrders","ImportDataCommandHandler","importAll","file","FilePersistenceService","data","partners","orders","carriers","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","Date","toISOString","slice","click","revokeObjectURL","text","useDataManagement","filePersistenceService","exportDataCommandHandler","importDataCommandHandler","deleteDataCommandHandler","_defineComponent","__name","setup","__props","onImport","e","target","files","_ctx","_cache","_component_v_btn","_resolveComponent","_component_v_file_input","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","color","onClick","_unref","default","_withCtx","_createTextVNode","_","label","accept","onChange","ConfirmDeleteModal","name","mini","__exports__","useFormDialog","form","options","dialog","ref","formRef","validForm","loading","errorMessage","autoReset","reset","key","Object","prototype","hasOwnProperty","call","k","value","resetValidation","setFormValues","values","validate","result","valid","close","submit","action","isValid","err","console","error","message","Error","String","watch","open","props","actionFn","Function","Boolean","tCap","useLocalizationHelpers","confirmAction","nextTick","_component_v_row","_component_v_container","_component_v_form","_component_v_card_text","_component_v_spacer","_component_v_card_actions","_component_v_card","_component_v_dialog","_createBlock","modelValue","$event","_isRef","activator","activatorProps","_createCommentVNode","_mergeProps","variant","icon","density","title","ref_key","_toDisplayString","disabled"],"sourceRoot":""}
"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[211],{3676:function(e,r,t){t.d(r,{A:function(){return m}});var a=t(6768),n=t(5130),i=t(4232);const o={key:0},l=["href"],d={key:0},s={key:1};var u=(0,a.pM)({__name:"AddressLink",props:{address:{},format:{}},setup(e){function r(e){const r=encodeURIComponent(e);return`https://www.google.com/maps/search/?api=1&query=${r}`}return(t,u)=>{const c=(0,a.g2)("v-icon");return e.address?.street?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(c,{icon:"mdi-map-marker",size:"16",class:"mr-1 text-grey"}),(0,a.Lk)("a",{href:r(e.address.value),target:"_blank",rel:"noopener noreferrer",class:"text-decoration-none text-body-2",onClick:u[0]||(u[0]=(0,n.D$)(()=>{},["stop"]))},["full"===e.format?((0,a.uX)(),(0,a.CE)("span",d,(0,i.v_)(e.address.value),1)):(0,a.Q3)("",!0),"street"===e.format?((0,a.uX)(),(0,a.CE)("span",s,(0,i.v_)(e.address.street),1)):(0,a.Q3)("",!0)],8,l)])):(0,a.Q3)("",!0)}}});const c=u;var m=c},6022:function(e,r,t){t.d(r,{q:function(){return i}});var a=t(6768),n=t(144);function i(e,r){const t=(0,n.KR)(!1),i=(0,n.KR)(),o=(0,n.KR)(!1),l=(0,n.KR)(!1),d=(0,n.KR)(null),s=r?.autoReset??!0;function u(){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const t=r;e[t]=""}o.value=!1,i.value?.resetValidation?.(),d.value=null}function c(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){const a=t;e[a]=r[a]}}async function m(){let e=!1;if(i.value?.validate&&(e=await i.value.validate()),i.value?.items)for(const r of i.value.items)r.validate?.();return o.value=i.value?.valid??!!e,o.value}function v(){t.value=!1}async function p(r){d.value=null;const t=await m();if(t){l.value=!0;try{await r(e),v()}catch(a){console.error(a);const e=a instanceof Error?a.message:"string"===typeof a?a:String(a);d.value=e||"An unexpected error occurred"}finally{l.value=!1}}}return(0,a.wB)(e,async()=>{t.value&&await m()},{deep:!0}),(0,a.wB)(t,e=>{!e&&s&&u()}),{dialog:t,formRef:i,validForm:o,loading:l,errorMessage:d,submit:p,validate:m,close:v,reset:u,setFormValues:c}}},7160:function(e,r,t){t.d(r,{A:function(){return n}});var a=t(9605);function n(){const{tCap:e}=(0,a.S)(),r=r=>null!==r&&void 0!==r&&""!==r||e("validation.required"),t=r=>{if(null===r||void 0===r||"string"===typeof r&&""===r.trim())return!0;const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!!t.test(String(r))||e("validation.invalidEmail")},n=r=>{if(null===r||void 0===r||"string"===typeof r&&""===r.trim())return!0;const t=/^\+?[1-9]\d{9,14}$/;return!!t.test(String(r))||e("validation.invalidPhone")},i=r=>t=>null===t||void 0===t||"string"===typeof t&&""===t.trim()||("string"===typeof t&&t.length>=r||e("validation.minLength",1,{min:r})),o=r=>t=>null===t||void 0===t||"string"===typeof t&&""===t.trim()||("string"===typeof t&&t.length<=r||e("validation.maxLength",1,{max:r})),l=(r,t)=>a=>null===a||void 0===a||"string"===typeof a&&""===a.trim()||("string"===typeof a&&a.length>=r&&a.length<=t||e("validation.rangeLength",1,{min:r,max:t})),d=r=>null===r||void 0===r||"string"===typeof r&&""===r.trim()||(!(isNaN(parseFloat(String(r)))||!isFinite(Number(r)))||e("validation.numeric")),s=r=>null===r||void 0===r||"string"===typeof r&&""===r.trim()||(!!Number.isInteger(Number(r))||e("validation.integer")),u=r=>null===r||void 0===r||"string"===typeof r&&""===r.trim()||("number"===typeof r&&r>0||e("validation.positiveNumber")),c=r=>null===r||void 0===r||"string"===typeof r&&""===r.trim()||("number"===typeof r&&r<0||e("validation.negativeNumber"));return{required:r,emailFormat:t,phoneFormat:n,minLength:i,maxLength:o,rangeLength:l,numeric:d,integer:s,positiveNumber:u,negativeNumber:c}}},7286:function(e,r,t){t.d(r,{A:function(){return s}});var a=t(6768),n=t(5130),i=t(4232);const o=["href"];var l=(0,a.pM)({__name:"PhoneLink",props:{phone:{}},setup(e){const r=e;return(e,t)=>{const l=(0,a.g2)("v-icon");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(l,{icon:"mdi-phone",size:"16",class:"mr-1 text-grey"}),(0,a.Lk)("a",{href:`tel:${r.phone.value}`,class:"text-decoration-none text-body-2",onClick:t[0]||(t[0]=(0,n.D$)(()=>{},["stop"]))},(0,i.v_)(r.phone.value),9,o)])}}});const d=l;var s=d},7648:function(e,r,t){t.d(r,{J:function(){return R}});t(8111),t(1701);var a=t(6768),n=t(2261),i=t(6252),o=t(1114),l=t(676),d=t(2844),s=t(5922);class u{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,l.F)(e.street,e.city,e.zip,e.country,e.isPrimary,e.name);return r.addAddress(t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class c{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,l.F)(e.street,e.city,e.zip,e.country,e.isPrimary,e.name);return r.editAddress(e.addressId,t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class m{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(r)return r.removeAddress(e.addressId),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}var v=t(2737);class p{constructor(e=(0,d.h)()){(0,o.A)(this,"_deliveryCarrierStore",void 0),this._deliveryCarrierStore=e}async handle(e){const r=(0,l.F)(e.address.street,e.address.city,e.address.zip,e.address.country,e.address.isPrimary,e.address.name),t=(0,v.B)(e.name,r);return await s.D.add(t),this._deliveryCarrierStore.add(i.i.toDTO(t)),t}}class f{constructor(e=(0,d.h)()){(0,o.A)(this,"_deliveryCarrierStore",void 0),this._deliveryCarrierStore=e}async handle(e){await s.D.remove(e.id),this._deliveryCarrierStore.remove(e.id)}}class y{constructor(e=(0,d.h)()){(0,o.A)(this,"_deliveryCarrierStore",void 0),this._deliveryCarrierStore=e}async handle(e){const r=await s.D.getById(e.id);if(r)return r.name=e.name,await s.D.update(r),this._deliveryCarrierStore.update(i.i.toDTO(r)),r}}var h=t(2496);class g{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,h.tp)(e.email,e.isPrimary,e.name);return r.addEmail(t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class _{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,h.tp)(e.email,e.isPrimary,e.name);return r.editEmail(e.emailId,t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class b{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(r)return r.removeEmail(e.emailId),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class w{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,h.FX)(e.phone,e.isPrimary,e.name);return r.addPhone(t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class C{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(!r)return;const t=(0,h.FX)(e.phone,e.isPrimary,e.name);return r.editPhone(e.phoneId,t),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}class k{constructor(e=(0,d.h)()){(0,o.A)(this,"_carrierStore",void 0),this._carrierStore=e}async handle(e){const r=await s.D.getById(e.carrierId);if(r)return r.removePhone(e.phoneId),await s.D.update(r),this._carrierStore.update(i.i.toDTO(r)),r}}function R(){const e=(0,d.h)(),{all:r}=(0,n.bP)(e);return{carriers:(0,a.EW)(()=>r.value.map(i.i.toModel)),createDeliveryCarrierCommandHandler:new p(e),editDeliveryCarrierCommandHandler:new y(e),deleteDeliveryCarrierCommandHandler:new f(e),addEmailCommandHandler:new g(e),editEmailCommandHandler:new _(e),removeEmailCommandHandler:new b(e),addPhoneCommandHandler:new w(e),editPhoneCommandHandler:new C(e),removePhoneCommandHandler:new k(e),addAddressCommandHandler:new u(e),editAddressCommandHandler:new c(e),removeAddressCommandHandler:new m(e)}}},8447:function(e,r,t){t.d(r,{A:function(){return u}});var a=t(6768),n=t(144),i=t(4232),o=t(6022),l=t(9605),d=(0,a.pM)({__name:"ConfirmDeleteModal",props:{name:{},actionFn:{type:Function},mini:{type:Boolean}},setup(e){const r=e,{tCap:t}=(0,l.S)(),d=(0,n.KR)(),{dialog:s,formRef:u,validForm:c,loading:m,close:v}=(0,o.q)(d);async function p(){m.value=!0,v(),await(0,a.dY)();try{await r.actionFn()}finally{m.value=!1}}return(r,o)=>{const l=(0,a.g2)("v-btn"),d=(0,a.g2)("v-row"),f=(0,a.g2)("v-container"),y=(0,a.g2)("v-form"),h=(0,a.g2)("v-card-text"),g=(0,a.g2)("v-spacer"),_=(0,a.g2)("v-card-actions"),b=(0,a.g2)("v-card"),w=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(w,{modelValue:(0,n.R1)(s),"onUpdate:modelValue":o[1]||(o[1]=e=>(0,n.i9)(s)?s.value=e:null),"max-width":"500"},{activator:(0,a.k6)(({props:r})=>[e.mini?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,(0,a.v6)({key:0},r,{color:"red",text:(0,n.R1)(t)("common.delete"),"prepend-icon":"mdi-trash-can",variant:"flat"}),null,16,["text"])),e.mini?((0,a.uX)(),(0,a.Wv)(l,(0,a.v6)({key:1},r,{color:"red",icon:"mdi-trash-can",variant:"text",density:"compact"}),null,16)):(0,a.Q3)("",!0)]),default:(0,a.k6)(()=>[(0,a.bF)(b,{title:`${(0,n.R1)(t)("common.delete")} ${e.name}`},{default:(0,a.k6)(()=>[(0,a.bF)(h,null,{default:(0,a.k6)(()=>[(0,a.bF)(y,{ref_key:"formRef",ref:u,modelValue:(0,n.R1)(c),"onUpdate:modelValue":o[0]||(o[0]=e=>(0,n.i9)(c)?c.value=e:null)},{default:(0,a.k6)(()=>[(0,a.bF)(f,null,{default:(0,a.k6)(()=>[(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.Lk)("h2",null,(0,i.v_)((0,n.R1)(t)("common.confirmDeleteMessage"))+" "+(0,i.v_)(e.name),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(g),(0,a.bF)(l,{variant:"tonal",color:"red",text:(0,n.R1)(t)("common.delete"),loading:(0,n.R1)(m),disabled:(0,n.R1)(m),onClick:p},null,8,["text","loading","disabled"]),(0,a.bF)(l,{text:(0,n.R1)(t)("common.cancel"),disabled:(0,n.R1)(m),onClick:(0,n.R1)(v)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const s=d;var u=s},8571:function(e,r,t){t.d(r,{A:function(){return v}});var a=t(6768),n=t(144),i=t(4232),o=t(2737),l=t(9605),d=t(6022),s=t(7648),u=t(7160),c=(0,a.pM)({__name:"CarrierModal",props:{carrier:{type:o.n,required:!1,default:null},mini:{type:Boolean,required:!1,default:!1}},setup(e){const{maxLength:r,required:t,rangeLength:o}=(0,u.A)(),{createDeliveryCarrierCommandHandler:c,editDeliveryCarrierCommandHandler:m}=(0,s.J)(),{tCap:v}=(0,l.S)(),p=e,f=(0,a.EW)(()=>!!p.carrier),y=(0,a.EW)(()=>f.value?v("deliveryCarrier.editCarrier"):v("deliveryCarrier.addCarrier")),h=(0,a.EW)(()=>f.value?"mdi-pencil":"mdi-plus"),g=(0,n.Kh)({name:"",street:"",city:"",zip:"",country:""}),{dialog:_,formRef:b,validForm:w,loading:C,errorMessage:k,close:R,submit:F}=(0,d.q)(g);async function S(){await F(async e=>{f.value?await m.handle({id:p.carrier.id,name:e.name}):await c.handle({name:e.name,address:{id:"",isPrimary:!0,street:e.street,city:e.city,zip:e.zip,country:e.country}})})}return(0,a.wB)(_,e=>{e&&p.carrier&&(g.name=p.carrier.name)}),(l,d)=>{const s=(0,a.g2)("v-btn"),u=(0,a.g2)("v-text-field"),c=(0,a.g2)("v-col"),m=(0,a.g2)("v-row"),p=(0,a.g2)("v-alert"),F=(0,a.g2)("v-container"),D=(0,a.g2)("v-form"),x=(0,a.g2)("v-card-text"),V=(0,a.g2)("v-spacer"),I=(0,a.g2)("v-card-actions"),A=(0,a.g2)("v-card"),P=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(P,{modelValue:(0,n.R1)(_),"onUpdate:modelValue":d[6]||(d[6]=e=>(0,n.i9)(_)?_.value=e:null),"max-width":"500"},{activator:(0,a.k6)(({props:r})=>[e.mini?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(s,(0,a.v6)({key:0},r,{color:"indigo",text:y.value,"prepend-icon":h.value,variant:"flat"}),null,16,["text","prepend-icon"])),e.mini?((0,a.uX)(),(0,a.Wv)(s,(0,a.v6)({key:1},r,{color:"surface-variant",icon:h.value,variant:"text",density:"compact"}),null,16,["icon"])):(0,a.Q3)("",!0)]),default:(0,a.k6)(()=>[(0,a.bF)(A,{title:y.value},{default:(0,a.k6)(()=>[(0,a.bF)(x,null,{default:(0,a.k6)(()=>[(0,a.bF)(D,{ref_key:"formRef",ref:b,modelValue:(0,n.R1)(w),"onUpdate:modelValue":d[5]||(d[5]=e=>(0,n.i9)(w)?w.value=e:null)},{default:(0,a.k6)(()=>[(0,a.bF)(F,{class:"pa-0",fluid:""},{default:(0,a.k6)(()=>[(0,a.bF)(m,{dense:""},{default:(0,a.k6)(()=>[(0,a.bF)(c,{cols:"12"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{modelValue:g.name,"onUpdate:modelValue":d[0]||(d[0]=e=>g.name=e),label:(0,n.R1)(v)("common.name"),rules:[(0,n.R1)(t),(0,n.R1)(o)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),f.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(c,{cols:"12"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{modelValue:g.street,"onUpdate:modelValue":d[1]||(d[1]=e=>g.street=e),label:(0,n.R1)(v)("address.street"),rules:[(0,n.R1)(t),(0,n.R1)(o)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,a.bF)(c,{cols:"8"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{modelValue:g.city,"onUpdate:modelValue":d[2]||(d[2]=e=>g.city=e),label:(0,n.R1)(v)("address.city"),rules:[(0,n.R1)(t),(0,n.R1)(o)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,a.bF)(c,{cols:"4"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{modelValue:g.zip,"onUpdate:modelValue":d[3]||(d[3]=e=>g.zip=e),label:(0,n.R1)(v)("address.zip"),rules:[(0,n.R1)(r)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,a.bF)(c,{cols:"12"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{modelValue:g.country,"onUpdate:modelValue":d[4]||(d[4]=e=>g.country=e),label:(0,n.R1)(v)("address.country"),rules:[(0,n.R1)(r)(50)]},null,8,["modelValue","label","rules"])]),_:1})],64))]),_:1}),(0,n.R1)(k)?((0,a.uX)(),(0,a.Wv)(p,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,a.k6)(()=>[(0,a.eW)((0,i.v_)((0,n.R1)(k)),1)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(I,null,{default:(0,a.k6)(()=>[(0,a.bF)(V),(0,a.bF)(s,{variant:"tonal",color:"indigo",text:(0,n.R1)(v)("common.save"),loading:(0,n.R1)(C),disabled:!(0,n.R1)(w)||(0,n.R1)(C),onClick:S},null,8,["text","loading","disabled"]),(0,a.bF)(s,{text:(0,n.R1)(v)("common.cancel"),color:"red",disabled:(0,n.R1)(C),onClick:(0,n.R1)(R)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const m=c;var v=m}}]);
//# sourceMappingURL=211.87e6a02c.js.map
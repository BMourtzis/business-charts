"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[447],{6022:function(e,t,n){n.d(t,{q:function(){return o}});var a=n(6768),r=n(144);function o(e,t){const n=(0,r.KR)(!1),o=(0,r.KR)(),i=(0,r.KR)(!1),l=(0,r.KR)(!1),u=(0,r.KR)(null),d=t?.autoReset??!0;function s(){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=t;e[n]=""}i.value=!1,o.value?.resetValidation?.(),u.value=null}function c(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const a=n;e[a]=t[a]}}async function m(){const e=await(o.value?.validate?.());return!!e?.valid}function f(){n.value=!1}async function p(t){u.value=null;const n=await m();if(n){l.value=!0;try{await t(e),f()}catch(a){console.error(a);const e=a instanceof Error?a.message:"string"===typeof a?a:String(a);u.value=e||"An unexpected error occurred"}finally{l.value=!1}}}return(0,a.wB)(n,e=>{!e&&d&&s()}),{dialog:n,formRef:o,validForm:i,loading:l,errorMessage:u,submit:p,validate:m,close:f,reset:s,setFormValues:c}}},7336:function(e,t,n){n.d(t,{X:function(){return V}});var a=n(8114),r=(n(8111),n(116),n(6768));function o(e){const t=(0,a.g)();return(0,r.EW)(()=>t.partners.find(t=>t.id===e))}var i=n(2651),l=n(7017),u=n(2977);async function d(e,t,n,r,o,d){const s=(0,i.jx)(e,t,n);r&&""!==r.trim()&&s.addEmail(r,!0),o&&""!==o.trim()&&s.addPhone(o,!0),d&&""!==d.trim()&&s.addAddress(d,!0);const c=(0,u.z)(s);await l.V.add(s);const m=(0,a.g)();return await m.add(c),s}async function s(e,t,n,r,o,u){const d=(0,i.ff)(e,t,u);d.setEmails(n),d.setPhones(r),d.setAddresses(o),await l.V.add(d);const s=(0,a.g)();return await s.add(d),d}async function c(e,t,n,r){const o=(0,a.g)(),i=o.getById(e);if(!i)return;const d=(0,u.M)(i);return d.updateBasicData(t,n,r),await l.V.update(d),await o.update((0,u.z)(d)),d}async function m(e,t,n,r=!1){const o=(0,a.g)(),i=o.getById(e);if(!i)return;const d=(0,u.M)(i);return d.addEmail(t,r,n),await l.V.update(d),await o.update((0,u.z)(d)),d}async function f(e,t,n,r,o){const i=(0,a.g)(),d=i.getById(e);if(!d)return;const s=(0,u.M)(d);return s.editEmail(t,n,r,o),await l.V.update(s),await i.update((0,u.z)(s)),s}async function p(e,t){const n=(0,a.g)(),r=n.getById(e);if(!r)return;const o=(0,u.M)(r);return o.removeEmail(t),await l.V.update(o),await n.update((0,u.z)(o)),o}async function v(e,t,n,r=!1){const o=(0,a.g)(),i=o.getById(e);if(!i)return;const d=(0,u.M)(i);return d.addPhone(t,r,n),await l.V.update(d),await o.update((0,u.z)(d)),d}async function g(e,t,n,r,o){const i=(0,a.g)(),d=i.getById(e);if(!d)return;const s=(0,u.M)(d);return s.editPhone(t,n,r,o),await l.V.update(s),await i.update((0,u.z)(s)),s}async function b(e,t){const n=(0,a.g)(),r=n.getById(e);if(!r)return;const o=(0,u.M)(r);return o.removePhone(t),await l.V.update(o),await n.update((0,u.z)(o)),o}async function y(e,t,n,r=!1){const o=(0,a.g)(),i=o.getById(e);if(!i)return;const d=(0,u.M)(i);return d.addAddress(t,r,n),await l.V.update(d),await o.update((0,u.z)(d)),d}async function R(e,t,n,r,o){const i=(0,a.g)(),d=i.getById(e);if(!d)return;const s=(0,u.M)(d);return s.editAddress(t,n,r,o),await l.V.update(s),await i.update((0,u.z)(s)),s}async function w(e,t){const n=(0,a.g)(),r=n.getById(e);if(!r)return;const o=(0,u.M)(r);return o.removeAddress(t),await l.V.update(o),await n.update((0,u.z)(o)),o}async function k(e){const t=(0,a.g)();await l.V.remove(e),await t.remove(e)}function V(){const e=(0,a.g)();return{customers:(0,r.EW)(()=>e.customers),suppliers:(0,r.EW)(()=>e.suppliers),getPartnerById:o,createSupplierCommand:d,createCustomerCommand:s,editPartnerCommand:c,addEmailCommand:m,editEmailCommand:f,removeEmailCommand:p,addPhoneCommand:v,editPhoneCommand:g,removePhoneCommand:b,addAddressCommand:y,editAddressCommand:R,removeAddressCommand:w,deletePartnerCommand:k}}},8269:function(e,t,n){n.d(t,{Ru:function(){return i},gB:function(){return o},iK:function(){return r},mw:function(){return a},oE:function(){return l},sH:function(){return u}});const a=e=>null!==e&&void 0!==e&&""!==e||"This field is required.",r=e=>{if(null===e||void 0===e)return!0;if("string"===typeof e&&""===e.trim())return!0;const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!!t.test(String(e))||"Please enter a valid email address."},o=e=>{if(null===e||void 0===e)return!0;if("string"===typeof e&&""===e.trim())return!0;const t=/^\+?[1-9]\d{9,14}$/;return!!t.test(String(e))||"Please enter a valid phone number."},i=e=>t=>null===t||void 0===t||("string"===typeof t&&""===t.trim()||("string"===typeof t&&t.length<=e||`Maximum length is ${e} characters.`)),l=(e,t)=>n=>null===n||void 0===n||("string"===typeof n&&""===n.trim()||("string"===typeof n&&n.length>=e&&n.length<=t||`Length must be between ${e} and ${t} characters.`)),u=e=>null===e||void 0===e||("string"===typeof e&&""===e.trim()||(!(isNaN(parseFloat(String(e)))||!isFinite(Number(e)))||"This field must be a numeric value."))},8447:function(e,t,n){n.d(t,{A:function(){return s}});var a=n(6768),r=n(144),o=n(4232),i=n(6022),l=n(9605),u=(0,a.pM)({__name:"ConfirmDeleteModal",props:{name:{},actionFn:{type:Function},mini:{type:Boolean}},setup(e){const t=e,{tCap:n}=(0,l.S)(),u=(0,r.KR)(),{dialog:d,formRef:s,validForm:c,loading:m,close:f}=(0,i.q)(u);async function p(){m.value=!0,f(),await(0,a.dY)();try{await t.actionFn()}finally{m.value=!1}}return(t,i)=>{const l=(0,a.g2)("v-btn"),u=(0,a.g2)("v-row"),v=(0,a.g2)("v-container"),g=(0,a.g2)("v-form"),b=(0,a.g2)("v-card-text"),y=(0,a.g2)("v-spacer"),R=(0,a.g2)("v-card-actions"),w=(0,a.g2)("v-card"),k=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(k,{modelValue:(0,r.R1)(d),"onUpdate:modelValue":i[1]||(i[1]=e=>(0,r.i9)(d)?d.value=e:null),"max-width":"500"},{activator:(0,a.k6)(({props:t})=>[e.mini?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,(0,a.v6)({key:0},t,{color:"red",text:(0,r.R1)(n)("common.delete"),"prepend-icon":"mdi-trash-can",variant:"flat"}),null,16,["text"])),e.mini?((0,a.uX)(),(0,a.Wv)(l,(0,a.v6)({key:1},t,{color:"red",icon:"mdi-trash-can",variant:"text",density:"compact"}),null,16)):(0,a.Q3)("",!0)]),default:(0,a.k6)(()=>[(0,a.bF)(w,{title:`${(0,r.R1)(n)("common.delete")} ${e.name}`},{default:(0,a.k6)(()=>[(0,a.bF)(b,null,{default:(0,a.k6)(()=>[(0,a.bF)(g,{ref_key:"formRef",ref:s,modelValue:(0,r.R1)(c),"onUpdate:modelValue":i[0]||(i[0]=e=>(0,r.i9)(c)?c.value=e:null)},{default:(0,a.k6)(()=>[(0,a.bF)(v,null,{default:(0,a.k6)(()=>[(0,a.bF)(u,null,{default:(0,a.k6)(()=>[(0,a.Lk)("h2",null,(0,o.v_)((0,r.R1)(n)("common.confirmDeleteMessage"))+" "+(0,o.v_)(e.name),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(R,null,{default:(0,a.k6)(()=>[(0,a.bF)(y),(0,a.bF)(l,{variant:"tonal",color:"red",text:(0,r.R1)(n)("common.delete"),loading:(0,r.R1)(m),disabled:(0,r.R1)(m),onClick:p},null,8,["text","loading","disabled"]),(0,a.bF)(l,{text:(0,r.R1)(n)("common.cancel"),disabled:(0,r.R1)(m),onClick:(0,r.R1)(f)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const d=u;var s=d},9149:function(e,t,n){n.d(t,{A:function(){return m}});n(8111),n(116);var a=n(6768),r=n(144),o=n(4232),i=n(7336),l=n(6022),u=n(9605),d=n(8269),s=(0,a.pM)({__name:"EditPartnerModal",props:{partner:{},mini:{type:Boolean}},setup(e){const{editPartnerCommand:t}=(0,i.X)(),{tCap:n,t:s}=(0,u.S)(),c=e,m=(0,r.Kh)({businessName:"",contactName:"",vatNumber:"",email:"",phone:"",address:""}),{dialog:f,formRef:p,validForm:v,loading:g,errorMessage:b,close:y,submit:R}=(0,l.q)(m);async function w(){await R(async e=>{t(c.partner?.id??"",e.contactName,e.businessName,e.vatNumber)})}return(0,a.wB)(f,e=>{if(e&&c.partner){m.businessName=c.partner.businessName??"",m.contactName=c.partner.contactName,m.vatNumber=c.partner.vatNumber??"";const e=c.partner.emails.find(e=>e.isPrimary);m.email=e?e.value:"";const t=c.partner.phones.find(e=>e.isPrimary);m.phone=t?t.value:"";const n=c.partner.addresses.find(e=>e.isPrimary);m.address=n?n.value:""}}),(t,i)=>{const l=(0,a.g2)("v-btn"),u=(0,a.g2)("v-text-field"),c=(0,a.g2)("v-row"),R=(0,a.g2)("v-alert"),k=(0,a.g2)("v-container"),V=(0,a.g2)("v-form"),h=(0,a.g2)("v-card-text"),F=(0,a.g2)("v-spacer"),_=(0,a.g2)("v-card-actions"),C=(0,a.g2)("v-card"),N=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(N,{modelValue:(0,r.R1)(f),"onUpdate:modelValue":i[4]||(i[4]=e=>(0,r.i9)(f)?f.value=e:null),"max-width":"500"},{activator:(0,a.k6)(({props:t})=>[e.mini?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,(0,a.v6)({key:0},t,{color:"surface-variant",text:`${(0,r.R1)(n)("common.edit")} ${(0,r.R1)(s)("partner.partner")}`,"prepend-icon":"mdi-pencil",variant:"flat"}),null,16,["text"])),e.mini?((0,a.uX)(),(0,a.Wv)(l,(0,a.v6)({key:1},t,{color:"surface-variant",icon:"mdi-pencil",variant:"text",density:"compact"}),null,16)):(0,a.Q3)("",!0)]),default:(0,a.k6)(()=>[(0,a.bF)(C,{title:`${(0,r.R1)(n)("common.edit")} ${m.businessName}`},{default:(0,a.k6)(()=>[(0,a.bF)(h,null,{default:(0,a.k6)(()=>[(0,a.bF)(V,{ref_key:"formRef",ref:p,modelValue:(0,r.R1)(v),"onUpdate:modelValue":i[3]||(i[3]=e=>(0,r.i9)(v)?v.value=e:null)},{default:(0,a.k6)(()=>[(0,a.bF)(k,null,{default:(0,a.k6)(()=>[(0,a.bF)(c,null,{default:(0,a.k6)(()=>[(0,a.bF)(u,{modelValue:m.businessName,"onUpdate:modelValue":i[0]||(i[0]=e=>m.businessName=e),label:(0,r.R1)(n)("partner.businessName"),rules:[(0,r.R1)(d.mw),(0,r.R1)(d.oE)(3,50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)(()=>[(0,a.bF)(u,{modelValue:m.contactName,"onUpdate:modelValue":i[1]||(i[1]=e=>m.contactName=e),label:(0,r.R1)(n)("partner.contactName"),rules:[(0,r.R1)(d.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)(()=>[(0,a.bF)(u,{modelValue:m.vatNumber,"onUpdate:modelValue":i[2]||(i[2]=e=>m.vatNumber=e),label:(0,r.R1)(n)("partner.vatNumber"),rules:[(0,r.R1)(d.sH),(0,r.R1)(d.oE)(8,8)]},null,8,["modelValue","label","rules"])]),_:1}),(0,r.R1)(b)?((0,a.uX)(),(0,a.Wv)(R,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)((0,r.R1)(b)),1)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(F),(0,a.bF)(l,{variant:"tonal",color:"indigo",text:(0,r.R1)(n)("common.save"),loading:(0,r.R1)(g),disabled:!(0,r.R1)(v)||(0,r.R1)(g),onClick:w},null,8,["text","loading","disabled"]),(0,a.bF)(l,{text:(0,r.R1)(n)("common.cancel"),color:"red",disabled:(0,r.R1)(g),onClick:(0,r.R1)(y)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const c=s;var m=c}}]);
//# sourceMappingURL=447.aff7cfcc.js.map
"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[686],{2686:function(e,a,n){n.d(a,{A:function(){return $}});var t=n(6768),r=n(4232),l=n(144),d=n(8600),o=n(2988),i=n(2737),c=n(9605),s=n(7299),u=n(7648),m=n(676),y=n(6022);function p(e){const a=(0,l.Kh)({type:e,name:"",value:"",isPrimary:!1});return{form:a}}function v(){const e=(0,l.Kh)({type:"address",name:"",street:"",city:"",zip:"",country:"",isPrimary:!1});return{form:e}}function f(e){if("partner"===e){const{addAddressCommandHandler:e,editAddressCommandHandler:a}=(0,s.X)();return{add:async a=>{await e.handle({partnerId:a.ownerId,street:a.street,city:a.city,zip:a.zip,country:a.country,name:a.name,isPrimary:a.isPrimary})},edit:async e=>{await a.handle({partnerId:e.ownerId,addressId:e.addressId,street:e.street,city:e.city,zip:e.zip,country:e.country,name:e.name,isPrimary:e.isPrimary})}}}if("deliveryCarrier"===e){const{addAddressCommandHandler:e,editAddressCommandHandler:a}=(0,u.J)();return{add:async a=>{await e.handle({carrierId:a.ownerId,street:a.street,city:a.city,zip:a.zip,country:a.country,name:a.name,isPrimary:a.isPrimary})},edit:async e=>{await a.handle({carrierId:e.ownerId,addressId:e.addressId,street:e.street,city:e.city,zip:e.zip,country:e.country,name:e.name,isPrimary:e.isPrimary})}}}throw new Error(`Unknown owner type: ${e}`)}var b=n(7160),w=(0,t.pM)({__name:"AddressModal",props:{ownerId:{type:String,required:!0},ownerType:{type:String,required:!0},address:{type:m.p,required:!1,default:null},mini:{type:Boolean,required:!1,default:!1}},setup(e){const{maxLength:a,required:n}=(0,b.A)(),{tCap:d}=(0,c.S)(),o=e,{form:i}=v(),s=(0,t.EW)(()=>!!o.address),u=(0,t.EW)(()=>s.value?d("address.editAddress"):d("address.addAddress")),m=(0,t.EW)(()=>s.value?"mdi-pencil":"mdi-plus"),{dialog:p,formRef:w,validForm:I,loading:g,errorMessage:h,close:P,submit:R}=(0,y.q)(i);(0,t.wB)(p,e=>{e&&o.address&&(i.street=o.address.street,i.city=o.address.city,i.zip=o.address.zip,i.country=o.address.country,i.name=o.address.name??"",i.isPrimary=o.address.isPrimary)});const{add:k,edit:F}=f(o.ownerType);async function _(){await R(async e=>{o.address?await F({ownerId:o.ownerId,addressId:o.address.id,street:e.street,city:e.city,zip:e.zip,country:e.country,name:e.name,isPrimary:e.isPrimary}):await k({ownerId:o.ownerId,street:e.street,city:e.city,zip:e.zip,country:e.country,name:e.name,isPrimary:e.isPrimary})})}return(o,c)=>{const y=(0,t.g2)("v-btn"),v=(0,t.g2)("v-text-field"),f=(0,t.g2)("v-col"),b=(0,t.g2)("v-switch"),R=(0,t.g2)("v-row"),k=(0,t.g2)("v-alert"),F=(0,t.g2)("v-container"),C=(0,t.g2)("v-form"),x=(0,t.g2)("v-card-text"),V=(0,t.g2)("v-spacer"),E=(0,t.g2)("v-card-actions"),X=(0,t.g2)("v-card"),W=(0,t.g2)("v-dialog");return(0,t.uX)(),(0,t.Wv)(W,{modelValue:(0,l.R1)(p),"onUpdate:modelValue":c[7]||(c[7]=e=>(0,l.i9)(p)?p.value=e:null),"max-width":"500"},{activator:(0,t.k6)(({props:a})=>[e.mini?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(y,(0,t.v6)({key:0},a,{color:s.value?"indigo":"success",text:u.value,"prepend-icon":m.value,variant:"flat"}),null,16,["color","text","prepend-icon"])),e.mini?((0,t.uX)(),(0,t.Wv)(y,(0,t.v6)({key:1},a,{color:s.value?"indigo":"success",icon:m.value,variant:"text",density:"compact"}),null,16,["color","icon"])):(0,t.Q3)("",!0)]),default:(0,t.k6)(()=>[(0,t.bF)(X,{title:u.value},{default:(0,t.k6)(()=>[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[(0,t.bF)(C,{ref_key:"formRef",ref:w,modelValue:(0,l.R1)(I),"onUpdate:modelValue":c[6]||(c[6]=e=>(0,l.i9)(I)?I.value=e:null)},{default:(0,t.k6)(()=>[(0,t.bF)(F,{class:"pa-0",fluid:""},{default:(0,t.k6)(()=>[(0,t.bF)(R,{dense:""},{default:(0,t.k6)(()=>[(0,t.bF)(f,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,l.R1)(i).street,"onUpdate:modelValue":c[0]||(c[0]=e=>(0,l.R1)(i).street=e),label:(0,l.R1)(d)("address.street"),rules:[(0,l.R1)(n),(0,l.R1)(a)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"8"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,l.R1)(i).city,"onUpdate:modelValue":c[1]||(c[1]=e=>(0,l.R1)(i).city=e),label:(0,l.R1)(d)("address.city"),rules:[(0,l.R1)(n),(0,l.R1)(a)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"4"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,l.R1)(i).zip,"onUpdate:modelValue":c[2]||(c[2]=e=>(0,l.R1)(i).zip=e),label:(0,l.R1)(d)("address.zip"),rules:[(0,l.R1)(a)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,l.R1)(i).country,"onUpdate:modelValue":c[3]||(c[3]=e=>(0,l.R1)(i).country=e),label:(0,l.R1)(d)("address.country"),rules:[(0,l.R1)(a)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(v,{modelValue:(0,l.R1)(i).name,"onUpdate:modelValue":c[4]||(c[4]=e=>(0,l.R1)(i).name=e),label:(0,l.R1)(d)("common.name"),rules:[(0,l.R1)(a)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(b,{modelValue:(0,l.R1)(i).isPrimary,"onUpdate:modelValue":c[5]||(c[5]=e=>(0,l.R1)(i).isPrimary=e),label:(0,l.R1)(d)("common.primary_gen")},null,8,["modelValue","label"])]),_:1})]),_:1}),(0,l.R1)(h)?((0,t.uX)(),(0,t.Wv)(k,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,l.R1)(h)),1)]),_:1})):(0,t.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(E,null,{default:(0,t.k6)(()=>[(0,t.bF)(V),(0,t.bF)(y,{variant:"tonal",color:"indigo",text:(0,l.R1)(d)("common.save"),loading:(0,l.R1)(g),disabled:!(0,l.R1)(I)||(0,l.R1)(g),onClick:_},null,8,["text","loading","disabled"]),(0,t.bF)(y,{text:(0,l.R1)(d)("common.cancel"),color:"red",disabled:(0,l.R1)(g),onClick:(0,l.R1)(P)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const I=w;var g=I,h=n(2496);function P(e,a){if("partner"===e){const{addEmailCommandHandler:e,addPhoneCommandHandler:n,editEmailCommandHandler:t,editPhoneCommandHandler:r}=(0,s.X)();if(a===o.P.Email)return{add:async a=>{await e.handle({partnerId:a.ownerId,email:a.value,name:a.name,isPrimary:a.isPrimary})},edit:async e=>{await t.handle({partnerId:e.ownerId,emailId:e.contactId,email:e.value,name:e.name,isPrimary:e.isPrimary})}};if(a===o.P.Phone)return{add:async e=>{await n.handle({partnerId:e.ownerId,phone:e.value,name:e.name,isPrimary:e.isPrimary})},edit:async e=>{await r.handle({partnerId:e.ownerId,phoneId:e.contactId,phone:e.value,name:e.name,isPrimary:e.isPrimary})}}}if("deliveryCarrier"===e){const{addEmailCommandHandler:e,addPhoneCommandHandler:n,editEmailCommandHandler:t,editPhoneCommandHandler:r}=(0,u.J)();if(a===o.P.Email)return{add:async a=>{await e.handle({carrierId:a.ownerId,email:a.value,name:a.name,isPrimary:a.isPrimary})},edit:async e=>{await t.handle({carrierId:e.ownerId,emailId:e.contactId,email:e.value,name:e.name,isPrimary:e.isPrimary})}};if(a===o.P.Phone)return{add:async e=>{await n.handle({carrierId:e.ownerId,phone:e.value,name:e.name,isPrimary:e.isPrimary})},edit:async e=>{await r.handle({carrierId:e.ownerId,phoneId:e.contactId,phone:e.value,name:e.name,isPrimary:e.isPrimary})}}}throw new Error(`Unsupported ownerType (${e}) or contactType (${a})`)}var R=(0,t.pM)({__name:"ContactModal",props:{ownerId:{type:String,required:!0},contactType:{type:String,required:!0,validator:e=>Object.values(o.P).includes(e)},ownerType:{type:String,required:!0},contact:{type:h.Bv,required:!1,default:null},mini:{type:Boolean,required:!1,default:!1}},setup(e){const{maxLength:a,required:n,emailFormat:d,phoneFormat:i}=(0,b.A)(),{tCap:s}=(0,c.S)(),u=e,{form:m}=p(u.contactType),v=(0,t.EW)(()=>!!u.contact),f=(0,t.EW)(()=>{switch(u.contactType){case o.P.Email:return d;case o.P.Phone:return i;default:return n}}),w=(0,t.EW)(()=>u.contactType===o.P.Phone?s("contact.phone"):s("contact.email")),I=(0,t.EW)(()=>u.contactType===o.P.Email?v.value?s("contact.editEmail"):s("contact.addEmail"):v.value?s("contact.editPhone"):s("contact.addPhone")),g=(0,t.EW)(()=>v.value?"mdi-pencil":"mdi-plus"),{dialog:h,formRef:R,validForm:k,loading:F,errorMessage:_,close:C,submit:x}=(0,y.q)(m);(0,t.wB)(h,e=>{e&&u.contact&&(m.value=u.contact.value,m.name=u.contact.name??"",m.isPrimary=u.contact.isPrimary)});const{add:V,edit:E}=P(u.ownerType,u.contactType);async function X(){await x(async e=>{u.contact?await E({ownerId:u.ownerId,contactId:u.contact.id,value:e.value,name:e.name,isPrimary:e.isPrimary}):await V({ownerId:u.ownerId,value:e.value,name:e.name,isPrimary:e.isPrimary})})}return(n,d)=>{const o=(0,t.g2)("v-btn"),i=(0,t.g2)("v-text-field"),c=(0,t.g2)("v-col"),u=(0,t.g2)("v-switch"),y=(0,t.g2)("v-row"),p=(0,t.g2)("v-alert"),b=(0,t.g2)("v-container"),P=(0,t.g2)("v-form"),x=(0,t.g2)("v-card-text"),V=(0,t.g2)("v-spacer"),E=(0,t.g2)("v-card-actions"),W=(0,t.g2)("v-card"),z=(0,t.g2)("v-dialog");return(0,t.uX)(),(0,t.Wv)(z,{modelValue:(0,l.R1)(h),"onUpdate:modelValue":d[4]||(d[4]=e=>(0,l.i9)(h)?h.value=e:null),"max-width":"500"},{activator:(0,t.k6)(({props:a})=>[e.mini?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(o,(0,t.v6)({key:0},a,{color:v.value?"indigo":"success",text:I.value,"prepend-icon":g.value,variant:"flat"}),null,16,["color","text","prepend-icon"])),e.mini?((0,t.uX)(),(0,t.Wv)(o,(0,t.v6)({key:1},a,{color:v.value?"indigo":"success",icon:g.value,variant:"text",density:"compact"}),null,16,["color","icon"])):(0,t.Q3)("",!0)]),default:(0,t.k6)(()=>[(0,t.bF)(W,{title:I.value},{default:(0,t.k6)(()=>[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[(0,t.bF)(P,{ref_key:"formRef",ref:R,modelValue:(0,l.R1)(k),"onUpdate:modelValue":d[3]||(d[3]=e=>(0,l.i9)(k)?k.value=e:null)},{default:(0,t.k6)(()=>[(0,t.bF)(b,null,{default:(0,t.k6)(()=>[(0,t.bF)(y,null,{default:(0,t.k6)(()=>[(0,t.bF)(c,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:(0,l.R1)(m).value,"onUpdate:modelValue":d[0]||(d[0]=e=>(0,l.R1)(m).value=e),label:w.value,type:"email",rules:[f.value]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(c,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:(0,l.R1)(m).name,"onUpdate:modelValue":d[1]||(d[1]=e=>(0,l.R1)(m).name=e),label:(0,l.R1)(s)("common.name"),rules:[(0,l.R1)(a)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(c,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(u,{modelValue:(0,l.R1)(m).isPrimary,"onUpdate:modelValue":d[2]||(d[2]=e=>(0,l.R1)(m).isPrimary=e),label:(0,l.R1)(s)("common.primary_gen")},null,8,["modelValue","label"])]),_:1})]),_:1}),(0,l.R1)(_)?((0,t.uX)(),(0,t.Wv)(p,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,l.R1)(_)),1)]),_:1})):(0,t.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(E,null,{default:(0,t.k6)(()=>[(0,t.bF)(V),(0,t.bF)(o,{variant:"tonal",color:"indigo",text:(0,l.R1)(s)("common.save"),loading:(0,l.R1)(F),disabled:!(0,l.R1)(k)||(0,l.R1)(F),onClick:X},null,8,["text","loading","disabled"]),(0,t.bF)(o,{text:(0,l.R1)(s)("common.cancel"),color:"red",disabled:(0,l.R1)(F),onClick:(0,l.R1)(C)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const k=R;var F=k,_=n(5130);const C=["href"];var x=(0,t.pM)({__name:"EmailLink",props:{email:{}},setup(e){const a=e;return(e,n)=>{const l=(0,t.g2)("v-icon");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(l,{icon:"mdi-email",size:"16",class:"mr-1 text-grey"}),(0,t.Lk)("a",{href:`mailto:${a.email.value}`,class:"text-decoration-none text-body-2",onClic:n[0]||(n[0]=(0,_.D$)(()=>{},["stop"]))},(0,r.v_)(a.email.value),41,C)])}}});const V=x;var E=V,X=n(7286),W=n(3676),z=n(8447);const A={class:"text-subtitle-2 mb-2"},H={key:0,class:"text-grey text-body-2 mb-2"},U={class:"d-flex align-center"},q={class:"text-subtitle-2 mb-2"},T={key:0,class:"text-grey text-body-2 mb-2"},L={class:"d-flex align-center"},Q={class:"text-subtitle-2 mb-2"},M={key:0,class:"text-grey text-body-2 mb-2"},S={class:"d-flex align-center"};var B=(0,t.pM)({__name:"ContactInfo",props:{contactInfo:{}},setup(e){const{tCap:a}=(0,c.S)(),n=(0,s.X)(),m=(0,u.J)(),y=e,p=(0,t.EW)(()=>{if(y.contactInfo instanceof d.f)return"partner";if(y.contactInfo instanceof i.n)return"deliveryCarrier";throw new Error("ContactInfo is not of type Partner or DeliveryCarrier")});function v(e,a){"partner"===p.value?n.removeEmailCommandHandler.handle({partnerId:e,emailId:a}):"deliveryCarrier"===p.value&&m.removeEmailCommandHandler.handle({carrierId:e,emailId:a})}function f(e,a){"partner"===p.value?n.removePhoneCommandHandler.handle({partnerId:e,phoneId:a}):"deliveryCarrier"===p.value&&m.removePhoneCommandHandler.handle({carrierId:e,phoneId:a})}function b(e,a){"partner"===p.value?n.removeAddressCommandHandler.handle({partnerId:e,addressId:a}):"deliveryCarrier"===p.value&&m.removeAddressCommandHandler.handle({carrierId:e,addressId:a})}return(n,d)=>{const i=(0,t.g2)("v-card-title"),c=(0,t.g2)("v-divider"),s=(0,t.g2)("v-col"),u=(0,t.g2)("v-row"),m=(0,t.g2)("v-card-text"),y=(0,t.g2)("v-card");return(0,t.uX)(),(0,t.Wv)(y,null,{default:(0,t.k6)(()=>[(0,t.bF)(i,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,l.R1)(a)("contact.contactInfo")),1)]),_:1}),(0,t.bF)(c),(0,t.bF)(m,null,{default:(0,t.k6)(()=>[(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.Lk)("h3",A,(0,r.v_)((0,l.R1)(a)("contact.email",2)),1),0===e.contactInfo.emails.length?((0,t.uX)(),(0,t.CE)("div",H,(0,r.v_)((0,l.R1)(a)("contact.noEmails")),1)):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.contactInfo.emails,a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"d-flex align-center justify-space-between mb-2"},[(0,t.bF)(E,{email:a},null,8,["email"]),(0,t.Lk)("div",U,[(0,t.bF)(F,{"owner-id":e.contactInfo.id,contact:a,"owner-type":p.value,"contact-type":(0,l.R1)(o.P).Email,mini:""},null,8,["owner-id","contact","owner-type","contact-type"]),(0,t.bF)(z.A,{name:a.value,"action-fn":()=>v(e.contactInfo.id,a.id),mini:""},null,8,["name","action-fn"])])]))),128)),(0,t.bF)(F,{"owner-id":e.contactInfo.id,"owner-type":p.value,"contact-type":(0,l.R1)(o.P).Email},null,8,["owner-id","owner-type","contact-type"])]),_:1})]),_:1}),(0,t.bF)(c,{class:"my-4"}),(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.Lk)("h3",q,(0,r.v_)((0,l.R1)(a)("contact.phone",2)),1),0===e.contactInfo.phones.length?((0,t.uX)(),(0,t.CE)("div",T,(0,r.v_)((0,l.R1)(a)("contact.noPhones")),1)):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.contactInfo.phones,a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"d-flex align-center justify-space-between mb-2"},[(0,t.bF)(X.A,{phone:a},null,8,["phone"]),(0,t.Lk)("div",L,[(0,t.bF)(F,{"owner-id":e.contactInfo.id,contact:a,"owner-type":p.value,"contact-type":(0,l.R1)(o.P).Phone,mini:""},null,8,["owner-id","contact","owner-type","contact-type"]),(0,t.bF)(z.A,{name:a.value,"action-fn":()=>f(e.contactInfo.id,a.id),mini:""},null,8,["name","action-fn"])])]))),128)),(0,t.bF)(F,{"owner-id":e.contactInfo.id,"owner-type":p.value,"contact-type":(0,l.R1)(o.P).Phone},null,8,["owner-id","owner-type","contact-type"])]),_:1})]),_:1}),(0,t.bF)(c,{class:"my-4"}),(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.Lk)("h3",Q,(0,r.v_)((0,l.R1)(a)("address.address",2)),1),0===e.contactInfo.addresses.length?((0,t.uX)(),(0,t.CE)("div",M,(0,r.v_)((0,l.R1)(a)("contact.noAddresses")),1)):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.contactInfo.addresses,a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"d-flex align-center justify-space-between mb-2"},[(0,t.bF)(W.A,{address:a,format:"full"},null,8,["address"]),(0,t.Lk)("div",S,[(0,t.bF)(g,{"owner-id":e.contactInfo.id,address:a,"owner-type":p.value,mini:""},null,8,["owner-id","address","owner-type"]),(0,t.bF)(z.A,{name:a.value,"action-fn":()=>b(e.contactInfo.id,a.id),mini:""},null,8,["name","action-fn"])])]))),128)),(0,t.bF)(g,{"owner-id":e.contactInfo.id,"owner-type":p.value},null,8,["owner-id","owner-type"])]),_:1})]),_:1})]),_:1})]),_:1})}}});const K=B;var $=K}}]);
//# sourceMappingURL=686.e772d299.js.map
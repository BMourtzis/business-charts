"use strict";(self["webpackChunkbusiness_charts"]=self["webpackChunkbusiness_charts"]||[]).push([[686],{2686:function(e,a,n){n.d(a,{A:function(){return K}});var t=n(6768),r=n(4232),l=n(144),d=n(8600),o=n(2988),i=n(9605),c=n(7299),s=n(676),u=n(6022);function m(e){const a=(0,l.Kh)({type:e,name:"",value:"",isPrimary:!1});return{form:a}}function y(){const e=(0,l.Kh)({type:"address",name:"",street:"",city:"",zip:"",country:"",isPrimary:!1});return{form:e}}var p=n(8269),v=n(7648);function f(e){if("partner"===e){const{addAddressCommandHandler:e,editAddressCommandHandler:a}=(0,c.X)();return{add:async a=>{await e.handle({partnerId:a.ownerId,street:a.street,city:a.city,zip:a.zip,country:a.country,name:a.name,isPrimary:a.isPrimary})},edit:async e=>{await a.handle({partnerId:e.ownerId,addressId:e.addressId,street:e.street,city:e.city,zip:e.zip,country:e.country,name:e.name,isPrimary:e.isPrimary})}}}if("deliveryCarrier"===e){const{addAddressCommandHandler:e,editAddressCommandHandler:a}=(0,v.J)();return{add:async a=>{await e.handle({carrierId:a.ownerId,street:a.street,city:a.city,zip:a.zip,country:a.country,name:a.name,isPrimary:a.isPrimary})},edit:async e=>{await a.handle({carrierId:e.ownerId,addressId:e.addressId,street:e.street,city:e.city,zip:e.zip,country:e.country,name:e.name,isPrimary:e.isPrimary})}}}throw new Error(`Unknown owner type: ${e}`)}var b=(0,t.pM)({__name:"AddressModal",props:{ownerId:{type:String,required:!0},ownerType:{type:String,required:!0},address:{type:s.p,required:!1,default:null},mini:{type:Boolean,required:!1,default:!1}},setup(e){const{tCap:a}=(0,i.S)(),n=e,{form:d}=y(),o=(0,t.EW)(()=>!!n.address),c=(0,t.EW)(()=>o.value?a("address.editAddress"):a("address.addAddress")),s=(0,t.EW)(()=>o.value?"mdi-pencil":"mdi-plus"),{dialog:m,formRef:v,validForm:b,loading:w,errorMessage:I,close:R,submit:g}=(0,u.q)(d);(0,t.wB)(m,e=>{e&&n.address&&(d.street=n.address.street,d.city=n.address.city,d.zip=n.address.zip,d.country=n.address.country,d.name=n.address.name??"",d.isPrimary=n.address.isPrimary)});const{add:P,edit:h}=f(n.ownerType);async function k(){await g(async e=>{n.address?await h({ownerId:n.ownerId,addressId:n.address.id,street:e.street,city:e.city,zip:e.zip,country:e.country,name:e.name,isPrimary:e.isPrimary}):await P({ownerId:n.ownerId,street:e.street,city:e.city,zip:e.zip,country:e.country,name:e.name,isPrimary:e.isPrimary})})}return(n,i)=>{const u=(0,t.g2)("v-btn"),y=(0,t.g2)("v-text-field"),f=(0,t.g2)("v-col"),g=(0,t.g2)("v-switch"),P=(0,t.g2)("v-row"),h=(0,t.g2)("v-alert"),F=(0,t.g2)("v-container"),_=(0,t.g2)("v-form"),C=(0,t.g2)("v-card-text"),x=(0,t.g2)("v-spacer"),V=(0,t.g2)("v-card-actions"),E=(0,t.g2)("v-card"),X=(0,t.g2)("v-dialog");return(0,t.uX)(),(0,t.Wv)(X,{modelValue:(0,l.R1)(m),"onUpdate:modelValue":i[7]||(i[7]=e=>(0,l.i9)(m)?m.value=e:null),"max-width":"500"},{activator:(0,t.k6)(({props:a})=>[e.mini?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(u,(0,t.v6)({key:0},a,{color:o.value?"indigo":"success",text:c.value,"prepend-icon":s.value,variant:"flat"}),null,16,["color","text","prepend-icon"])),e.mini?((0,t.uX)(),(0,t.Wv)(u,(0,t.v6)({key:1},a,{color:o.value?"indigo":"success",icon:s.value,variant:"text",density:"compact"}),null,16,["color","icon"])):(0,t.Q3)("",!0)]),default:(0,t.k6)(()=>[(0,t.bF)(E,{title:c.value},{default:(0,t.k6)(()=>[(0,t.bF)(C,null,{default:(0,t.k6)(()=>[(0,t.bF)(_,{ref_key:"formRef",ref:v,modelValue:(0,l.R1)(b),"onUpdate:modelValue":i[6]||(i[6]=e=>(0,l.i9)(b)?b.value=e:null)},{default:(0,t.k6)(()=>[(0,t.bF)(F,{class:"pa-0",fluid:""},{default:(0,t.k6)(()=>[(0,t.bF)(P,{dense:""},{default:(0,t.k6)(()=>[(0,t.bF)(f,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{modelValue:(0,l.R1)(d).street,"onUpdate:modelValue":i[0]||(i[0]=e=>(0,l.R1)(d).street=e),label:(0,l.R1)(a)("address.street"),rules:[(0,l.R1)(p.mw),(0,l.R1)(p.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"8"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{modelValue:(0,l.R1)(d).city,"onUpdate:modelValue":i[1]||(i[1]=e=>(0,l.R1)(d).city=e),label:(0,l.R1)(a)("address.city"),rules:[(0,l.R1)(p.mw),(0,l.R1)(p.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"4"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{modelValue:(0,l.R1)(d).zip,"onUpdate:modelValue":i[2]||(i[2]=e=>(0,l.R1)(d).zip=e),label:(0,l.R1)(a)("address.zip"),rules:[(0,l.R1)(p.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{modelValue:(0,l.R1)(d).country,"onUpdate:modelValue":i[3]||(i[3]=e=>(0,l.R1)(d).country=e),label:(0,l.R1)(a)("address.country"),rules:[(0,l.R1)(p.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{modelValue:(0,l.R1)(d).name,"onUpdate:modelValue":i[4]||(i[4]=e=>(0,l.R1)(d).name=e),label:(0,l.R1)(a)("common.name"),rules:[(0,l.R1)(p.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(f,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(g,{modelValue:(0,l.R1)(d).isPrimary,"onUpdate:modelValue":i[5]||(i[5]=e=>(0,l.R1)(d).isPrimary=e),label:(0,l.R1)(a)("common.primary_gen")},null,8,["modelValue","label"])]),_:1})]),_:1}),(0,l.R1)(I)?((0,t.uX)(),(0,t.Wv)(h,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,l.R1)(I)),1)]),_:1})):(0,t.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(V,null,{default:(0,t.k6)(()=>[(0,t.bF)(x),(0,t.bF)(u,{variant:"tonal",color:"indigo",text:(0,l.R1)(a)("common.save"),loading:(0,l.R1)(w),disabled:!(0,l.R1)(b)||(0,l.R1)(w),onClick:k},null,8,["text","loading","disabled"]),(0,t.bF)(u,{text:(0,l.R1)(a)("common.cancel"),color:"red",disabled:(0,l.R1)(w),onClick:(0,l.R1)(R)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const w=b;var I=w,R=n(2496);function g(e,a){if("partner"===e){const{addEmailCommandHandler:e,addPhoneCommandHandler:n,editEmailCommandHandler:t,editPhoneCommandHandler:r}=(0,c.X)();if(a===o.P.Email)return{add:async a=>{await e.handle({partnerId:a.ownerId,email:a.value,name:a.name,isPrimary:a.isPrimary})},edit:async e=>{await t.handle({partnerId:e.ownerId,emailId:e.contactId,email:e.value,name:e.name,isPrimary:e.isPrimary})}};if(a===o.P.Phone)return{add:async e=>{await n.handle({partnerId:e.ownerId,phone:e.value,name:e.name,isPrimary:e.isPrimary})},edit:async e=>{await r.handle({partnerId:e.ownerId,phoneId:e.contactId,phone:e.value,name:e.name,isPrimary:e.isPrimary})}}}if("deliveryCarrier"===e){const{addEmailCommandHandler:e,addPhoneCommandHandler:n,editEmailCommandHandler:t,editPhoneCommandHandler:r}=(0,v.J)();if(a===o.P.Email)return{add:async a=>{await e.handle({carrierId:a.ownerId,email:a.value,name:a.name,isPrimary:a.isPrimary})},edit:async e=>{await t.handle({carrierId:e.ownerId,emailId:e.contactId,email:e.value,name:e.name,isPrimary:e.isPrimary})}};if(a===o.P.Phone)return{add:async e=>{await n.handle({carrierId:e.ownerId,phone:e.value,name:e.name,isPrimary:e.isPrimary})},edit:async e=>{await r.handle({carrierId:e.ownerId,phoneId:e.contactId,phone:e.value,name:e.name,isPrimary:e.isPrimary})}}}throw new Error(`Unsupported ownerType (${e}) or contactType (${a})`)}var P=(0,t.pM)({__name:"ContactModal",props:{ownerId:{type:String,required:!0},contactType:{type:String,required:!0,validator:e=>Object.values(o.P).includes(e)},ownerType:{type:String,required:!0},contact:{type:R.Bv,required:!1,default:null},mini:{type:Boolean,required:!1,default:!1}},setup(e){const{tCap:a}=(0,i.S)(),n=e,{form:d}=m(n.contactType),c=(0,t.EW)(()=>!!n.contact),s=(0,t.EW)(()=>{switch(n.contactType){case o.P.Email:return p.iK;case o.P.Phone:return p.gB;default:return p.mw}}),y=(0,t.EW)(()=>n.contactType===o.P.Phone?a("contact.phone"):a("contact.email")),v=(0,t.EW)(()=>n.contactType===o.P.Email?c.value?a("contact.editEmail"):a("contact.addEmail"):c.value?a("contact.editPhone"):a("contact.addPhone")),f=(0,t.EW)(()=>c.value?"mdi-pencil":"mdi-plus"),{dialog:b,formRef:w,validForm:I,loading:R,errorMessage:P,close:h,submit:k}=(0,u.q)(d);(0,t.wB)(b,e=>{e&&n.contact&&(d.value=n.contact.value,d.name=n.contact.name??"",d.isPrimary=n.contact.isPrimary)});const{add:F,edit:_}=g(n.ownerType,n.contactType);async function C(){await k(async e=>{n.contact?await _({ownerId:n.ownerId,contactId:n.contact.id,value:e.value,name:e.name,isPrimary:e.isPrimary}):await F({ownerId:n.ownerId,value:e.value,name:e.name,isPrimary:e.isPrimary})})}return(n,o)=>{const i=(0,t.g2)("v-btn"),u=(0,t.g2)("v-text-field"),m=(0,t.g2)("v-col"),g=(0,t.g2)("v-switch"),k=(0,t.g2)("v-row"),F=(0,t.g2)("v-alert"),_=(0,t.g2)("v-container"),x=(0,t.g2)("v-form"),V=(0,t.g2)("v-card-text"),E=(0,t.g2)("v-spacer"),X=(0,t.g2)("v-card-actions"),W=(0,t.g2)("v-card"),z=(0,t.g2)("v-dialog");return(0,t.uX)(),(0,t.Wv)(z,{modelValue:(0,l.R1)(b),"onUpdate:modelValue":o[4]||(o[4]=e=>(0,l.i9)(b)?b.value=e:null),"max-width":"500"},{activator:(0,t.k6)(({props:a})=>[e.mini?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(i,(0,t.v6)({key:0},a,{color:c.value?"indigo":"success",text:v.value,"prepend-icon":f.value,variant:"flat"}),null,16,["color","text","prepend-icon"])),e.mini?((0,t.uX)(),(0,t.Wv)(i,(0,t.v6)({key:1},a,{color:c.value?"indigo":"success",icon:f.value,variant:"text",density:"compact"}),null,16,["color","icon"])):(0,t.Q3)("",!0)]),default:(0,t.k6)(()=>[(0,t.bF)(W,{title:v.value},{default:(0,t.k6)(()=>[(0,t.bF)(V,null,{default:(0,t.k6)(()=>[(0,t.bF)(x,{ref_key:"formRef",ref:w,modelValue:(0,l.R1)(I),"onUpdate:modelValue":o[3]||(o[3]=e=>(0,l.i9)(I)?I.value=e:null)},{default:(0,t.k6)(()=>[(0,t.bF)(_,null,{default:(0,t.k6)(()=>[(0,t.bF)(k,null,{default:(0,t.k6)(()=>[(0,t.bF)(m,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(u,{modelValue:(0,l.R1)(d).value,"onUpdate:modelValue":o[0]||(o[0]=e=>(0,l.R1)(d).value=e),label:y.value,type:"email",rules:[s.value]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(m,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(u,{modelValue:(0,l.R1)(d).name,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,l.R1)(d).name=e),label:(0,l.R1)(a)("common.name"),rules:[(0,l.R1)(p.Ru)(50)]},null,8,["modelValue","label","rules"])]),_:1}),(0,t.bF)(m,{cols:"12"},{default:(0,t.k6)(()=>[(0,t.bF)(g,{modelValue:(0,l.R1)(d).isPrimary,"onUpdate:modelValue":o[2]||(o[2]=e=>(0,l.R1)(d).isPrimary=e),label:(0,l.R1)(a)("common.primary_gen")},null,8,["modelValue","label"])]),_:1})]),_:1}),(0,l.R1)(P)?((0,t.uX)(),(0,t.Wv)(F,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,l.R1)(P)),1)]),_:1})):(0,t.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(X,null,{default:(0,t.k6)(()=>[(0,t.bF)(E),(0,t.bF)(i,{variant:"tonal",color:"indigo",text:(0,l.R1)(a)("common.save"),loading:(0,l.R1)(R),disabled:!(0,l.R1)(I)||(0,l.R1)(R),onClick:C},null,8,["text","loading","disabled"]),(0,t.bF)(i,{text:(0,l.R1)(a)("common.cancel"),color:"red",disabled:(0,l.R1)(R),onClick:(0,l.R1)(h)},null,8,["text","disabled","onClick"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}});const h=P;var k=h;const F=["href"];var _=(0,t.pM)({__name:"EmailLink",props:{email:{}},setup(e){const a=e;return(e,n)=>{const l=(0,t.g2)("v-icon");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(l,{icon:"mdi-email",size:"16",class:"mr-1 text-grey"}),(0,t.Lk)("a",{href:`mailto:${a.email.value}`,class:"text-decoration-none text-body-2"},(0,r.v_)(a.email.value),9,F)])}}});const C=_;var x=C,V=n(7286),E=n(3676),X=n(8447),W=n(2737);const z={class:"text-subtitle-2 mb-2"},H={key:0,class:"text-grey text-body-2 mb-2"},A={class:"d-flex align-center"},U={class:"text-subtitle-2 mb-2"},T={key:0,class:"text-grey text-body-2 mb-2"},q={class:"d-flex align-center"},Q={class:"text-subtitle-2 mb-2"},L={key:0,class:"text-grey text-body-2 mb-2"},M={class:"d-flex align-center"};var S=(0,t.pM)({__name:"ContactInfo",props:{contactInfo:{}},setup(e){const{tCap:a}=(0,i.S)(),n=(0,c.X)(),s=(0,v.J)(),u=e,m=(0,t.EW)(()=>{if(u.contactInfo instanceof d.f)return"partner";if(u.contactInfo instanceof W.n)return"deliveryCarrier";throw new Error("ContactInfo is not of type Partner or DeliveryCarrier")});function y(e,a){"partner"===m.value?n.removeEmailCommandHandler.handle({partnerId:e,emailId:a}):"deliveryCarrier"===m.value&&s.removeEmailCommandHandler.handle({carrierId:e,emailId:a})}function p(e,a){"partner"===m.value?n.removePhoneCommandHandler.handle({partnerId:e,phoneId:a}):"deliveryCarrier"===m.value&&s.removePhoneCommandHandler.handle({carrierId:e,phoneId:a})}function f(e,a){"partner"===m.value?n.removeAddressCommandHandler.handle({partnerId:e,addressId:a}):"deliveryCarrier"===m.value&&s.removeAddressCommandHandler.handle({carrierId:e,addressId:a})}return(n,d)=>{const i=(0,t.g2)("v-card-title"),c=(0,t.g2)("v-divider"),s=(0,t.g2)("v-col"),u=(0,t.g2)("v-row"),v=(0,t.g2)("v-card-text"),b=(0,t.g2)("v-card");return(0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)(()=>[(0,t.bF)(i,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,r.v_)((0,l.R1)(a)("contact.contactInfo")),1)]),_:1}),(0,t.bF)(c),(0,t.bF)(v,null,{default:(0,t.k6)(()=>[(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.Lk)("h3",z,(0,r.v_)((0,l.R1)(a)("contact.email",2)),1),0===e.contactInfo.emails.length?((0,t.uX)(),(0,t.CE)("div",H,(0,r.v_)((0,l.R1)(a)("contact.noEmails")),1)):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.contactInfo.emails,a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"d-flex align-center justify-space-between mb-2"},[(0,t.bF)(x,{email:a},null,8,["email"]),(0,t.Lk)("div",A,[(0,t.bF)(k,{"owner-id":e.contactInfo.id,contact:a,"owner-type":m.value,"contact-type":(0,l.R1)(o.P).Email,mini:""},null,8,["owner-id","contact","owner-type","contact-type"]),(0,t.bF)(X.A,{name:a.value,"action-fn":()=>y(e.contactInfo.id,a.id),mini:""},null,8,["name","action-fn"])])]))),128)),(0,t.bF)(k,{"owner-id":e.contactInfo.id,"owner-type":m.value,"contact-type":(0,l.R1)(o.P).Email},null,8,["owner-id","owner-type","contact-type"])]),_:1})]),_:1}),(0,t.bF)(c,{class:"my-4"}),(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.Lk)("h3",U,(0,r.v_)((0,l.R1)(a)("contact.phone",2)),1),0===e.contactInfo.phones.length?((0,t.uX)(),(0,t.CE)("div",T,(0,r.v_)((0,l.R1)(a)("contact.noPhones")),1)):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.contactInfo.phones,a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"d-flex align-center justify-space-between mb-2"},[(0,t.bF)(V.A,{phone:a},null,8,["phone"]),(0,t.Lk)("div",q,[(0,t.bF)(k,{"owner-id":e.contactInfo.id,contact:a,"owner-type":m.value,"contact-type":(0,l.R1)(o.P).Phone,mini:""},null,8,["owner-id","contact","owner-type","contact-type"]),(0,t.bF)(X.A,{name:a.value,"action-fn":()=>p(e.contactInfo.id,a.id),mini:""},null,8,["name","action-fn"])])]))),128)),(0,t.bF)(k,{"owner-id":e.contactInfo.id,"owner-type":m.value,"contact-type":(0,l.R1)(o.P).Phone},null,8,["owner-id","owner-type","contact-type"])]),_:1})]),_:1}),(0,t.bF)(c,{class:"my-4"}),(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.Lk)("h3",Q,(0,r.v_)((0,l.R1)(a)("address.address",2)),1),0===e.contactInfo.addresses.length?((0,t.uX)(),(0,t.CE)("div",L,(0,r.v_)((0,l.R1)(a)("contact.noAddress")),1)):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.contactInfo.addresses,a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"d-flex align-center justify-space-between mb-2"},[(0,t.bF)(E.A,{address:a,format:"full"},null,8,["address"]),(0,t.Lk)("div",M,[(0,t.bF)(I,{"owner-id":e.contactInfo.id,address:a,"owner-type":m.value,mini:""},null,8,["owner-id","address","owner-type"]),(0,t.bF)(X.A,{name:a.value,"action-fn":()=>f(e.contactInfo.id,a.id),mini:""},null,8,["name","action-fn"])])]))),128)),(0,t.bF)(I,{"owner-id":e.contactInfo.id,"owner-type":m.value},null,8,["owner-id","owner-type"])]),_:1})]),_:1})]),_:1})]),_:1})}}});const B=S;var K=B}}]);
//# sourceMappingURL=686.43987fec.js.map